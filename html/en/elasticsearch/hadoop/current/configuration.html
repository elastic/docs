<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Configuration
        | Elasticsearch for Apache Hadoop [6.6]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch for Apache Hadoop [6.6]" /><link rel="up" href="reference.html" title="Elasticsearch for Apache Hadoop" /><link rel="prev" href="arch.html" title="Architecture" /><link rel="next" href="configuration-runtime.html" title="Runtime options" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Apache Hadoop/6.6" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="6.6" />
    

    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
<meta name="apple-mobile-web-app-title" content="Elastic">
<meta name="application-name" content="Elastic">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">
<meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
<meta name="yandex-verification" content="d8a47e95d0972434" />
<!-- DC tags section -->
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
<link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >



	



<!-- end DC tags -->


	<meta name="description" content="" />



	<meta name="localized" content="true" />


















		
			<meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
		

		

    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">

	 

    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    
    

    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  <script type="text/javascript">
  // -------------------- set language based on browser language --------------------
  var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

  if($.cookie("is_lang_detected") == undefined){
    if(locales[lang] != undefined && locales[lang] != currentlocale){
      locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
      $.cookie("is_lang_detected",true ,{ path: '/'}); 
      window.location = locale_lang_url;
    } 
  }
        
  // --------------------- end of set language based on browser language -----------------
  </script>

  

	
	<link type="text/css" rel="stylesheet" href="/static/css/guide.css" />


  
<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
  <body >
  	<!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
                              height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
<script src="/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>


<script type="text/javascript">
  var active;
  
  active = Math.random() < 1 //0.9 
  
  elasticApm.init({
    active: active,
    serviceName: "elastic-co-frontend",
    serverUrl: "https://elastic-co-apm-server.app.elstc.co"
  })

  var pageLoadName
  var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
  var parts = pathname.split('/');

  if (parts.length && parts[1] === 'blog') {
    if (parts.length === 2) {
      pageLoadName =  '/blog';
    }
    else if (parts[2] === 'category') {
      pageLoadName =  '/blog/category';
    }
    else if (parts[2] === 'archive') {
      pageLoadName =  '/blog/archive';
    }
    else {
      pageLoadName =  '/blog/detail';
    }
  }
  else if (parts.length && parts[1] === 'elasticon') {
    if (parts.length === 2) {
      pageLoadName =  '/elasticon';
    }
    else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
      pageLoadName =  '/elasticon/overview';
    }
    else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
      pageLoadName =  '/elasticon/video';
    }
  }
  else if (parts.length && parts[1] === 'guide') {
    pageLoadName =  '/guide';
  }
  else if (parts.length === 2 && parts[1] === 'videos') {
    pageLoadName =  '/videos';
  }
  else if (parts.length > 2 && parts[1] === 'videos') {
    pageLoadName =  '/videos/detail';
  }
  else if (parts.length > 2 && parts[1] === 'webinars') {
    pageLoadName =  '/webinars/detail';
  }
  else {
    pageLoadName =  window.location.pathname;
  }

  console.log('apm pageLoadName:', pageLoadName, parts)
  elasticApm.setTags({env:"production"});
  elasticApm.setInitialPageLoadName(pageLoadName);
</script>

<!-- Elastic APM -->


    <!-- Header Section -->
    
<header class="header-wrapper">
  



  




<div class="navigation-wrapper">
  <div class="container">
    <nav class="navbar">
    <!-- Brand and toggle get grouped for better mobile display -->

    <div class="navbar-mobile-header navbar-header mr-20 mr-xs-0">
      <div class="row hidden-sm hidden-md hidden-lg">
        <div class="col-xs-5 hidden-sm hidden-md hidden-lg">
          <div class="navbar-mobile-header-icon navbar-mobile-header-icon-out">
            <span></span>
            <span></span>
            <span></span>
          </div>
          
        </div>
        <div class="col-xs-2 text-center">
          <div class="navbar-brand" id="elastic">
            <div id="logo">
              <a class="logo-m hidden-sm hidden-md hidden-lg" href="/">
                <img src="/assets/blta09706b1c5cc1e99/elastic-logo-mobile.svg" alt="elastic-logo-mobile">
              </a>
            </div>
          </div>
        </div>
        <div class="col-xs-5 hidden-sm hidden-md hidden-lg text-right">
          <ul class="menu-m hidden-sm hidden-md hidden-lg">
            <li class=""><a class="icon-contact" href="/contact"></a></li>

            <li id="searchbar"><a class="button icon" href="#" alt="Search"></a></li>
            <li class="lang global-language">
                
                  
                
                  
                    <a href="#">EN</a>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              <ul class="language-list">
                
                  
                    
                  
                  
                  <li><a href="/de/" data-value="/de/" id="locale-select">Deutsch</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="#" data-value="/" id="locale-select">English</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/es/" data-value="/es/" id="locale-select">Español</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/fr/" data-value="/fr/" id="locale-select">Français</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/jp/" data-value="/jp/" id="locale-select">日本語</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/kr/" data-value="/kr/" id="locale-select">한국어</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/cn/" data-value="/cn/" id="locale-select">简体中文</a></li>
                  
                
              </ul>
            </li>
          </ul>
        </div>
      </div>

      <div class="navbar-brand hidden-xs" id="elastic">
        <div id="logo">
          <a class="hidden-xs" id="elastic-logo" href="/">
            <img src="/assets/blt244a845f141977c3/elastic-logo.svg" alt="elastic-logo">
          </a>
        </div>
      </div>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse mobile-inner-nav">
      <nav class="nav navbar-nav primary-nav-hover" id="nav">
        <ul>
        
          
            
              
            
            <li>
              <a class=" " href="/products">Products</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/cloud">Cloud</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/services">Services</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/use-cases">Customers</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/learn">Learn</a>
            </li>
          
        
          
        
        </ul>
      </nav>
      <nav class="nav navbar-nav navbar-right hidden-xs">
        <ul>
          <li class="hidden-xs hidden-sm"><a href="/downloads">downloads</a></li>
          <li class="hidden-xs hidden-md hidden-lg"><a class="icon-download" href="/downloads"></a></li>
          <!-- To set parameters to contact button -->
          
           
            
          

          
            
            
          
          <li class="hidden-xs hidden-sm"><a class="btn btn-secondary btn-contact" href="/contact?storm=global-header-en">contact</a></li>
          <!-- ////////////////ends here///////////////-->          
          <li class="hidden-xs hidden-md hidden-lg"><a class="icon-contact" href="/contact?storm=global-header-en"></a></li>
          <li class="hidden-xs" id="searchbar"><a class="button icon" href="#" alt="Search"></a></li>

          <li class="hidden-xs lang global-language">
                
                  
                
                  
                    <a href="#">EN</a>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
               <ul class="language-list">
              
                
                  
                
              
              <li><a class="" href="/de/" data-value="/de/">Deutsch</a></li>
              
              
                
                  
                
              
              <li><a class="" href="#" data-value="/">English</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/es/" data-value="/es/">Español</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/fr/" data-value="/fr/">Français</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/jp/" data-value="/jp/">日本語</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/kr/" data-value="/kr/">한국어</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/cn/" data-value="/cn/">简体中文</a></li>
              
              
            </ul>
          </li>
        </ul>
      </nav>
    </div><!-- /.navbar-collapse -->
  </nav>
  </div>
</div>

<div class="header-search-wrapper open-search"> 
  <div class="container">
    <div class="big-search">
      <i class="big-search-icon"></i>
      <form id="searchfrm" name="searchForm" autocomplete="on" action="/search" method="get">
        <ul class="tags-wrapper">
          <li class="search-field"><input type="text" name="q" id="autocomplete" class="form-control global-input" autocomplete="off"></li>
        </ul>
      </form>
      <a class="header-search-cancel" href="#"></a>
    </div>
    <div class="nav-auto-complete"></div>
  </div>
</div>
</header>
<link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">
<style> 
    
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    
      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    
      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    
    
</style>
<script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>
<script type="text/javascript">
  $(document).ready( function(){
    // if($('#scrollable-pane li').length > 3){
      $('.horizon-swiper').horizonSwiper({
        showItems: 3,
        arrows: true
      }); 
    // }
    
    $('.navbar-toggle').on('click', function(){
      $('.mobile-navigation, .menu-open').hide();
      $('.navigation-wrapper').addClass('mobile-navigation');
      $('.navbar').addClass('menu-open');
      $('.menu-close').show();
    });
    $('.menu-close').on('click', function(){
      $('.navigation-wrapper').removeClass('mobile-navigation');
      $('.navbar').removeClass('menu-open');
      $('.menu-close').hide();
    });

    var active_url = "";

    $(".navbar-mobile-header-icon").click(function(index){
      $('.navigation-wrapper').toggleClass('menu-overlay');
      $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
      $(".mobile-inner-nav").slideToggle(500);
      $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
        $(this).css({'animation-delay': (index/25)+'0.4s'});
      });
    });

    $('.dropdown-btn').on('click', function(e){
      e.preventDefault();
      setDropdown();
    });
    
    function setDropdown() {
      $('#myDropdown').slideToggle();
    }

    $('body').on('click', function(event){
      if (!event.target.matches('.dropdown-btn')) {

        var dropdowns = $(".dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    });

    // if($(window).width() < 769){
    //   var $item = $('.scrollable-panel li'), 
    //       visible = 3, //Set the number of items that will be visible
    //       index = 0, //Starting index
    //       endIndex = ( $item.length / visible ) - 1; //End index (NOTE:: Requires visible to be a factor of $item.length... You can improve this by rounding...)

    //   $('#right-arrow').click(function(){
    //     if(index < endIndex ){
    //       index++;
    //       $item.animate({'left':'-=300px'});
    //     }
    //   });

    //   $('#left-arrow').click(function(){
    //     if(index > 0){
    //       index--;            
    //       $item.animate({'left':'+=300px'});
    //     }
    //   });
    // }
  });
  $(window).resize(function () {
    $('.horizon-swiper').horizonSwiper({
      showItems: 3,
      arrows: true
    });
  });
</script>
    
      


  





  
  
  
  
    <div class="tertiary-nav bdr-btm-e0e0e0">
      <div class="container">
        <div class="p-t-b-15 clearfix">
          <div class="breadcrum-wrapper pull-left text-left">
          
            <a href="/guide">Docs</a> 
          
          </div>
          
          
          
        </div>
      </div>
    </div>

    <div class="nav-mobile-dropdown hidden-sm hidden-md hidden-lg bdr-btm-e0e0e0 clearfix">
      <div class="container text-right">
        <div class="breadcrum-wrapper pull-left text-left">
          
              <a href="/guide">Docs</a>
          
        </div>
        
        
      </div>
    </div>
  


<style type="text/css">

  
</style>
    
    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   
          
            
        			<!-- <div class="pageheader">
	<div class="common-container">
		
			<h2 class="page-title">Guide template</h2>
		
	</div>
</div> -->


        		
          

          
	<section id="guide" lang="en">
		<div class="container">
			<div class="row">
			  <!-- start body -->
				
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch for Apache Hadoop
      [6.6]
    </a></span> » <span class="breadcrumb-link"><a href="reference.html">Elasticsearch for Apache Hadoop</a></span> » <span class="breadcrumb-node">Configuration</span></div><div class="navheader"><span class="prev"><a href="arch.html">
              « 
              Architecture</a>
           
        </span><span class="next">
           
          <a href="configuration-runtime.html">Runtime options
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="configuration"></a>Configuration<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>elasticsearch-hadoop behavior can be customized through the properties below, typically by setting them on the target job’s Hadoop <code class="literal">Configuration</code>. However some of them can be specified through other means depending on the library used (see the relevant section).</p><div class="sidebar"><div class="titlepage"></div><p>elasticsearch-hadoop uses the same conventions and reasonable defaults as Elasticsearch so you can try it out without bothering with the configuration. Most of the time, these defaults are just fine for running a production cluster; if you are fine-tunning your cluster or wondering about the effect of certain configuration options, please <span class="emphasis"><em>do ask</em></span> for more information.</p></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>All configuration properties start with the <code class="literal">es</code> prefix. The namespace <code class="literal">es.internal</code> is reserved by the library for its internal use and should <span class="emphasis"><em>not</em></span> be used by the user at any point.</p></div></div><h3><a id="_required_settings"></a>Required settings<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.resource</code>
</span></dt><dd>
Elasticsearch resource location, where data is read <span class="emphasis"><em>and</em></span> written to. Requires the format <code class="literal">&lt;index&gt;/&lt;type&gt;</code> (relative to the Elasticsearch host/port (see <a class="link" href="configuration.html#cfg-network" title="Networkedit">below</a>))).
</dd></dl></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ini">es.resource = twitter/tweet   # index 'twitter', type 'tweet'</pre></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.resource.read</code> (defaults to <code class="literal">es.resource</code>)
</span></dt><dd>
Elasticsearch resource used for reading (but not writing) data. Useful when reading and writing data to different Elasticsearch indices within the <span class="emphasis"><em>same</em></span> job. Typically set automatically (except for the Map/Reduce module which requires manual configuration).
</dd><dt><span class="term">
<code class="literal">es.resource.write</code>(defaults to <code class="literal">es.resource</code>)
</span></dt><dd>
Elasticsearch resource used for writing (but not reading) data. Used typically for <span class="emphasis"><em>dynamic resource</em></span> writes or when writing and reading data to different Elasticsearch indices within the <span class="emphasis"><em>same</em></span> job. Typically set automatically (except for the Map/Reduce module which requires manual configuration).
</dd></dl></div><p>Note that specifying <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/guide/current/multi-index-multi-type.html" target="_top">multiple</a>
indices and/or types in the above resource settings are allowed <span class="strong strong"><strong>only</strong></span> for reading. Specifying multiple indices for
writes is only supported through the use of dynamic resource (described <a class="link" href="configuration.html#cfg-multi-writes" title="Dynamic/multi resource writesedit">below</a>). Use <code class="literal">_all/types</code>
to search <code class="literal">types</code> in all indices or <code class="literal">index/</code> to search all types within <code class="literal">index</code>. Do note that reading multiple
indices/types typically works only when they have the same structure and only with some libraries. Integrations that
require a strongly typed mapping (such as a table like Hive or SparkSQL) are likely to fail.</p><h5><a id="cfg-multi-writes"></a>Dynamic/multi resource writes<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>For writing, elasticsearch-hadoop allows the target resource to be resolved at runtime by using patterns (by using the <code class="literal">{&lt;field-name&gt;}</code> format), resolved at runtime based on the data being streamed to Elasticsearch. That is, one can save documents to a certain <code class="literal">index</code> or <code class="literal">type</code> based on one or multiple fields resolved from the document about to be saved.</p><p>For example, assuming the following document set (described here in JSON for readability - feel free to translate this into the actual Java objects):</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{
    "media_type":"game",
    "title":"Final Fantasy VI",
    "year":"1994"
},
{
    "media_type":"book",
    "title":"Harry Potter",
    "year":"2010"
},
{
    "media_type":"music",
    "title":"Surfing With The Alien",
    "year":"1987"
}</pre></div><p>to index each of them based on their <code class="literal">media_type</code> one would use the following pattern:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ini"># index the documents based on their type
es.resource.write = my-collection/{media_type}</pre></div><p>which would result in <code class="literal">Final Fantasy VI</code> indexed under <code class="literal">my-collection/game</code>, <code class="literal">Harry Potter</code> under <code class="literal">my-collection/book</code> and <code class="literal">Surfing With The Alien</code> under <code class="literal">my-collection/music</code>.
For more information, please refer to the dedicated integration section.</p><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>Dynamic resources are supported <span class="emphasis"><em>only</em></span> for writing, for doing multi-index/type reads, use an appropriate <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.0/search-search.html" target="_top">search query</a>.</p></div></div><h5><a id="cfg-multi-writes-format"></a>Formatting dynamic/multi resource writes<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>When using dynamic/multi writes, one can also specify a formatting of the value returned by the field. Out of the box, elasticsearch-hadoop provides formatting for date/timestamp fields which is useful for automatically grouping time-based data (such as logs)
 within a certain time range under the same index. By using the Java <a class="ulink" href="http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html" target="_top">SimpleDataFormat</a> syntax, one can format and parse the date in a locale-sensitive manner.</p><p>For example assuming the data contains a <code class="literal">@timestamp</code> field, one can group the documents in <span class="emphasis"><em>daily</em></span> indices using the following configuration:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ini"># index the documents based on their date
es.resource.write = my-collection/{@timestamp|yyyy.MM.dd} <a id="CO9-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO9-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
<code class="literal">@timestamp</code> field formatting - in this case <code class="literal">yyyy.MM.dd</code>
</p></td></tr></table></div><p>The same configuration property is used (<code class="literal">es.resource.write</code>) however, through the special <code class="literal">|</code> characters a formatting pattern is specified.
Please refer to the <a class="ulink" href="http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html" target="_top">SimpleDateFormat</a> javadocs for more information on the syntax supported.
In this case <code class="literal">yyyy.MM.dd</code> translates the date into the year (specified by four digits), month by 2 digits followed by the day by two digits (such as <code class="literal">2015.01.28</code>).</p><p><a class="ulink" href="http://logstash.net/" target="_top">Logstash</a> users will find this <span class="emphasis"><em>pattern</em></span> quite <a class="ulink" href="http://logstash.net/docs/latest/filters/date" target="_top">familiar</a>.</p><h3><a id="_essential_settings"></a>Essential settings<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><h4><a id="cfg-network"></a>Network<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.nodes</code> (default localhost)
</span></dt><dd>
List of Elasticsearch nodes to connect to. When using Elasticsearch remotely, <span class="emphasis"><em>do</em></span> set this option. Note that the list does <span class="emphasis"><em>not</em></span> have to contain <span class="emphasis"><em>every</em></span> node inside the Elasticsearch cluster; these are discovered automatically by elasticsearch-hadoop by default (see below). Each node can also have its HTTP/REST port specified individually (e.g. <code class="literal">mynode:9600</code>).
</dd><dt><span class="term">
<code class="literal">es.port</code> (default 9200)
</span></dt><dd>
Default HTTP/REST port used for connecting to Elasticsearch - this setting is applied to the nodes in <code class="literal">es.nodes</code> that do not have any port specified.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.2. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.nodes.path.prefix</code> (default empty)
</span></dt><dd>
Prefix to add to <span class="emphasis"><em>all</em></span> requests made to Elasticsearch. Useful in environments where the cluster is proxied/routed under a certain path. For example, if the cluster is located at <code class="literal">someaddress:someport/custom/path/prefix</code>, one would set <code class="literal">es.nodes.path.prefix</code> to <code class="literal">/custom/path/prefix</code>.
</dd></dl></div><h4><a id="_querying"></a>Querying<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.query</code> (default none)
</span></dt><dd><p class="simpara">
Holds the query used for reading data from the specified <code class="literal">es.resource</code>. By default it is not set/empty, meaning the entire data under the specified index/type is returned.
<code class="literal">es.query</code> can have three forms:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
uri query
</span></dt><dd>
using the form <code class="literal">?uri_query</code>, one can specify a <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.0/search-uri-request.html" target="_top">query string</a>. Notice the leading <code class="literal">?</code>.
</dd><dt><span class="term">
query dsl
</span></dt><dd>
using the form <code class="literal">query_dsl</code> - note the query dsl needs to start with <code class="literal">{</code> and end with <code class="literal">}</code> as mentioned <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.0/search-request-body.html" target="_top">here</a>
</dd><dt><span class="term">
external resource
</span></dt><dd>
if none of the two above do match, elasticsearch-hadoop will try to interpret the parameter as a path within the HDFS file-system. If that is not the case, it will try to load the resource from the classpath or, if that fails, from the Hadoop <code class="literal">DistributedCache</code>. The resource should contain either a <code class="literal">uri query</code> or a <code class="literal">query dsl</code>.
</dd></dl></div></dd></dl></div><p>To wit, here is an example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ini"># uri (or parameter) query
es.query = ?q=costinl

# query dsl
es.query = { "query" : { "term" : { "user" : "costinl" } } }

# external resource
es.query = org/mypackage/myquery.json</pre></div><p>In other words, <code class="literal">es.query</code> is flexible enough so that you can use whatever search api you prefer, either inline or by loading it from an external resource.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>We recommend using query dsl externalized in a file, included within the job jar (and thus available on its classpath). This makes it easy
to identify, debug and organize your queries.
Through-out the documentation we use the uri query to save text and increase readability - real-life queries quickly become unwieldy when used as uris.</p></div></div><h4><a id="_operation"></a>Operation<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.input.json</code> (default false)
</span></dt><dd>
Whether the input is already in JSON format or not (the default). Please see the appropriate section of each
integration for more details about using JSON directly.
</dd><dt><span class="term">
<code class="literal">es.write.operation</code> (default index)
</span></dt><dd><p class="simpara">
The write operation elasticsearch-hadoop should perform - can be any of:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">index</code> (default)
</span></dt><dd>
new data is added while existing data (based on its id) is replaced (reindexed).
</dd><dt><span class="term">
<code class="literal">create</code>
</span></dt><dd>
adds new data - if the data already exists (based on its id), an exception is thrown.
</dd><dt><span class="term">
<code class="literal">update</code>
</span></dt><dd>
updates existing data (based on its id). If no data is found, an exception is thrown.
</dd><dt><span class="term">
<code class="literal">upsert</code>
</span></dt><dd>
known as <span class="emphasis"><em>merge</em></span> or insert if the data does not exist, updates if the data exists (based on its id).
</dd></dl></div></dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.1. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.output.json</code> (default false)
</span></dt><dd>
Whether the output from the connector should be in JSON format or not (the default). When enabled, the documents are returned in raw JSON format (as returned
from Elasticsearch). Please see the appropriate section of each integration for more details about using JSON directly.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 5.0.0. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.ingest.pipeline</code> (default none)
</span></dt><dd>
The name of an existing Elasticsearch Ingest pipeline that should be targeted when indexing or creating documents. Only usable when doing <code class="literal">index</code> and <code class="literal">create</code> operations; Incompatible with <code class="literal">update</code> or <code class="literal">upsert</code> operations.
</dd></dl></div><h4><a id="cfg-mapping"></a>Mapping (when writing to Elasticsearch)<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.mapping.id</code> (default none)
</span></dt><dd>
The document field/property name containing the document id.
</dd><dt><span class="term">
<code class="literal">es.mapping.parent</code> (default none)
</span></dt><dd>
The document field/property name containing the document parent. To specify a constant, use the <code class="literal">&lt;CONSTANT&gt;</code> format.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 5.6.0. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.mapping.join</code> (default none)
</span></dt><dd>
The document field/property name containing the document’s join field. Constants are not accepted. Join fields on a
document must contain either the parent relation name as a string, or an object that contains the child relation name
and the id of its parent. If a child document is identified when using this setting, the document’s routing is
automatically set to the parent id if no other routing is configured in <code class="literal">es.mapping.routing</code>.
</dd><dt><span class="term">
<code class="literal">es.mapping.routing</code> (default depends on <code class="literal">es.mapping.join</code>)
</span></dt><dd>
The document field/property name containing the document routing. To specify a constant, use the <code class="literal">&lt;CONSTANT&gt;</code> format.
If a join field is specified with <code class="literal">es.mapping.join</code>, then this defaults to the value of the join field’s parent id. If
a join field is not specified, then this defaults to none.
</dd><dt><span class="term">
<code class="literal">es.mapping.version</code> (default none)
</span></dt><dd>
The document field/property name containing the document version. To specify a constant, use the <code class="literal">&lt;CONSTANT&gt;</code> format.
</dd><dt><span class="term">
<code class="literal">es.mapping.version.type</code> (default depends on <code class="literal">es.mapping.version</code>)
</span></dt><dd>
Indicates the <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.0/docs-index_.html#_version_types" target="_top">type of versioning</a> used.
If <code class="literal">es.mapping.version</code> is undefined (default), its value is unspecified. If <code class="literal">es.mapping.version</code> is specified, its value becomes <code class="literal">external</code>.
</dd></dl></div><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>Deprecated in 6.0.0. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.mapping.ttl</code> (default none)
</span></dt><dd>
The document field/property name containing the document time-to-live. To specify a constant, use the <code class="literal">&lt;CONSTANT&gt;</code> format.
Will not work on Elasticsearch 6.0+ index versions, but support will continue for 5.x index versions and below.
</dd></dl></div><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>Deprecated in 6.0.0. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.mapping.timestamp</code> (default none)
</span></dt><dd>
The document field/property name containing the document timestamp. To specify a constant, use the <code class="literal">&lt;CONSTANT&gt;</code> format.
Will not work on Elasticsearch 6.0+ index versions, but support will continue for 5.x index versions and below.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.1. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.mapping.include</code> (default none)
</span></dt><dd>
Field/property to be included in the document sent to Elasticsearch. Useful for <span class="emphasis"><em>extracting</em></span> the needed data from entities. The syntax is similar
to that of Elasticsearch <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.0/search-request-source-filtering.html" target="_top">include/exclude</a>.
Multiple values can be specified by using a comma. By default, no value is specified meaning all properties/fields are included.
</dd></dl></div><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>The <code class="literal">es.mapping.include</code> feature is ignored when <code class="literal">es.input.json</code> is specified. In order to prevent the connector from indexing
data that is implicitly excluded, any jobs with these property conflicts will refuse to execute!</p></div></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.1. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.mapping.exclude</code> (default none)
</span></dt><dd>
Field/property to be excluded in the document sent to Elasticsearch. Useful for <span class="emphasis"><em>eliminating</em></span> unneeded data from entities. The syntax is similar
to that of Elasticsearch <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.0/search-request-source-filtering.html" target="_top">include/exclude</a>.
Multiple values can be specified by using a comma. By default, no value is specified meaning no properties/fields are excluded.
</dd></dl></div><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>The <code class="literal">es.mapping.exclude</code> feature is ignored when <code class="literal">es.input.json</code> is specified. In order to prevent the connector from indexing
data that is explicitly excluded, any jobs with these property conflicts will refuse to execute!</p></div></div><p>For example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ini"># extracting the id from the field called 'uuid'
es.mapping.id = uuid

# specifying a parent with id '123'
es.mapping.parent = &lt;123&gt;

# combine include / exclude for complete control
# include
es.mapping.include = u*, foo.*
# exclude
es.mapping.exclude = *.description</pre></div><p>Using the configuration above, each entry will have only its top-level fields, starting with <code class="literal">u</code> and nested fields under <code class="literal">foo</code> included
in the document with the exception of any nested field named <code class="literal">description</code>. Additionally the document parent will be <code class="literal">123</code> while the
document id extracted from field <code class="literal">uuid</code>.</p><h4><a id="cfg-field-info"></a>Field information (when reading from Elasticsearch)<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.1. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.mapping.date.rich</code> (default true)
</span></dt><dd>
Whether to create a <span class="emphasis"><em>rich</em></span> <code class="literal">Date</code> like object for <code class="literal">Date</code> fields in Elasticsearch or returned them as primitives (<code class="literal">String</code> or <code class="literal">long</code>). By default this is
true. The actual object type is based on the library used; noteable exception being Map/Reduce which provides no built-in <code class="literal">Date</code> object and as such
<code class="literal">LongWritable</code> and <code class="literal">Text</code> are returned regardless of this setting.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.2. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.read.field.include</code> (default empty)
</span></dt><dd>
Fields/properties that are parsed and considered when reading the documents from Elasticsearch. By default empty meaning all fields are considered. Use this property with <span class="emphasis"><em>caution</em></span>
as it can have nasty side-effects. Typically used in cases where some documents returned do not fit into an expected mapping.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.2. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.read.field.exclude</code> (default empty)
</span></dt><dd>
Fields/properties that are discarded when reading the documents from Elasticsearch. By default empty meaning no fields are excluded. Use this property with <span class="emphasis"><em>caution</em></span>
as it can have nasty side-effects. Typically used in cases where some documents returned do not fit into an expected mapping.
</dd></dl></div><p>For example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ini"># To exclude field company.income
es.read.field.exclude = company.income</pre></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.2. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.read.field.as.array.include</code> (default empty)
</span></dt><dd>
Fields/properties that should be considered as arrays/lists. Since Elasticsearch can map one or multiple values to a field, elasticsearch-hadoop cannot determine from the mapping
whether to instantiate one value or a array type (depending on the library type). When encountering multiple values, elasticsearch-hadoop will automatically use
the array/list type but in strict mapping scenarios (like Spark SQL) this might lead to an unexpected schema change.
The syntax is similar to that of Elasticsearch <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.0/search-request-source-filtering.html" target="_top">include/exclude</a>.
Multiple values can be specified by using a comma. By default, no value is specified meaning no properties/fields are included.
</dd></dl></div><p>For example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ini"># mapping nested.bar as an array
es.read.field.as.array.include = nested.bar

# mapping nested.bar as a 3-level/dimensional array
es.read.field.as.array.include = nested.bar:3</pre></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.read.field.as.array.exclude</code> (default empty)
</span></dt><dd>
Fields/properties that should be considered as arrays/lists. Similar to <code class="literal">es.read.field.as.array.include</code> above. Multiple values can be specified by using a comma.
By default, no value is specified meaning no properties/fields are excluded (and since none is included as indicated above), no field is treated as array
before-hand.
</dd></dl></div><h4><a id="_metadata_when_reading_from_elasticsearch"></a>Metadata (when reading from Elasticsearch)<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.read.metadata</code> (default false)
</span></dt><dd>
Whether to include the document metadata (such as id and version) in the results or not (default).
</dd><dt><span class="term">
<code class="literal">es.read.metadata.field</code> (default _metadata)
</span></dt><dd>
The field under which the metadata information is placed. When <code class="literal">es.read.metadata</code> is set to true, the information is returned as a <code class="literal">Map</code> under the specified field.
</dd><dt><span class="term">
<code class="literal">es.read.metadata.version</code> (default false)
</span></dt><dd>
Whether to include the document version in the returned metadata. Applicable only if <code class="literal">es.read.metadata</code> is enabled.
</dd></dl></div><h4><a id="cfg-update"></a>Update settings (when writing to Elasticsearch)<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>One using the <code class="literal">update</code> or <code class="literal">upsert</code> operation, additional settings (that mirror the <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.0/docs-update.html" target="_top">update</a> API) are available:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.update.script.inline</code> (default none)
</span></dt><dd>
Inline Script used for updating the document.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 6.0. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.update.script.file</code> (default none)
</span></dt><dd>
Name of file script to use for updating document. File scripts are removed in 6.x, and as such, this property will throw
an error if used against a 6.x and above cluster.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 6.0. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.update.script.stored</code> (default none)
</span></dt><dd>
Identifier of a stored script to use for updating the document.
</dd><dt><span class="term">
<code class="literal">es.update.script.lang</code> (default none)
</span></dt><dd>
Script language. By default, no value is specified applying the node configuration.
</dd><dt><span class="term">
<code class="literal">es.update.script.params</code> (default none)
</span></dt><dd>
Script parameters (if any). The document (currently read) field/property who’s value is used. To specify a constant, use the <code class="literal">&lt;CONSTANT&gt;</code> format.
Multiple values can be specified through commas (<code class="literal">,</code>)
</dd></dl></div><p>For example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ini"># specifying 2 parameters, one extracting the value from field 'number', the other containing the value '123':
es.update.script.params = param1:number,param2:&lt;123&gt;</pre></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.update.script.params.json</code>
</span></dt><dd>
Script parameters specified in <code class="literal">raw</code>, JSON format. The specified value is passed as is, without any further processing or filtering. Typically used for migrating existing update scripts.
</dd></dl></div><p>For example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ini">es.update.script.params.json = {"param1":1, "param2":2}</pre></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.update.retry.on.conflict</code> (default 0)
</span></dt><dd>
How many times an update to a document is retried in case of conflict. Useful in concurrent environments.
</dd></dl></div><h3><a id="_advanced_settings"></a>Advanced settings<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><h4><a id="configuration-options-index"></a>Index<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.index.auto.create</code> (default yes)
</span></dt><dd>
Whether elasticsearch-hadoop should create an index (if its missing) when writing data to Elasticsearch or fail.
</dd><dt><span class="term">
<code class="literal">es.index.read.missing.as.empty</code> (default no)
</span></dt><dd>
Whether elasticsearch-hadoop will allow reading of non existing indices (and return an empty data set) or not (and throw an exception)
</dd><dt><span class="term">
<code class="literal">es.field.read.empty.as.null</code> (default yes)
</span></dt><dd>
Whether elasticsearch-hadoop will treat empty fields as <code class="literal">null</code>. This settings is typically not needed (as elasticsearch-hadoop already handles the
null case) but is enabled for making it easier to work with text fields that haven’t been sanitized yet.
</dd><dt><span class="term">
<code class="literal">es.field.read.validate.presence</code> (default warn)
</span></dt><dd><p class="simpara">
To help out spot possible mistakes when querying data from Hadoop (which results in incorrect data being returned), elasticsearch-hadoop can perform validation spotting missing fields and potential typos. Possible values are :
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">ignore</code>
</span></dt><dd>
no validation is performed
</dd><dt><span class="term">
<code class="literal">warn</code>
</span></dt><dd>
a warning message is logged in case the validation fails
</dd><dt><span class="term">
<code class="literal">strict</code>
</span></dt><dd>
an exception is thrown, halting the job, if a field is missing
</dd></dl></div></dd></dl></div><p>The default (<code class="literal">warn</code>) will log any typos to the console when the job starts:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-bash">WARN main mr.EsInputFormat - Field(s) [naem, adress] not found
   in the Elasticsearch mapping specified; did you mean [name, location.address]?</pre></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 6.6. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.read.shard.preference</code> (default none)
</span></dt><dd>
The value to use for the shard preference of a search operation when executing a scroll query. If left empty, the
connector will automatically sense when to use the <code class="literal">_local</code> shard preference. This is most useful in hot/cold
architectures when you need direct control over which nodes search operations are executed on:
</dd></dl></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-bash">es.read.shard.preference = _only_nodes:abc*</pre></div><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>Elasticsearch for Apache Hadoop makes no attempt to validate this preference setting before running, and incorrectly configured shard
preferences may cause scroll queries to fail in the event that shards cannot be located with the provided preferences.</p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.read.source.filter</code> (default none)
</span></dt><dd>
Normally when using an integration that allows specifying some form of schema
(such as Hive, or Cascading), the connector will automatically extract the field
names from the schema and request only those fields from Elasticsearch to save on bandwidth.
When using an integration that <span class="emphasis"><em>does not</em></span> leverage any data schemas (such as normal
MR and Spark), this property allows you to specify a comma delimited string of field
names that you would like to return from Elasticsearch.
</dd></dl></div><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>If <code class="literal">es.read.source.filter</code> is set, an exception will be thrown in the
case that the connector tries to push down a different source field filtering.
In these cases you should clear this property and trust that the connector knows
which fields should be returned. This occurs in SparkSQL, Hive, and when
specifying a schema in Cascading and Pig.</p></div></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-bash">User specified source filters were found [name,timestamp], but the connector is executing in a state where it has provided its own source filtering [name,timestamp,location.address]. Please clear the user specified source fields under the [es.read.source.filter] property to continue. Bailing out...</pre></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 5.4. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.index.read.allow.red.status</code> (default false)
</span></dt><dd>
When executing a job that is reading from Elasticsearch, if the resource provided for reads
includes an index that has missing shards that are causing the cluster to have a status of
<code class="literal">red</code>, then ES-Hadoop will inform you of this status and fail fast. In situations where the
job must continue using the remaining available data that is still reachable, users can
enable this property to instruct the connector to ignore shards it could not reach.
</dd></dl></div><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>Using <code class="literal">es.index.read.allow.red.status</code> can lead to jobs running over incomplete
datasets. Jobs executed against a red cluster will yield inconsistent results when
compared to jobs executed against a fully green or yellow cluster. Use this setting with
caution.</p></div></div><h4><a id="_input"></a>Input<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 5.0.0. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.input.max.docs.per.partition</code> (default 100000)
</span></dt><dd>
When reading from an Elasticsearch cluster that supports scroll slicing (Elasticsearch v5.0.0 and above), this parameter advises the
connector on what the maximum number of documents per input partition should be. The connector will sample and estimate
the number of documents on each shard to be read and divides each shard into input slices using the value supplied by
this property. This property is a suggestion, not a guarantee. The final number of documents per partition is not
guaranteed to be below this number, but rather, they will be close to this number. This property is automatically
ignored if you are reading from an Elasticsearch cluster that does not support scroll slicing (Elasticsearch any version below v5.0.0).
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 6.2.3. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.input.use.sliced.partitions</code> (default true)
</span></dt><dd>
By default, when this parameter is true, sliced partitions are used (standard behavior for Elasticsearch v5.0.0 and above). This
can cause a significant slowdown in the pre-reading phase of the index. In some cases, the preparation time can be
significantly longer than the time it takes to retrieve the data. This option allows you to disable this behavior and
use shard partitions (as for Elasticsearch before 5.0.0). <span class="deprecated">
      [<span class="version">6.5.0</span>]
      <span class="detail">Deprecated in 6.5.0. 
</span></span> This setting is removed in 7.0.0, as the default
value for <code class="literal">es.input.max.docs.per.partition</code> has been removed, and sliced scrolls will be disabled by default unless a
user explicitly enables it by specifying a number of maximum docs per partition to be used.
</dd></dl></div><h4><a id="_network"></a>Network<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.nodes.discovery</code> (default true)
</span></dt><dd>
Whether to discover the nodes within the Elasticsearch cluster or only to use the ones given in <code class="literal">es.nodes</code> for metadata queries. Note that this setting only applies during start-up; afterwards when reading and writing, elasticsearch-hadoop uses the target index shards (and their hosting nodes) unless <code class="literal">es.nodes.client.only</code> is enabled.
</dd><dt><span class="term">
<code class="literal">es.nodes.client.only</code> (default false)
</span></dt><dd>
Whether to use Elasticsearch <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.0/modules-node.html" target="_top">client nodes</a> (or <span class="emphasis"><em>load-balancers</em></span>). When enabled, elasticsearch-hadoop will route <span class="emphasis"><em>all</em></span> its requests (after nodes discovery, if enabled) through the <span class="emphasis"><em>client</em></span> nodes within the cluster. Note this typically significantly reduces the node parallelism and thus it is disabled by default. Enabling it also
disables <code class="literal">es.nodes.data.only</code> (since a client node is a non-data node).
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.1.2. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.nodes.data.only</code> (default true)
</span></dt><dd>
Whether to use Elasticsearch <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.0/modules-node.html" target="_top">data nodes</a> only. When enabled, elasticsearch-hadoop will route <span class="emphasis"><em>all</em></span> its requests (after nodes discovery, if enabled) through the <span class="emphasis"><em>data</em></span> nodes within the cluster. The purpose of this configuration setting is to avoid overwhelming non-data nodes as these tend to be "smaller" nodes. This is enabled by default.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 5.0.0. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.nodes.ingest.only</code> (default false)
</span></dt><dd>
Whether to use Elasticsearch <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.0/modules-node.html" target="_top">ingest nodes</a> only. When enabled, elasticsearch-hadoop will route <span class="emphasis"><em>all</em></span> of its requests (after nodes discovery, if enabled) through the <span class="emphasis"><em>ingest</em></span> nodes within the cluster. The purpose of this configuration setting is to avoid incurring the cost of forwarding data meant for a pipeline from non-ingest nodes; Really only useful when writing data to an Ingest Pipeline (see <code class="literal">es.ingest.pipeline</code> above).
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.2. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.nodes.wan.only</code> (default false)
</span></dt><dd>
Whether the connector is used against an Elasticsearch instance in a cloud/restricted environment over the WAN, such as Amazon Web Services. In this mode, the connector disables discovery and <span class="emphasis"><em>only</em></span> connects through the declared <code class="literal">es.nodes</code> during all operations, including reads and writes.
Note that in this mode, performance is <span class="emphasis"><em>highly</em></span>  affected.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.2. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.nodes.resolve.hostname</code> (default depends)
</span></dt><dd>
Whether the connector should resolve the nodes hostnames to IP addresses or not. By default it is <code class="literal">true</code> unless <code class="literal">wan</code> mode is enabled (see above) in which case it will default to false.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.2. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.http.timeout</code> (default 1m)
</span></dt><dd>
Timeout for HTTP/REST connections to Elasticsearch.
</dd><dt><span class="term">
<code class="literal">es.http.retries</code> (default 3)
</span></dt><dd>
Number of retries for establishing a (broken) http connection. The retries are applied for each <span class="emphasis"><em>conversation</em></span> with an Elasticsearch node. Once the retries are depleted, the connection will automatically be re-reouted to the next
available Elasticsearch node (based on the declaration of <code class="literal">es.nodes</code>, followed by the discovered nodes - if enabled).
</dd><dt><span class="term">
<code class="literal">es.scroll.keepalive</code> (default 10m)
</span></dt><dd>
The maximum duration of result scrolls between query requests.
</dd><dt><span class="term">
<code class="literal">es.scroll.size</code> (default 50)
</span></dt><dd>
Number of results/items returned by each individual per request.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.2. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.scroll.limit</code> (default -1)
</span></dt><dd>
Number of <span class="emphasis"><em>total</em></span> results/items returned by each individual scroll. A negative value indicates that all documents that match should be returned. Do note that this applies per scroll which is typically bound to one of the job tasks.
Thus the total number of documents returned is <code class="literal">LIMIT * NUMBER_OF_SCROLLS (OR TASKS)</code>
</dd><dt><span class="term">
<code class="literal">es.action.heart.beat.lead</code> (default 15s)
</span></dt><dd>
The lead to task timeout before elasticsearch-hadoop informs Hadoop the task is still running to prevent task restart.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 5.3.0. </p></div></div><h4><a id="_setting_http_request_headers"></a>Setting HTTP Request Headers<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.net.http.header.[HEADER-NAME]</code> 
</span></dt><dd>
By using the <code class="literal">es.net.http.header.</code> prefix, you can provide HTTP Headers to all
requests made to Elasticsearch from elasticsearch-hadoop. Please note that some standard HTTP Headers are
reserved by the connector to ensure correct operation and cannot be set or overridden
by the user (<code class="literal">Accept</code> and <code class="literal">Content-Type</code> for instance).
</dd></dl></div><p>For example, here the user is setting the <code class="literal">Max-Forwards</code> HTTP header:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ini">es.net.http.header.Max-Forwards = 10</pre></div><h4><a id="_secure_settings"></a>Secure Settings<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 6.4. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.keystore.location</code>
</span></dt><dd>
location of the secure settings keystore file (typically a URL, without a prefix it is interpreted as a classpath entry). See <a class="xref" href="security.html#keystore" title="Secure Settingsedit">Secure Settings<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></a> for more info.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.1. </p></div></div><h4><a id="_basic_authentication"></a>Basic Authentication<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.net.http.auth.user</code>
</span></dt><dd>
Basic Authentication user name
</dd><dt><span class="term">
<code class="literal">es.net.http.auth.pass</code>
</span></dt><dd>
<a class="link" href="security.html#keystore" title="Secure Settingsedit">Securable</a>. Basic Authentication password
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.1. </p></div></div><h4><a id="_ssl"></a>SSL<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.net.ssl</code> (default false)
</span></dt><dd>
Enable SSL
</dd><dt><span class="term">
<code class="literal">es.net.ssl.keystore.location</code>
</span></dt><dd>
key store (if used) location (typically a URL, without a prefix it is interpreted as a classpath entry)
</dd><dt><span class="term">
<code class="literal">es.net.ssl.keystore.pass</code>
</span></dt><dd>
<a class="link" href="security.html#keystore" title="Secure Settingsedit">Securable</a>. key store password
</dd><dt><span class="term">
<code class="literal">es.net.ssl.keystore.type</code> (default JKS)
</span></dt><dd>
key store type. PK12 is a common, alternative format
</dd><dt><span class="term">
<code class="literal">es.net.ssl.truststore.location</code>
</span></dt><dd>
trust store location (typically a URL, without a prefix it is interpreted as a classpath entry)
</dd><dt><span class="term">
<code class="literal">es.net.ssl.truststore.pass</code>
</span></dt><dd>
<a class="link" href="security.html#keystore" title="Secure Settingsedit">Securable</a>. trust store password
</dd><dt><span class="term">
<code class="literal">es.net.ssl.cert.allow.self.signed</code> (default false)
</span></dt><dd>
Whether or not to allow self signed certificates
</dd><dt><span class="term">
<code class="literal">es.net.ssl.protocol</code>(default TLS)
</span></dt><dd>
SSL protocol to be used
</dd></dl></div><h4><a id="_proxy"></a>Proxy<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.net.proxy.http.host</code>
</span></dt><dd>
Http proxy host name
</dd><dt><span class="term">
<code class="literal">es.net.proxy.http.port</code>
</span></dt><dd>
Http proxy port
</dd><dt><span class="term">
<code class="literal">es.net.proxy.http.user</code>
</span></dt><dd>
Http proxy user name
</dd><dt><span class="term">
<code class="literal">es.net.proxy.http.pass</code>
</span></dt><dd>
<a class="link" href="security.html#keystore" title="Secure Settingsedit">Securable</a>. Http proxy password
</dd><dt><span class="term">
<code class="literal">es.net.proxy.http.use.system.props</code>(default yes)
</span></dt><dd>
Whether the use the system Http proxy properties (namely <code class="literal">http.proxyHost</code> and <code class="literal">http.proxyPort</code>) or not
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Added in 2.2. </p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.net.proxy.https.host</code>
</span></dt><dd>
Https proxy host name
<span class="added">
      [<span class="version">2.2</span>]
      <span class="detail">Added in 2.2. 
</span></span>
</dd><dt><span class="term">
<code class="literal">es.net.proxy.https.port</code>
</span></dt><dd>
Https proxy port
<span class="added">
      [<span class="version">2.2</span>]
      <span class="detail">Added in 2.2. 
</span></span>
</dd><dt><span class="term">
<code class="literal">es.net.proxy.https.user</code>
</span></dt><dd>
Https proxy user name
<span class="added">
      [<span class="version">2.2</span>]
      <span class="detail">Added in 2.2. 
</span></span>
</dd><dt><span class="term">
<code class="literal">es.net.proxy.https.pass</code>
</span></dt><dd>
<a class="link" href="security.html#keystore" title="Secure Settingsedit">Securable</a>. Https proxy password
<span class="added">
      [<span class="version">2.2</span>]
      <span class="detail">Added in 2.2. 
</span></span>
</dd><dt><span class="term">
<code class="literal">es.net.proxy.https.use.system.props</code>(default yes)
</span></dt><dd>
Whether the use the system Https proxy properties (namely <code class="literal">https.proxyHost</code> and <code class="literal">https.proxyPort</code>) or not
</dd><dt><span class="term">
<code class="literal">es.net.proxy.socks.host</code>
</span></dt><dd>
Http proxy host name
</dd><dt><span class="term">
<code class="literal">es.net.proxy.socks.port</code>
</span></dt><dd>
Http proxy port
</dd><dt><span class="term">
<code class="literal">es.net.proxy.socks.user</code>
</span></dt><dd>
Http proxy user name
</dd><dt><span class="term">
<code class="literal">es.net.proxy.socks.pass</code>
</span></dt><dd>
<a class="link" href="security.html#keystore" title="Secure Settingsedit">Securable</a>. Http proxy password
</dd><dt><span class="term">
<code class="literal">es.net.proxy.socks.use.system.props</code>(default yes)
</span></dt><dd>
Whether the use the system Socks proxy properties (namely <code class="literal">socksProxyHost</code> and <code class="literal">socksProxyHost</code>) or not
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>elasticsearch-hadoop allows proxy settings to be applied only to its connection using the setting above. Take extra care when there is already a JVM-wide proxy setting (typically through system properties) to avoid unexpected behavior.
IMPORTANT: The semantics of these properties are described in the JVM <a class="ulink" href="http://docs.oracle.com/javase/8/docs/api/java/net/doc-files/net-properties.html#Proxies" target="_top">docs</a>. In some cases, setting up the JVM property <code class="literal">java.net.useSystemProxies</code>
to <code class="literal">true</code> works better then setting these properties manually.</p></div></div><h4><a id="configuration-serialization"></a>Serialization<a href="https://github.com/elastic/elasticsearch-hadoop/edit/6.6/docs/src/reference/asciidoc/core/configuration.adoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">es.batch.size.bytes</code> (default 1mb)
</span></dt><dd>
Size (in bytes) for batch writes using Elasticsearch <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.0/docs-bulk.html" target="_top">bulk</a> API. Note the bulk size is allocated <span class="emphasis"><em>per task</em></span> instance. Always multiply by the number of tasks within a Hadoop job to get the total bulk size at runtime hitting Elasticsearch.
</dd><dt><span class="term">
<code class="literal">es.batch.size.entries</code> (default 1000)
</span></dt><dd>
Size (in entries) for batch writes using Elasticsearch <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.0/docs-bulk.html" target="_top">bulk</a> API - (0 disables it). Companion to <code class="literal">es.batch.size.bytes</code>, once one matches, the batch update is executed. Similar to the size, this setting is <span class="emphasis"><em>per task</em></span> instance; it gets multiplied at runtime by the total number of Hadoop tasks running.
</dd><dt><span class="term">
<code class="literal">es.batch.write.refresh</code> (default true)
</span></dt><dd>
Whether to invoke an <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.0/indices-refresh.html" target="_top">index refresh</a> or not after a bulk update has been completed. Note this is called only after the entire write (meaning multiple bulk updates) have been executed.
</dd><dt><span class="term">
<code class="literal">es.batch.write.retry.count</code> (default 3)
</span></dt><dd>
Number of retries for a given batch in case Elasticsearch is overloaded and data is rejected. Note that only the rejected data is retried. If there is still data rejected after the retries have been performed, the Hadoop job is cancelled (and fails). A negative value indicates infinite retries; be careful in setting this value as it can have unwanted side effects.
</dd><dt><span class="term">
<code class="literal">es.batch.write.retry.wait</code> (default 10s)
</span></dt><dd>
Time to wait between batch write retries that are caused by bulk rejections.
</dd><dt><span class="term">
<code class="literal">es.ser.reader.value.class</code> (default <span class="emphasis"><em>depends on the library used</em></span>)
</span></dt><dd>
Name of the <code class="literal">ValueReader</code> implementation for converting JSON to objects. This is set by the framework depending on the library (Map/Reduce, Cascading, Hive, Pig, etc…) used.
</dd><dt><span class="term">
<code class="literal">es.ser.writer.value.class</code> (default <span class="emphasis"><em>depends on the library used</em></span>)
</span></dt><dd>
Name of the <code class="literal">ValueWriter</code> implementation for converting objects to JSON. This is set by the framework depending on the library (Map/Reduce, Cascading, Hive, Pig, etc…) used.
</dd></dl></div></div><div class="navfooter"><span class="prev"><a href="arch.html">
              « 
              Architecture</a>
           
        </span><span class="next">
           
          <a href="configuration-runtime.html">Runtime options
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
					<div id="rtpcontainer" style="display: block;">
						<div class="mktg-promo">
						<h3>Getting Started Videos</h3>
						<ul class="icons">
							<li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
							<li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
							<li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
						</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

        </div>
      	


<div id="footer-subscribe" class="home-footer-subscribe">
  <div class="subscribe-wrapper">
    <div class="container">
      <div class="subscribe-form-container">
        <div class="subscribe-title col-md-12 col-lg-6">
            <h5>Be in the know with the latest and greatest from Elastic.</h5>
        </div>
        <div class="subscribe-form col-md-12 col-lg-6">
          <form class="mktoForm sb-form"></form>
        </div>
      </div>
      <div class="form_thanks hide">
        
          <p>Thanks for subscribing! We'll keep you updated with new releases.</p>
        
      </div>
    </div>
  </div>
</div>
<!--subscribe newsletter end-->

<!-- Footer Section -->
<footer class="footer-wrapper">
  <div class="container">
    <div class="row footer-content">
        
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3><a href="/products">Products ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/products/elasticsearch">Elasticsearch</a></li>
                  
                
              
                
                  
                    <li><a href="/products/kibana">Kibana</a></li>
                  
                
              
                
                  
                    <li><a href="/products/beats">Beats</a></li>
                  
                
              
                
                  
                    <li><a href="/products/logstash">Logstash</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack">Stack Features (formerly X-Pack)</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/security">Security</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/alerting">Alerting</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/canvas">Canvas</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/monitoring">Monitoring</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/graph">Graph</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/reporting">Reporting</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/machine-learning">Machine Learning</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/elasticsearch-sql">Elasticsearch SQL</a></li>
                  
                
              
                
                  
                    <li><a href="/products/hadoop">Elasticsearch-Hadoop</a></li>
                  
                
              
                
                  
                    <li><a href="/products/ece">Elastic Cloud Enterprise</a></li>
                  
                
              
              </ul>
              
                <h3><a href=""></a></h3>
              
              
              
              <ul class="">
              
              </ul>
          </div>    
      
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3><a href="/solutions">Solutions ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/solutions/logging">Logging</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/metrics">Metrics</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/site-search">Site Search</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/security-analytics">Security Analytics</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/apm">APM</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/app-search">App Search</a></li>
                  
                
              
              </ul>
              
                <h3><a href="/cloud">Elastic Cloud ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/cloud/elasticsearch-service">Elasticsearch Service</a></li>
                  
                
              
                
                  
                    <li><a href="/aws-elasticsearch-service">AWS Elasticsearch Service Comparison</a></li>
                  
                
              
                
                  
                    <li><a href="/cloud/app-search-service">Elastic App Search Service</a></li>
                  
                
              
                
                  
                    <li><a href="/cloud/site-search-service">Elastic Site Search Service</a></li>
                  
                
              
              </ul>
          </div>    
      
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3>Resources</h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/blog">Blog</a></li>
                  
                
              
                
                  
                    <li><a href="https://cloud-status.elastic.co">Cloud Status</a></li>
                  
                
              
                
                  
                    <li><a href="/community">Community</a></li>
                  
                
              
                
                  
                    <li><a href="/use-cases">Customers & Use Cases</a></li>
                  
                
              
                
                  
                    <li><a href="/guide">Documentation</a></li>
                  
                
              
                
                  
                    <li><a href="/elasticon">Elastic{ON} Events</a></li>
                  
                
              
                
                  
                    <li><a href="https://discuss.elastic.co/">Forums</a></li>
                  
                
              
                
                  
                    <li><a href="/community/meetups">Meetups</a></li>
                  
                
              
                
                  
                    <li><a href="/subscriptions">Subscriptions</a></li>
                  
                
              
                
                  
                    <li><a href="https://support.elastic.co">Support Portal</a></li>
                  
                
              
                
                  
                    <li><a href="/videos">Videos & Webinars</a></li>
                  
                
              
                
                  
                    <li><a href="/training">Training</a></li>
                  
                
              
              </ul>
              
                <h3></h3>
              
              
              
              <ul class="">
              
              </ul>
          </div>    
      
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3><a href="/about">About ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/about/careers">Careers/Jobs</a></li>
                  
                
              
                
                  
                    <li><a href="/about/our-source-code">Our Source Code</a></li>
                  
                
              
                
                  
                    <li><a href="/about/teams">Teams</a></li>
                  
                
              
                
                  
                    <li><a href="/about/teams/board">Board of Directors</a></li>
                  
                
              
                
                  
                    <li><a href="/about/teams/leadership">Leadership</a></li>
                  
                
              
                
                  
                    <li><a href="/contact">Contact</a></li>
                  
                
              
                
                  
                    <li><a href="/about/history-of-elasticsearch">Our Story</a></li>
                  
                
              
                
                  
                    <li><a href="/about/why-open-source">Why Open Source</a></li>
                  
                
              
                
                  
                    <li><a href="/about/distributed">Distributed by Intention</a></li>
                  
                
              
                
                  
                    <li><a href="/about/partners">Partners</a></li>
                  
                
              
                
                  
                    <li><a href="/about/press">Media</a></li>
                  
                
              
                
                  
                    <li><a href="https://ir.elastic.co">Investor Relations</a></li>
                  
                
              
                
                  
                    <li><a href="https://www.elastic.shop">Elastic Store</a></li>
                  
                
              
              </ul>
              
                <h3><a href=""></a></h3>
              
              
              
              <ul class="">
              
              </ul>
          </div>    
       
    </div>
     <!-- Social Media Section -->
    <div class="row social-icon">
      <div class="col-xs-12 col-sm-12 col-md-6 col-md-offset-3">
	    <div class="row">
		     <div class="follow-us col-xs-12 col-sm-12 col-md-12">
			    <div class="social-label">FOLLOW US</div>
			    <ul class="social-icon-list">
          
          		 	<li class="Facebook"><a id="footer_facebook" href="https://www.facebook.com/elastic.co">Facebook</a></li>
          
          		 	<li class="Twitter"><a id="footer_twitter" href="https://www.twitter.com/elastic">Twitter</a></li>
          
          		 	<li class="LinkedIn"><a id="footer_linkedin" href="https://www.linkedin.com/company/elastic-co">LinkedIn</a></li>
          
          		 	<li class="Xing"><a id="footer_xing" href="https://www.xing.com/companies/elastic.co">Xing</a></li>
          
          		 	<li class="YouTube"><a id="footer_youtube" href="https://www.youtube.com/user/elasticsearch">YouTube</a></li>
          
		  		</ul>
		     </div>
	    </div>
      </div>
    </div>
    <!-- Social Media Section end-->
    <div class="row">
	<div class="col-xs-12 col-sm-12 col-md-11">
		<div class="copyright">
			<ul>
				<li><a href="/legal/trademarks">Trademarks</a></li>
				<li><a href="/legal/terms-of-use">Terms of Use</a></li>
				<li><a href="/legal/privacy-statement">Privacy</a></li>
				<li><a href="/brand">Brand</a></li>
			</ul>
			<div class="copyright-content">
				<div class="footer-text">
					<p>© 2019. Elasticsearch B.V. All Rights Reserved
					</p>
					<p>Elasticsearch is a trademark of Elasticsearch B.V., registered in the U.S. and in other countries.
					</p>
					<p>Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a> in the United States and/or other countries.
					</p>
				</div>
			</div>
		</div>
	</div>
	<div class="col-xs-2 col-xs-offset-5 col-sm-1 col-sm-offset-5 col-md-1 col-md-offset-0">
		<div class="footer-logo"><a href="/"><img src="/static/images/svg/logo-elastic-footer-stacked-999.svg" class="img-responsive"></a>
		</div>
	</div>
</div>
  </div>
</footer>
<!-- Footer Section end-->

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>
 
     
<script type="text/javascript">
$(document).ready(function(){
	if (window.location.hash.length) {
	      var target = $(window.location.hash);
	      target = target.length ? target : $(window.location.hash);
	      if (target.length) {
	        setTimeout(function(){ $(window).scrollTop(target.offset().top - 60); }, 1200);        
	      }
	}
	$('#guide').on('click','a[href*=#]:not([href=#])',function(e) {
			var flag=true;
		      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
		          var target = $(this.hash);
		          target = target.length ? target :$(this.hash);
		          if (target.length) {
		            if(flag){
		              flag=false;
		              var heightScroll=($('.tertiary-nav.navbar-fixed-top').height())?60:110;
		              $('html,body').animate({
		                  scrollTop: target.offset().top - heightScroll
		                }, 2000, function(){
		                  flag=true;
		                });
		            }                    
		          }
		      }
		    
	});

})

</script>

     <style></style>
     
  
            <script type="text/javascript" src="docs.js"></script>
<script type='text/javascript' src='https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=yaml'></script>

            </body>
        
</html>