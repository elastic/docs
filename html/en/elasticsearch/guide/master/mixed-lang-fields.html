
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Mixed-Language Fields</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide" /><link rel="up" href="language-intro.html" title="Getting Started with Languages" /><link rel="prev" href="one-lang-fields.html" title="One Language per Field" /><link rel="next" href="identifying-words.html" title="Identifying Words" />
  
 
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
 	
	<meta name="description" content="" />
	<meta name="keywords" content="" />



	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<link type="text/css" rel="stylesheet" href="/static/css/load.css" />
	<link type="text/css" rel="stylesheet" href="/static/css/skel.css" />		
	
	<script src="/static/js/jquery.min.js"></script>
	<script src="/static/js/loading.js"></script>
	<script src="/static/js/skel.min.js"></script>
	<script src="/static/js/skel-layers.min.js"></script>
	<script src="/static/js/classie.js"></script>	
	<script type="text/javascript">form_name = "common_layout"</script>
	<script src="/static/js/init.js"></script>
	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />	
	<script type="text/javascript" src="/static/js/prettify.js"></script>



<link rel="stylesheet" type="text/css" href="/static/css/style.css" />
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript">
  jQuery(function() {
    jQuery('#guide a[id]').each(function() { this.href='#'+this.id });
    jQuery('pre.prettyprint').each(function() {
      var pre = jQuery(this);
      pre.css('position','absolute');
      pre.css('width','auto');
      var height = pre.innerHeight();
      pre.wrap('<div class="pre_wrapper" style="height:' + height + 'px"></div>');
    })
  });
</script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>

</head>
<body >

	<div class="preloader">
    	<div class="status"></div>
	</div>
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			

<div class="container">
	<div class="row">
		<div class="12u">
			<section>
				<div class="row">
					<div class="8u 6u(small) 5u(xsmall)">
						<div id="elastic">
							<h1><a href="/"></a></h1>
						</div>
						<!-- Searchbar Input box -->
						<form method="get" action="/search" name="searchForm" class="header-search-form">
						   <input type="text" id="search-header" name="q" class="form-control global-input" placeholder="elastic{search}">
						</form>
					</div>
					<div class="4u 6u(small) 7u(xsmall)">
						<!-- Mobile Menu -->
						<div class="mobile-menu-wrapper">
							<ul class="m-shortcuts">
								<li><a id="header-search" class="m-search" href="#"></a></li>
								<li><a class="m-guide" href="/guide"></a></li>
							</ul>											
							<nav class="nav-menu">
								<div class="menu-button">
									<span></span>
								</div>
								<div class="nav-menu-list-wrap">
									<div class="nav-menu-list">
										<h3><a href="/products">Products</a></h3>
										<ul>
											<li><a href="/products/elasticsearch">Elasticsearch</a></li>
											<li><a href="/products/logstash">Logstash</a></li>
											<li><a href="/products/kibana">Kibana</a></li>
											<li><a href="/products/shield">Shield</a></li>
											<li><a href="/products/marvel">Marvel</a></li>
											<li><a href="/products/hadoop">Hadoop</a></li>
											<li><a href="/subscriptions">Support</a></li>
											<li><a href="/downloads">Downloads</a></li>
										</ul>
										<h3><a href="/subscriptions">Subscriptions</a></h3>
										<h3><a href="/learn">Learn</a></h3>
										<ul>
											<li><a href="/guide">Docs</a></li>
											<li><a href="/videos">Videos</a></li>
											<li><a href="http://purchases.elasticsearch.com" target="_blank">Training</a></li>
											<li><a href="/blog">Blog</a></li>
										</ul>
										<h3><a href="/community">Community</a></h3>
										<ul>
											<li><a href="/community/meetups">Meetups</a></li>
										</ul>
										<h3><a href="/use-cases">Use Cases</a></h3>
										<h3><a href="/about">About</a></h3>
										<ul>
											<li><a href="/about/leadership">Leadership</a></li>
											<li><a href="/about/board">Board of Directors</a></li>
											<li><a href="/about/careers">Careers</a></li>
											<li><a href="/about/partners">Partners</a></li>
											<li><a href="/about/press">Press</a></li>
										</ul>
									</div>
								</div>
							</nav>
						</div>
						<!-- Shortcuts -->
						<nav id="shortcuts">
							<ul class="links">
								
									<li class="sc-downloads grayscale"><a href="/downloads" id="header_downloads">downloads</a></li>
								
									<li class="sc-docs grayscale"><a href="/guide" id="header_guide">docs</a></li>
								
									<li class="sc-support grayscale"><a href="/subscriptions" id="header_subscriptions">support</a></li>
								
									<li class="sc-contact grayscale"><a href="/contact" id="header_contact">contact</a></li>
								
							</ul>
						</nav>
					</div>
				</div>
			</section>
			

<section class="desktop-main-nav">
	<div class="row">
		<div class="9u">
			<!-- Nav -->
			<nav id="nav">
				<ul>
					
					<li>
						<a href="/products" id="nav_products" >PRODUCTS</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/subscriptions" id="nav_support" >support</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/subscriptions" id="nav_subscriptions" >SUBSCRIPTIONS</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/learn" id="nav_learn" >LEARN</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="http://purchases.elasticsearch.com" id="nav_training" >training</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/community" id="nav_community" >COMMUNITY</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
								
						</ul>							
					</li>
					
					<li>
						<a href="/use-cases" id="nav_usecases" >USE CASES</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/blog" id="nav_blog" >BLOG</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						<a href="/about" id="nav_about" >ABOUT</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>
		</div>
		<!-- Search -->
		<div class="3u">
			<div id="searchbar">
				<form method="get" action="/search" name="searchForm">
					<input type="text" value="" name="q" placeholder="elastic{search}">
					<button class="button icon" onclick="searchForm.submit()">GO</button>
				</form>
			</div>
		</div>
	</div>
</section>

		</div>
	</div>
</div>

<style>	
	
		.sc-downloads{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-docs{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-support{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
	
		.sc-contact{ background: url("/assets/blt0b75d0822b89593e/shortcuts.png") no-repeat;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1>Learn |</h1>
            <h2>Docs</h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide</a></span> » <span class="breadcrumb-link"><a href="languages.html">Dealing with Human Language </a></span> » <span class="breadcrumb-link"><a href="language-intro.html">Getting Started with Languages</a></span> » <span class="breadcrumb-node">Mixed-Language Fields</span></div><div class="navheader"><span class="prev"><a href="one-lang-fields.html">
              « 
              One Language per Field</a>
           
        </span><span class="next">
           
          <a href="identifying-words.html">Identifying Words
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mixed-lang-fields"></a>Mixed-Language Fields<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/200_Language_intro/60_Mixed_language_fields.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="using-language-analyzers.html">Using Language Analyzers</a></span></dt><dt><span class="section"><a href="configuring-language-analyzers.html">Configuring Language Analyzers</a></span></dt><dt><span class="section"><a href="language-pitfalls.html">Pitfalls of Mixing Languages</a></span></dt><dt><span class="section"><a href="one-lang-docs.html">One Language per Document</a></span></dt><dt><span class="section"><a href="one-lang-fields.html">One Language per Field</a></span></dt><dt><span class="section"><a href="mixed-lang-fields.html">Mixed-Language Fields</a></span></dt></dl></div><p>Usually, documents that mix multiple languages in a single field come from
sources beyond your control, such as<a id="id-1.6.3.13.2.1" class="indexterm"></a>
<a id="id-1.6.3.13.2.2" class="indexterm"></a><a id="id-1.6.3.13.2.3" class="indexterm"></a>
<a id="id-1.6.3.13.2.4" class="indexterm"></a> pages scraped from the Web:</p><pre class="programlisting prettyprint lang-js">{ "body": "Page not found / Seite nicht gefunden / Page non trouvée" }</pre><p>They are the most difficult type of multilingual document to handle correctly.
Although you can simply use the <code class="literal">standard</code> analyzer on all fields, your documents
will be less searchable than if you had used an appropriate stemmer. But of
course, you can’t choose just one stemmer—stemmers are language specific.
Or rather, stemmers are language and script specific.  As discussed in
<a class="xref" href="language-pitfalls.html#different-scripts" title="Stemmer per Script">Stemmer per Script</a>, if every language uses a different script, then
stemmers can be combined.</p><p>Assuming that your mix of languages uses the same script such as Latin, you have three choices available to you:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Split into separate fields
</li><li class="listitem">
Analyze multiple times
</li><li class="listitem">
Use n-grams
</li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_split_into_separate_fields"></a>Split into Separate Fields<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/200_Language_intro/60_Mixed_language_fields.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The Compact Language Detector <a id="id-1.6.3.13.7.2.1" class="indexterm"></a>
<a id="id-1.6.3.13.7.2.2" class="indexterm"></a>
<a id="id-1.6.3.13.7.2.3" class="indexterm"></a><a id="id-1.6.3.13.7.2.4" class="indexterm"></a>mentioned in <a class="xref" href="language-pitfalls.html#identifying-language" title="Identifying Language">Identifying Language</a> can tell
you which parts of the document are in which language.  You can split up the
text based on language and use the same approach as was used in
<a class="xref" href="one-lang-fields.html" title="One Language per Field">One Language per Field</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_analyze_multiple_times"></a>Analyze Multiple Times<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/200_Language_intro/60_Mixed_language_fields.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>If you primarily deal with a limited number of languages, <a id="id-1.6.3.13.8.2.1" class="indexterm"></a>
<a id="id-1.6.3.13.8.2.2" class="indexterm"></a>
<a id="id-1.6.3.13.8.2.3" class="indexterm"></a><a id="id-1.6.3.13.8.2.4" class="indexterm"></a>
<a id="id-1.6.3.13.8.2.5" class="indexterm"></a><a id="id-1.6.3.13.8.2.6" class="indexterm"></a>
<a id="id-1.6.3.13.8.2.7" class="indexterm"></a>you could use
multi-fields to analyze the text once per language:</p><pre class="programlisting prettyprint lang-js">PUT /movies
{
  "mappings": {
    "title": {
      "properties": {
        "title": { <a id="CO133-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
          "type": "string",
          "fields": {
            "de": { <a id="CO133-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
              "type":     "string",
              "analyzer": "german"
            },
            "en": { <a id="CO133-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
              "type":     "string",
              "analyzer": "english"
            },
            "fr": { <a id="CO133-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
              "type":     "string",
              "analyzer": "french"
            },
            "es": { <a id="CO133-5"></a><span><img src="images/icons/callouts/5.png" alt="" /></span>
              "type":     "string",
              "analyzer": "spanish"
            }
          }
        }
      }
    }
  }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO133-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The main <code class="literal">title</code> field uses the <code class="literal">standard</code> analyzer.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO133-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> <a href="#CO133-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> <a href="#CO133-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> <a href="#CO133-5"><span><img src="images/icons/callouts/5.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Each subfield applies a different language analyzer
    to the text in the <code class="literal">title</code> field.
</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_use_n_grams"></a>Use n-grams<a href="https://github.com/elasticsearch/elasticsearch-definitive-guide/edit/master/200_Language_intro/60_Mixed_language_fields.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>You could index all words as n-grams, using the <a id="id-1.6.3.13.9.2.1" class="indexterm"></a>
<a id="id-1.6.3.13.9.2.2" class="indexterm"></a><a id="id-1.6.3.13.9.2.3" class="indexterm"></a>
<a id="id-1.6.3.13.9.2.4" class="indexterm"></a>
<a id="id-1.6.3.13.9.2.5" class="indexterm"></a>same approach as
described in <a class="xref" href="ngrams-compound-words.html" title="Ngrams for Compound Words">Ngrams for Compound Words</a>.  Most inflections involve adding a
suffix (or in some languages, a prefix) to a word, so by breaking each word into n-grams, you have a good chance of matching words that are similar
but not exactly the same. This can be combined with the <span class="emphasis"><em>analyze-multiple
times</em></span> approach to provide a catchall field for unsupported languages:</p><pre class="programlisting prettyprint lang-js">PUT /movies
{
  "settings": {
    "analysis": {...} <a id="CO134-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
  },
  "mappings": {
    "title": {
      "properties": {
        "title": {
          "type": "string",
          "fields": {
            "de": {
              "type":     "string",
              "analyzer": "german"
            },
            "en": {
              "type":     "string",
              "analyzer": "english"
            },
            "fr": {
              "type":     "string",
              "analyzer": "french"
            },
            "es": {
              "type":     "string",
              "analyzer": "spanish"
            },
            "general": { <a id="CO134-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
              "type":     "string",
              "analyzer": "trigrams"
            }
          }
        }
      }
    }
  }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO134-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
In the <code class="literal">analysis</code> section, we define the same <code class="literal">trigrams</code>
    analyzer as described in <a class="xref" href="ngrams-compound-words.html" title="Ngrams for Compound Words">Ngrams for Compound Words</a>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO134-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">title.general</code> field uses the <code class="literal">trigrams</code> analyzer
    to index any language.
</p></td></tr></table></div><p>When querying the catchall <code class="literal">general</code> field, you can use
<code class="literal">minimum_should_match</code> to reduce the number of low-quality matches.  It may
also be necessary to boost the other fields slightly more than the <code class="literal">general</code>
field, so that matches on the the main language fields are given more weight
than those on the <code class="literal">general</code> field:</p><pre class="programlisting prettyprint lang-js">GET /movies/movie/_search
{
    "query": {
        "multi_match": {
            "query":    "club de la lucha",
            "fields": [ "title*^1.5", "title.general" ], <a id="CO135-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
            "type":     "most_fields",
            "minimum_should_match": "75%" <a id="CO135-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
        }
    }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO135-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
All <code class="literal">title</code> or <code class="literal">title.*</code> fields are given a slight boost over the
    <code class="literal">title.general</code> field.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO135-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">minimum_should_match</code> parameter reduces the number of low-quality matches returned, especially important for the <code class="literal">title.general</code> field.
</p></td></tr></table></div></div></div><div class="navfooter"><span class="prev"><a href="one-lang-fields.html">
              « 
              One Language per Field</a>
           
        </span><span class="next">
           
          <a href="identifying-words.html">Identifying Words
               »
            </a></span></div>
<!-- end body -->

            </section>
<script type="text/javascript" >
  (function ($, $a, $title, $list) {
    $a = $('[id^="js-api-method-index"]');
    if (!$a.size()) return;
    $('#guide').addClass('js-client-docs');
    $list = $a.siblings('.itemizedlist').detach();
    $title = $(document.createElement('h2')).text('api methods')
    $a.parent().remove();
    $('.toc').first().append($(document.createElement('div')).addClass('js-api-method-index').append($title).append($list));
  }(jQuery));
</script>

            <!-- Footer -->
        
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2015. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div>
<!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="http://www.linkedin.com/company/elasticsearch" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elasticsearch" target="_blank" id="footer_xing"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.twitter{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.linkedin{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
		.xing{background:url("/assets/blte0d4d10ae3bd8337/social-media.png") no-repeat;}		
	
</style>	

  	</div>
  	<div class="preloader">
    	<div class="status"></div>
	</div>
  	<style></style>
   	<link type="text/css" rel="stylesheet" href="/static/css/flexslider.css" >

<script src="/static/js/jquery.flexslider.min.js"></script>
<script src="/static/js/jquery.dropdown.min.js"></script>
<script src="/static/js/script.js"></script>
   	
</body>