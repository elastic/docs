<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Functional Testing
        | Kibana User Guide [6.6]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Kibana User Guide [6.6]" /><link rel="up" href="core-development.html" title="Core Development" /><link rel="prev" href="development-elasticsearch.html" title="Communicating with Elasticsearch" /><link rel="next" href="plugin-development.html" title="Plugin Development" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Kibana/Reference/6.6" /><meta name="DC.subject" content="Kibana" /><meta name="DC.identifier" content="6.6" />
    

    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
<meta name="apple-mobile-web-app-title" content="Elastic">
<meta name="application-name" content="Elastic">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">
<!-- DC tags section -->
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
<link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >



	



<!-- end DC tags -->


	<meta name="description" content="" />



	<meta name="localized" content="true" />


















		
			<meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
		

		

    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">

	 

    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    
    

    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  <script type="text/javascript">
  // -------------------- set language based on browser language --------------------
  var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

  if($.cookie("is_lang_detected") == undefined){
    if(locales[lang] != undefined && locales[lang] != currentlocale){
      locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
      $.cookie("is_lang_detected",true ,{ path: '/'}); 
      window.location = locale_lang_url;
    } 
  }
        
  // --------------------- end of set language based on browser language -----------------
  </script>

	
	<link type="text/css" rel="stylesheet" href="/static/css/guide.css" />


  
<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
  <body >
  	<!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
                              height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
<script src="/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>


<script type="text/javascript">
  var active;
  
  active = Math.random() < 1 //0.9 
  
  elasticApm.init({
    active: active,
    serviceName: "elastic-co-frontend",
    serverUrl: "https://elastic-co-apm-server.app.elstc.co"
  })

  var pageLoadName
  var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
  var parts = pathname.split('/');

  if (parts.length && parts[1] === 'blog') {
    if (parts.length === 2) {
      pageLoadName =  '/blog';
    }
    else if (parts[2] === 'category') {
      pageLoadName =  '/blog/category';
    }
    else if (parts[2] === 'archive') {
      pageLoadName =  '/blog/archive';
    }
    else {
      pageLoadName =  '/blog/detail';
    }
  }
  else if (parts.length && parts[1] === 'elasticon') {
    if (parts.length === 2) {
      pageLoadName =  '/elasticon';
    }
    else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
      pageLoadName =  '/elasticon/overview';
    }
    else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
      pageLoadName =  '/elasticon/video';
    }
  }
  else if (parts.length && parts[1] === 'guide') {
    pageLoadName =  '/guide';
  }
  else if (parts.length === 2 && parts[1] === 'videos') {
    pageLoadName =  '/videos';
  }
  else if (parts.length > 2 && parts[1] === 'videos') {
    pageLoadName =  '/videos/detail';
  }
  else if (parts.length > 2 && parts[1] === 'webinars') {
    pageLoadName =  '/webinars/detail';
  }
  else {
    pageLoadName =  window.location.pathname;
  }

  console.log('apm pageLoadName:', pageLoadName, parts)
  elasticApm.setTags({env:"production"});
  elasticApm.setInitialPageLoadName(pageLoadName);
</script>

<!-- Elastic APM -->


    <!-- Header Section -->
    
<header class="header-wrapper">
  



  




<div class="navigation-wrapper">
  <div class="container">
    <nav class="navbar">
    <!-- Brand and toggle get grouped for better mobile display -->

    <div class="navbar-mobile-header navbar-header mr-20 mr-xs-0">
      <div class="row hidden-sm hidden-md hidden-lg">
        <div class="col-xs-5 hidden-sm hidden-md hidden-lg">
          <div class="navbar-mobile-header-icon navbar-mobile-header-icon-out">
            <span></span>
            <span></span>
            <span></span>
          </div>
          
        </div>
        <div class="col-xs-2 text-center">
          <div class="navbar-brand" id="elastic">
            <div id="logo">
              <a class="logo-m hidden-sm hidden-md hidden-lg" href="/">
                <img src="/assets/blta09706b1c5cc1e99/elastic-logo-mobile.svg" alt="elastic-logo-mobile">
              </a>
            </div>
          </div>
        </div>
        <div class="col-xs-5 hidden-sm hidden-md hidden-lg text-right">
          <ul class="menu-m hidden-sm hidden-md hidden-lg">
            <li class=""><a class="icon-contact" href="/contact"></a></li>

            <li id="searchbar"><a class="button icon" href="#" alt="Search"></a></li>
            <li class="lang global-language">
                
                  
                
                  
                    <a href="#">EN</a>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              <ul class="language-list">
                
                  
                    
                  
                  
                  <li><a href="/de/" data-value="/de/" id="locale-select">Deutsch</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="#" data-value="/" id="locale-select">English</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/es/" data-value="/es/" id="locale-select">Español</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/fr/" data-value="/fr/" id="locale-select">Français</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/jp/" data-value="/jp/" id="locale-select">日本語</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/kr/" data-value="/kr/" id="locale-select">한국어</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/cn/" data-value="/cn/" id="locale-select">简体中文</a></li>
                  
                
              </ul>
            </li>
          </ul>
        </div>
      </div>

      <div class="navbar-brand hidden-xs" id="elastic">
        <div id="logo">
          <a class="hidden-xs" id="elastic-logo" href="/">
            <img src="/assets/blt244a845f141977c3/elastic-logo.svg" alt="elastic-logo">
          </a>
        </div>
      </div>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse mobile-inner-nav">
      <nav class="nav navbar-nav primary-nav-hover" id="nav">
        <ul>
        
          
            
              
            
            <li>
              <a class=" " href="/products">Products</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/cloud">Cloud</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/services">Services</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/use-cases">Customers</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/learn">Learn</a>
            </li>
          
        
          
        
        </ul>
      </nav>
      <nav class="nav navbar-nav navbar-right hidden-xs">
        <ul>
          <li class="hidden-xs hidden-sm"><a href="/downloads">downloads</a></li>
          <li class="hidden-xs hidden-md hidden-lg"><a class="icon-download" href="/downloads"></a></li>
          <!-- To set parameters to contact button -->
          
           
            
          

          
            
            
          
          <li class="hidden-xs hidden-sm"><a class="btn btn-secondary btn-contact" href="/contact?storm=global-header-en">contact</a></li>
          <!-- ////////////////ends here///////////////-->          
          <li class="hidden-xs hidden-md hidden-lg"><a class="icon-contact" href="/contact?storm=global-header-en"></a></li>
          <li class="hidden-xs" id="searchbar"><a class="button icon" href="#" alt="Search"></a></li>

          <li class="hidden-xs lang global-language">
                
                  
                
                  
                    <a href="#">EN</a>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
               <ul class="language-list">
              
                
                  
                
              
              <li><a class="" href="/de/" data-value="/de/">Deutsch</a></li>
              
              
                
                  
                
              
              <li><a class="" href="#" data-value="/">English</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/es/" data-value="/es/">Español</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/fr/" data-value="/fr/">Français</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/jp/" data-value="/jp/">日本語</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/kr/" data-value="/kr/">한국어</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/cn/" data-value="/cn/">简体中文</a></li>
              
              
            </ul>
          </li>
        </ul>
      </nav>
    </div><!-- /.navbar-collapse -->
  </nav>
  </div>
</div>

<div class="header-search-wrapper open-search"> 
  <div class="container">
    <div class="big-search">
      <i class="big-search-icon"></i>
      <form id="searchfrm" name="searchForm" autocomplete="on" action="/search" method="get">
        <ul class="tags-wrapper">
          <li class="search-field"><input type="text" name="q" id="autocomplete" class="form-control global-input" autocomplete="off"></li>
        </ul>
      </form>
      <a class="header-search-cancel" href="#"></a>
    </div>
    <div class="nav-auto-complete"></div>
  </div>
</div>
</header>
<link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">
<style> 
    
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    
      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    
      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    
    
</style>
<script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>
<script type="text/javascript">
  $(document).ready( function(){
    // if($('#scrollable-pane li').length > 3){
      $('.horizon-swiper').horizonSwiper({
        showItems: 3,
        arrows: true
      }); 
    // }
    
    $('.navbar-toggle').on('click', function(){
      $('.mobile-navigation, .menu-open').hide();
      $('.navigation-wrapper').addClass('mobile-navigation');
      $('.navbar').addClass('menu-open');
      $('.menu-close').show();
    });
    $('.menu-close').on('click', function(){
      $('.navigation-wrapper').removeClass('mobile-navigation');
      $('.navbar').removeClass('menu-open');
      $('.menu-close').hide();
    });

    var active_url = "";

    $(".navbar-mobile-header-icon").click(function(index){
      $('.navigation-wrapper').toggleClass('menu-overlay');
      $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
      $(".mobile-inner-nav").slideToggle(500);
      $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
        $(this).css({'animation-delay': (index/25)+'0.4s'});
      });
    });

    $('.dropdown-btn').on('click', function(e){
      e.preventDefault();
      setDropdown();
    });
    
    function setDropdown() {
      $('#myDropdown').slideToggle();
    }

    $('body').on('click', function(event){
      if (!event.target.matches('.dropdown-btn')) {

        var dropdowns = $(".dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    });

    // if($(window).width() < 769){
    //   var $item = $('.scrollable-panel li'), 
    //       visible = 3, //Set the number of items that will be visible
    //       index = 0, //Starting index
    //       endIndex = ( $item.length / visible ) - 1; //End index (NOTE:: Requires visible to be a factor of $item.length... You can improve this by rounding...)

    //   $('#right-arrow').click(function(){
    //     if(index < endIndex ){
    //       index++;
    //       $item.animate({'left':'-=300px'});
    //     }
    //   });

    //   $('#left-arrow').click(function(){
    //     if(index > 0){
    //       index--;            
    //       $item.animate({'left':'+=300px'});
    //     }
    //   });
    // }
  });
  $(window).resize(function () {
    $('.horizon-swiper').horizonSwiper({
      showItems: 3,
      arrows: true
    });
  });
</script>
    
      


  





  
  
  
  
    <div class="tertiary-nav bdr-btm-e0e0e0">
      <div class="container">
        <div class="p-t-b-15 clearfix">
          <div class="breadcrum-wrapper pull-left text-left">
          
            <a href="/guide">Docs</a> 
          
          </div>
          
          
          
        </div>
      </div>
    </div>

    <div class="nav-mobile-dropdown hidden-sm hidden-md hidden-lg bdr-btm-e0e0e0 clearfix">
      <div class="container text-right">
        <div class="breadcrum-wrapper pull-left text-left">
          
              <a href="/guide">Docs</a>
          
        </div>
        
        
      </div>
    </div>
  


<style type="text/css">

  
</style>
    
    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   
          
            
        			<!-- <div class="pageheader">
	<div class="common-container">
		
			<h2 class="page-title">Guide template</h2>
		
	</div>
</div> -->


        		
          

          
	<section id="guide" lang="en">
		<div class="container">
			<div class="row">
			  <!-- start body -->
				
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [6.6]
    </a></span> » <span class="breadcrumb-link"><a href="development.html">Contributing to Kibana</a></span> » <span class="breadcrumb-link"><a href="core-development.html">Core Development</a></span> » <span class="breadcrumb-node">Functional Testing</span></div><div class="navheader"><span class="prev"><a href="development-elasticsearch.html">
              « 
              Communicating with Elasticsearch</a>
           
        </span><span class="next">
           
          <a href="plugin-development.html">Plugin Development
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="development-functional-tests"></a>Functional Testing<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>We use functional tests to make sure the Kibana UI works as expected. It replaces hours of manual testing by automating user interaction. To have better control over our functional test environment, and to make it more accessible to plugin authors, Kibana uses a tool called the <code class="literal">FunctionalTestRunner</code>.</p><h4><a id="_running_functional_tests"></a>Running functional tests<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The <code class="literal">FunctionalTestRunner</code> is very bare bones and gets most of its functionality from its config file, located at <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/test/functional/config.js" target="_top">test/functional/config.js</a>. If you’re writing a plugin you will have your own config file. See <a class="xref" href="development-plugin-functional-tests.html" title="Functional Tests for Plugins">Functional Tests for Plugins</a> for more info.</p><p>There are three ways to run the tests depending on your goals:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
Easiest option:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Description: Starts up Kibana &amp; Elasticsearch servers, followed by running tests. This is much slower when running the tests multiple times because slow startup time for the servers. Recommended for single-runs.
</li><li class="listitem"><p class="simpara">
<code class="literal">node scripts/functional_tests</code>
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
does everything in a single command, including running Elasticsearch and Kibana locally
</li><li class="listitem">
tears down everything after the tests run
</li><li class="listitem">
exit code reports success/failure of the tests
</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
Best for development:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Description: Two commands, run in separate terminals, separate the components that are long-running and slow from those that are ephemeral and fast. Tests can be re-run much faster, and this still runs Elasticsearch &amp; Kibana locally.
</li><li class="listitem"><p class="simpara">
<code class="literal">node scripts/functional_tests_server</code>
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
starts Elasticsearch and Kibana servers
</li><li class="listitem">
slow to start
</li><li class="listitem">
can be reused for multiple executions of the tests, thereby saving some time when re-running tests
</li><li class="listitem">
automatically restarts the Kibana server when relevant changes are detected
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">node scripts/functional_test_runner</code>
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
runs the tests against Kibana &amp; Elasticsearch servers that were started by <code class="literal">node scripts/functional_tests_server</code>
</li><li class="listitem">
exit code reports success or failure of the tests
</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
Custom option:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Description: Runs tests against instances of Elasticsearch &amp; Kibana started some other way (like Elastic Cloud, or an instance you are managing in some other way).
</li><li class="listitem">
just executes the functional tests
</li><li class="listitem">
url, credentials, etc. for Elasticsearch and Kibana are specified via environment variables
</li><li class="listitem"><p class="simpara">
Here’s an example that runs against an Elastic Cloud instance. Note that you should run the same branch of tests as the version of Kibana you’re testing.
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">export TEST_KIBANA_URL=https://kibana:password@my-kibana-instance.internal.net:443

export TEST_ES_URL=https://elastic:password@my-es-cluster.internal.net:9200
node scripts/functional_test_runner</pre></div></li><li class="listitem"><p class="simpara">
Or you can override any or all of these individual parts of the URL and leave the others to the default values.
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">export TEST_KIBANA_PROTOCOL=https
export TEST_KIBANA_HOSTNAME=my-kibana-instance.internal.net
export TEST_KIBANA_PORT=443
export TEST_KIBANA_USER=kibana
export TEST_KIBANA_PASS=&lt;password&gt;

export TEST_ES_PROTOCOL=http
export TEST_ES_HOSTNAME=my-es-cluster.internal.net
export TEST_ES_PORT=9200
export TEST_ES_USER=elastic
export TEST_ES_PASS=&lt;password&gt;
node scripts/functional_test_runner</pre></div></li></ul></div></li></ol></div><h5><a id="_more_about_literal_node_scripts_functional_test_runner_literal"></a>More about <code class="literal">node scripts/functional_test_runner</code><a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>When run without any arguments the <code class="literal">FunctionalTestRunner</code> automatically loads the configuration in the standard location, but you can override that behavior with the <code class="literal">--config</code> flag. List configs with multiple --config arguments.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">--config test/functional/config.js</code> starts Elasticsearch and Kibana servers with the selenium tests configuration.
</li><li class="listitem">
<code class="literal">--config test/api_integration/config.js</code> starts Elasticsearch and Kibana servers with the api integration tests configuration.
</li></ul></div><p>There are also command line flags for <code class="literal">--bail</code> and <code class="literal">--grep</code>, which behave just like their mocha counterparts. For instance, use <code class="literal">--grep=foo</code> to run only tests that match a regular expression.</p><p>Logging can also be customized with <code class="literal">--quiet</code>, <code class="literal">--debug</code>, or <code class="literal">--verbose</code> flags.</p><p>Use the <code class="literal">--help</code> flag for more options.</p><h4><a id="_writing_functional_tests"></a>Writing functional tests<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><h5><a id="_environment"></a>Environment<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>The tests are written in <a class="ulink" href="https://mochajs.org" target="_top">mocha</a> using <a class="ulink" href="https://github.com/Automattic/expect.js" target="_top">expect</a> for assertions.</p><p>We use <a class="ulink" href="https://sites.google.com/a/chromium.org/chromedriver/" target="_top">chromedriver</a>, <a class="ulink" href="https://theintern.github.io/leadfoot" target="_top">leadfoot</a>, and <a class="ulink" href="https://github.com/theintern/digdug" target="_top">digdug</a> for automating Chrome. When the <code class="literal">FunctionalTestRunner</code> launches, digdug opens a <code class="literal">Tunnel</code> which starts chromedriver and a stripped-down instance of Chrome. It also creates an instance of <a class="ulink" href="https://theintern.github.io/leadfoot/module-leadfoot_Command.html" target="_top">Leadfoot’s <code class="literal">Command</code></a> class, which is available via the <code class="literal">remote</code> service. The <code class="literal">remote</code> communicates to Chrome through the digdug <code class="literal">Tunnel</code>. See the <a class="ulink" href="https://theintern.github.io/leadfoot/module-leadfoot_Command.html" target="_top">leadfoot/Command API</a> docs for all the commands you can use with <code class="literal">remote</code>.</p><p>The <code class="literal">FunctionalTestRunner</code> automatically transpiles functional tests using babel, so that tests can use the same ECMAScript features that Kibana source code uses. See <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/style_guides/js_style_guide.md" target="_top">style_guides/js_style_guide.md</a>.</p><h5><a id="_definitions"></a>Definitions<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p><span class="strong strong"><strong>Provider:</strong></span></p><p>Code run by the <code class="literal">FunctionalTestRunner</code> is wrapped in a function so it can be passed around via config files and be parameterized. Any of these Provider functions may be asynchronous and should return/resolve-to the value they are meant to <span class="emphasis"><em>provide</em></span>. Provider functions will always be called with a single argument: a provider API (see the <a class="link" href="development-functional-tests.html#functional_test_runner_provider_api" title="Provider APIedit">Provider API Section</a>).</p><p>A config provider:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">// config and test files use `export default`
export default function (/* { providerAPI } */) {
  return {
    // ...
  }
}</pre></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong strong"><strong>Services</strong></span>
</span></dt><dd>
Services are named singleton values produced by a Service Provider. Tests and other services can retrieve service instances by asking for them by name. All functionality except the mocha API is exposed via services.\
</dd><dt><span class="term">
<span class="strong strong"><strong>Page objects</strong></span>
</span></dt><dd>
Page objects are a special type of service that encapsulate behaviors common to a particular page or plugin. When you write your own plugin, you’ll likely want to add a page object (or several) that describes the common interactions your tests need to execute.
</dd><dt><span class="term">
<span class="strong strong"><strong>Test Files</strong></span>
</span></dt><dd>
The <code class="literal">FunctionalTestRunner</code>'s primary purpose is to execute test files. These files export a Test Provider that is called with a Provider API but is not expected to return a value. Instead Test Providers define a suite using <a class="ulink" href="https://mochajs.org/#bdd" target="_top">mocha’s BDD interface</a>.
</dd><dt><span class="term">
<span class="strong strong"><strong>Test Suite</strong></span>
</span></dt><dd>
A test suite is a collection of tests defined by calling <code class="literal">describe()</code>, and then populated with tests and setup/teardown hooks by calling <code class="literal">it()</code>, <code class="literal">before()</code>, <code class="literal">beforeEach()</code>, etc. Every test file must define only one top level test suite, and test suites can have as many nested test suites as they like.
</dd></dl></div><h5><a id="_anatomy_of_a_test_file"></a>Anatomy of a test file<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>The annotated example file below shows the basic structure every test suite uses. It starts by importing <a class="ulink" href="https://github.com/Automattic/expect.js" target="_top"><code class="literal">expect.js</code></a> and defining its default export: an anonymous Test Provider. The test provider then destructures the Provider API for the <code class="literal">getService()</code> and <code class="literal">getPageObjects()</code> functions. It uses these functions to collect the dependencies of this suite. The rest of the test file will look pretty normal to mocha.js users. <code class="literal">describe()</code>, <code class="literal">it()</code>, <code class="literal">before()</code> and the lot are used to define suites that happen to automate a browser via services and objects of type <code class="literal">PageObject</code>.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">import expect from 'expect.js';
// test files must `export default` a function that defines a test suite
export default function ({ getService, getPageObject }) {

  // most test files will start off by loading some services
  const retry = getService('retry');
  const testSubjects = getService('testSubjects');
  const esArchiver = getService('esArchiver');

  // for historical reasons, PageObjects are loaded in a single API call
  // and returned on an object with a key/value for each requested PageObject
  const PageObjects = getPageObjects(['common', 'visualize']);

  // every file must define a top-level suite before defining hooks/tests
  describe('My Test Suite', () =&gt; {

    // most suites start with a before hook that navigates to a specific
    // app/page and restores some archives into elasticsearch with esArchiver
    before(async () =&gt; {
      await Promise.all([
        // start with an empty .kibana index
        esArchiver.load('empty_kibana'),
        // load some basic log data only if the index doesn't exist
        esArchiver.loadIfNeeded('makelogs')
      ]);
      // go to the page described by `apps.visualize` in the config
      await PageObjects.common.navigateTo('visualize');
    });

    // right after the before() hook definition, add the teardown steps
    // that will tidy up elasticsearch for other test suites
    after(async () =&gt; {
      // we unload the empty_kibana archive but not the makelogs
      // archive because we don't make any changes to it, and subsequent
      // suites could use it if they call `.loadIfNeeded()`.
      await esArchiver.unload('empty_kibana');
    });

    // This series of tests illustrate how tests generally verify
    // one step of a larger process and then move on to the next in
    // a new test, each step building on top of the previous
    it('Vis Listing Page is empty');
    it('Create a new vis');
    it('Shows new vis in listing page');
    it('Opens the saved vis');
    it('Respects time filter changes');
    it(...
  });

}</pre></div><h4><a id="functional_test_runner_provider_api"></a>Provider API<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The first and only argument to all providers is a Provider API Object. This object can be used to load service/page objects and config/test files.</p><p>Within config files the API has the following properties</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">log</code>
</p>
</td><td valign="top">
<p>
An instance of the <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/src/utils/tooling_log/tooling_log.js" target="_top"><code class="literal">ToolingLog</code></a> that is ready for use
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">readConfigFile(path)</code>
</p>
</td><td valign="top">
<p>
Returns a promise that will resolve to a Config instance that provides the values from the config file at <code class="literal">path</code>
</p>
</td></tr></tbody></table></div><p>Within service and PageObject Providers the API is:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">getService(name)</code>
</p>
</td><td valign="top">
<p>
Load and return the singleton instance of a service by name
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">getPageObjects(names)</code>
</p>
</td><td valign="top">
<p>
Load the singleton instances of `PageObject`s and collect them on an object where each name is the key to the singleton instance of that PageObject
</p>
</td></tr></tbody></table></div><p>Within a test Provider the API is exactly the same as the service providers API but with an additional method:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">loadTestFile(path)</code>
</p>
</td><td valign="top">
<p>
Load the test file at path in place. Use this method to nest suites from other files into a higher-level suite
</p>
</td></tr></tbody></table></div><h4><a id="_service_index"></a>Service Index<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><h5><a id="_built_in_services"></a>Built-in Services<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>The <code class="literal">FunctionalTestRunner</code> comes with three built-in services:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong strong"><strong>config:</strong></span>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Source: <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/src/functional_test_runner/lib/config/config.js" target="_top">src/functional_test_runner/lib/config/config.js</a>
</li><li class="listitem">
Schema: <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/src/functional_test_runner/lib/config/schema.js" target="_top">src/functional_test_runner/lib/config/schema.js</a>
</li><li class="listitem">
Use <code class="literal">config.get(path)</code> to read any value from the config file
</li></ul></div></dd><dt><span class="term">
<span class="strong strong"><strong>log:</strong></span>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Source: <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/src/utils/tooling_log/tooling_log.js" target="_top">src/utils/tooling_log/tooling_log.js</a>
</li><li class="listitem">
<code class="literal">ToolingLog</code> instances are readable streams. The instance provided by this service is automatically piped to stdout by the <code class="literal">FunctionalTestRunner</code> CLI
</li><li class="listitem">
<code class="literal">log.verbose()</code>, <code class="literal">log.debug()</code>, <code class="literal">log.info()</code>, <code class="literal">log.warning()</code> all work just like console.log but produce more organized output
</li></ul></div></dd><dt><span class="term">
<span class="strong strong"><strong>lifecycle:</strong></span>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Source: <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/src/functional_test_runner/lib/lifecycle.js" target="_top">src/functional_test_runner/lib/lifecycle.js</a>
</li><li class="listitem">
Designed primary for use in services
</li><li class="listitem">
Exposes lifecycle events for basic coordination. Handlers can return a promise and resolve/fail asynchronously
</li><li class="listitem">
Phases include: <code class="literal">beforeLoadTests</code>, <code class="literal">beforeTests</code>, <code class="literal">beforeEachTest</code>, <code class="literal">cleanup</code>, <code class="literal">phaseStart</code>, <code class="literal">phaseEnd</code>
</li></ul></div></dd></dl></div><h5><a id="_kibana_services"></a>Kibana Services<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>The Kibana functional tests define the vast majority of the actual functionality used by tests.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong strong"><strong>retry:</strong></span>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Source: <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/test/functional/services/retry.js" target="_top">test/functional/services/retry.js</a>
</li><li class="listitem">
Helpers for retrying operations
</li><li class="listitem"><p class="simpara">
Popular methods:
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
<code class="literal">retry.try(fn)</code> - execute <code class="literal">fn</code> in a loop until it succeeds or the default try timeout elapses
</li><li class="listitem">
<code class="literal">retry.tryForTime(ms, fn)</code> execute fn in a loop until it succeeds or <code class="literal">ms</code> milliseconds elapses
</li></ul></div></li></ul></div></dd><dt><span class="term">
<span class="strong strong"><strong>testSubjects:</strong></span>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Source: <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/test/functional/services/test_subjects.js" target="_top">test/functional/services/test_subjects.js</a>
</li><li class="listitem">
Test subjects are elements that are tagged specifically for selecting from tests
</li><li class="listitem">
Use <code class="literal">testSubjects</code> over CSS selectors when possible
</li><li class="listitem"><p class="simpara">
Usage:
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
Tag your test subject with a <code class="literal">data-test-subj</code> attribute:
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-html">&lt;div id="container”&gt;
  &lt;button id="clickMe” data-test-subj=”containerButton” /&gt;
&lt;/div&gt;</pre></div></li><li class="listitem"><p class="simpara">
Click this button using the <code class="literal">testSubjects</code> helper:
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">await testSubjects.click(‘containerButton’);</pre></div></li></ul></div></li><li class="listitem"><p class="simpara">
Popular methods:
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
<code class="literal">testSubjects.find(testSubjectSelector)</code> - Find a test subject in the page; throw if it can’t be found after some time
</li><li class="listitem">
<code class="literal">testSubjects.click(testSubjectSelector)</code> - Click a test subject in the page; throw if it can’t be found after some time
</li></ul></div></li></ul></div></dd><dt><span class="term">
<span class="strong strong"><strong>find:</strong></span>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Source: <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/test/functional/services/find.js" target="_top">test/functional/services/find.js</a>
</li><li class="listitem">
Helpers for <code class="literal">remote.findBy*</code> methods that log and manage timeouts
</li><li class="listitem"><p class="simpara">
Popular methods:
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
<code class="literal">find.byCssSelector()</code>
</li><li class="listitem">
<code class="literal">find.allByCssSelector()</code>
</li></ul></div></li></ul></div></dd><dt><span class="term">
<span class="strong strong"><strong>kibanaServer:</strong></span>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Source: <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/test/functional/services/kibana_server/kibana_server.js" target="_top">test/functional/services/kibana_server/kibana_server.js</a>
</li><li class="listitem">
Helpers for interacting with Kibana’s server
</li><li class="listitem"><p class="simpara">
Commonly used methods:
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
<code class="literal">kibanaServer.uiSettings.update()</code>
</li><li class="listitem">
<code class="literal">kibanaServer.version.get()</code>
</li><li class="listitem">
<code class="literal">kibanaServer.status.getOverallState()</code>
</li></ul></div></li></ul></div></dd><dt><span class="term">
<span class="strong strong"><strong>esArchiver:</strong></span>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Source: <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/test/functional/services/es_archiver.js" target="_top">test/functional/services/es_archiver.js</a>
</li><li class="listitem">
Load/unload archives created with the <code class="literal">esArchiver</code>
</li><li class="listitem"><p class="simpara">
Popular methods:
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
<code class="literal">esArchiver.load(name)</code>
</li><li class="listitem">
<code class="literal">esArchiver.loadIfNeeded(name)</code>
</li><li class="listitem">
<code class="literal">esArchiver.unload(name)</code>
</li></ul></div></li></ul></div></dd><dt><span class="term">
<span class="strong strong"><strong>docTable:</strong></span>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Source: <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/test/functional/services/doc_table.js" target="_top">test/functional/services/doc_table.js</a>
</li><li class="listitem">
Helpers for interacting with doc tables
</li></ul></div></dd><dt><span class="term">
<span class="strong strong"><strong>pointSeriesVis:</strong></span>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Source: <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/test/functional/services/point_series_vis.js" target="_top">test/functional/services/point_series_vis.js</a>
</li><li class="listitem">
Helpers for interacting with point series visualizations
</li></ul></div></dd><dt><span class="term">
<span class="strong strong"><strong>Low-level utilities:</strong></span>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
es
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
Source: <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/test/functional/services/es.js" target="_top">test/functional/services/es.js</a>
</li><li class="listitem">
Elasticsearch client
</li><li class="listitem">
Higher level options: <code class="literal">kibanaServer.uiSettings</code> or <code class="literal">esArchiver</code>
</li></ul></div></li><li class="listitem"><p class="simpara">
remote
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
Source: <a class="ulink" href="https://github.com/elastic/kibana/blob/6.6/test/functional/services/remote/remote.js" target="_top">test/functional/services/remote/remote.js</a>
</li><li class="listitem">
Instance of <a class="ulink" href="https://theintern.github.io/leadfoot/module-leadfoot_Command.html[Leadfoot’s" target="_top">https://theintern.github.io/leadfoot/module-leadfoot_Command.html[Leadfoot’s</a> <code class="literal">Command]</code> class
</li><li class="listitem">
Responsible for all communication with the browser
</li><li class="listitem">
Higher level options: <code class="literal">testSubjects</code>, <code class="literal">find</code>, and <code class="literal">PageObjects.common</code>
</li><li class="listitem">
See the <a class="ulink" href="https://theintern.github.io/leadfoot/module-leadfoot_Command.html" target="_top">leadfoot/Command API</a> for full API
</li></ul></div></li></ul></div></dd></dl></div><h5><a id="_custom_services"></a>Custom Services<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Services are intentionally generic. They can be literally anything (even nothing). Some services have helpers for interacting with a specific types of UI elements, like <code class="literal">pointSeriesVis</code>, and others are more foundational, like <code class="literal">log</code> or <code class="literal">config</code>. Whenever you want to provide some functionality in a reusable package, consider making a custom service.</p><p>To create a custom service <code class="literal">somethingUseful</code>:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
Create a <code class="literal">test/functional/services/something_useful.js</code> file that looks like this:
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">// Services are defined by Provider functions that receive the ServiceProviderAPI
export function SomethingUsefulProvider({ getService }) {
  const log = getService('log');

  class SomethingUseful {
    doSomething() {
    }
  }
  return new SomethingUseful();
}</pre></div></li><li class="listitem">
Re-export your provider from <code class="literal">services/index.js</code>
</li><li class="listitem"><p class="simpara">
Import it into <code class="literal">src/functional/config.js</code> and add it to the services config:
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">import { SomethingUsefulProvider } from './services';

export default function () {
  return {
    // … truncated ...
    services: {
      somethingUseful: SomethingUsefulProvider
    }
  }
}</pre></div></li></ul></div><h4><a id="_pageobjects"></a>PageObjects<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The purpose for each PageObject is pretty self-explanatory. The visualize PageObject provides helpers for interacting with the visualize app, dashboard is the same for the dashboard app, and so on.</p><p>One exception is the "common" PageObject. A holdover from the intern implementation, the common PageObject is a collection of helpers useful across pages. Now that we have shareable services, and those services can be shared with other <code class="literal">FunctionalTestRunner</code> configurations, we will continue to move functionality out of the common PageObject and into services.</p><p>Please add new methods to existing or new services rather than further expanding the CommonPage class.</p><h4><a id="_gotchas"></a>Gotchas<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Remember that you can’t run an individual test in the file (<code class="literal">it</code> block) because the whole <code class="literal">describe</code> needs to be run in order. There should only be one top level <code class="literal">describe</code> in a file.</p><h5><a id="_functional_test_timing"></a>Functional Test Timing<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Another important gotcha is writing stable tests by being mindful of timing. All methods on <code class="literal">remote</code> run asynchronously. It’s better to write interactions that wait for changes on the UI to appear before moving onto the next step.</p><p>For example, rather than writing an interaction that simply clicks a button, write an interaction with the a higher-level purpose in mind:</p><p>Bad example: <code class="literal">PageObjects.app.clickButton()</code></p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">class AppPage {
  // what can people who call this method expect from the
  // UI after the promise resolves? Since the reaction to most
  // clicks is asynchronous the behavior is dependant on timing
  // and likely to cause test that fail unexpectedly
  async clickButton () {
    await testSubjects.click(‘menuButton’);
  }
}</pre></div><p>Good example: <code class="literal">PageObjects.app.openMenu()</code></p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">class AppPage {
  // unlike `clickButton()`, callers of `openMenu()` know
  // the state that the UI will be in before they move on to
  // the next step
  async openMenu () {
    await testSubjects.click(‘menuButton’);
    await testSubjects.exists(‘menu’);
  }
}</pre></div><p>Writing in this way will ensure your test timings are not flaky or based on assumptions about UI updates after interactions.</p><h4><a id="_debugging"></a>Debugging<a href="https://github.com/elastic/kibana/edit/6.6/docs/development/core/development-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>From the command line run:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">node --debug-brk --inspect scripts/functional_test_runner</pre></div><p>This prints out a URL that you can visit in Chrome and debug your functional tests in the browser.</p><p>You can also see additional logs in the terminal by running the <code class="literal">FunctionalTestRunner</code> with the <code class="literal">--debug</code> or <code class="literal">--verbose</code> flag. Add more logs with statements in your tests like</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">// load the log service
const log = getService(‘log’);

// log.debug only writes when using the `--debug` or `--verbose` flag.
log.debug(‘done clicking menu’);</pre></div></div><div class="navfooter"><span class="prev"><a href="development-elasticsearch.html">
              « 
              Communicating with Elasticsearch</a>
           
        </span><span class="next">
           
          <a href="plugin-development.html">Plugin Development
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
					<div id="rtpcontainer" style="display: block;">
						<div class="mktg-promo">
						<h3>Getting Started Videos</h3>
						<ul class="icons">
							<li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
							<li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
							<li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
						</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

        </div>
      	


<div id="footer-subscribe" class="home-footer-subscribe">
  <div class="subscribe-wrapper">
    <div class="container">
      <div class="subscribe-form-container">
        <div class="subscribe-title col-md-12 col-lg-6">
            <h5>Be in the know with the latest and greatest from Elastic.</h5>
        </div>
        <div class="subscribe-form col-md-12 col-lg-6">
          <form class="mktoForm sb-form"></form>
        </div>
      </div>
      <div class="form_thanks hide">
        
          <p>Thanks for subscribing! We'll keep you updated with new releases.</p>
        
      </div>
    </div>
  </div>
</div>
<!--subscribe newsletter end-->

<!-- Footer Section -->
<footer class="footer-wrapper">
  <div class="container">
    <div class="row footer-content">
        
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3><a href="/products">Products ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/products/elasticsearch">Elasticsearch</a></li>
                  
                
              
                
                  
                    <li><a href="/products/kibana">Kibana</a></li>
                  
                
              
                
                  
                    <li><a href="/products/beats">Beats</a></li>
                  
                
              
                
                  
                    <li><a href="/products/logstash">Logstash</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack">Stack Features (formerly X-Pack)</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/security">Security</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/alerting">Alerting</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/canvas">Canvas</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/monitoring">Monitoring</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/graph">Graph</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/reporting">Reporting</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/machine-learning">Machine Learning</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/elasticsearch-sql">Elasticsearch SQL</a></li>
                  
                
              
                
                  
                    <li><a href="/products/hadoop">Elasticsearch-Hadoop</a></li>
                  
                
              
                
                  
                    <li><a href="/products/ece">Elastic Cloud Enterprise</a></li>
                  
                
              
              </ul>
              
                <h3><a href=""></a></h3>
              
              
              
              <ul class="">
              
              </ul>
          </div>    
      
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3><a href="/solutions">Solutions ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/solutions/logging">Logging</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/metrics">Metrics</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/site-search">Site Search</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/security-analytics">Security Analytics</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/apm">APM</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/app-search">App Search</a></li>
                  
                
              
              </ul>
              
                <h3><a href="/cloud">Elastic Cloud ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/cloud/elasticsearch-service">Elasticsearch Service</a></li>
                  
                
              
                
                  
                    <li><a href="/aws-elasticsearch-service">AWS Elasticsearch Service Comparison</a></li>
                  
                
              
                
                  
                    <li><a href="/cloud/app-search-service">Elastic App Search Service</a></li>
                  
                
              
                
                  
                    <li><a href="/cloud/site-search-service">Elastic Site Search Service</a></li>
                  
                
              
              </ul>
          </div>    
      
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3>Resources</h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/blog">Blog</a></li>
                  
                
              
                
                  
                    <li><a href="https://cloud-status.elastic.co">Cloud Status</a></li>
                  
                
              
                
                  
                    <li><a href="/community">Community</a></li>
                  
                
              
                
                  
                    <li><a href="/use-cases">Customers & Use Cases</a></li>
                  
                
              
                
                  
                    <li><a href="/guide">Documentation</a></li>
                  
                
              
                
                  
                    <li><a href="/elasticon">Elastic{ON} Events</a></li>
                  
                
              
                
                  
                    <li><a href="https://discuss.elastic.co/">Forums</a></li>
                  
                
              
                
                  
                    <li><a href="/community/meetups">Meetups</a></li>
                  
                
              
                
                  
                    <li><a href="/subscriptions">Subscriptions</a></li>
                  
                
              
                
                  
                    <li><a href="https://support.elastic.co">Support Portal</a></li>
                  
                
              
                
                  
                    <li><a href="/videos">Videos & Webinars</a></li>
                  
                
              
                
                  
                    <li><a href="/training">Training</a></li>
                  
                
              
              </ul>
              
                <h3></h3>
              
              
              
              <ul class="">
              
              </ul>
          </div>    
      
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3><a href="/about">About ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/about/careers">Careers/Jobs</a></li>
                  
                
              
                
                  
                    <li><a href="/about/our-source-code">Our Source Code</a></li>
                  
                
              
                
                  
                    <li><a href="/about/teams">Teams</a></li>
                  
                
              
                
                  
                    <li><a href="/about/teams/board">Board of Directors</a></li>
                  
                
              
                
                  
                    <li><a href="/about/teams/leadership">Leadership</a></li>
                  
                
              
                
                  
                    <li><a href="/contact">Contact</a></li>
                  
                
              
                
                  
                    <li><a href="/about/history-of-elasticsearch">Our Story</a></li>
                  
                
              
                
                  
                    <li><a href="/about/why-open-source">Why Open Source</a></li>
                  
                
              
                
                  
                    <li><a href="/about/distributed">Distributed by Intention</a></li>
                  
                
              
                
                  
                    <li><a href="/about/partners">Partners</a></li>
                  
                
              
                
                  
                    <li><a href="/about/press">Media</a></li>
                  
                
              
                
                  
                    <li><a href="https://ir.elastic.co">Investor Relations</a></li>
                  
                
              
                
                  
                    <li><a href="https://www.elastic.shop">Elastic Store</a></li>
                  
                
              
              </ul>
              
                <h3><a href=""></a></h3>
              
              
              
              <ul class="">
              
              </ul>
          </div>    
       
    </div>
     <!-- Social Media Section -->
    <div class="row social-icon">
      <div class="col-xs-12 col-sm-12 col-md-6 col-md-offset-3">
	    <div class="row">
		     <div class="follow-us col-xs-12 col-sm-12 col-md-12">
			    <div class="social-label">FOLLOW US</div>
			    <ul class="social-icon-list">
          
          		 	<li class="Facebook"><a id="footer_facebook" href="https://www.facebook.com/elastic.co">Facebook</a></li>
          
          		 	<li class="Twitter"><a id="footer_twitter" href="https://www.twitter.com/elastic">Twitter</a></li>
          
          		 	<li class="LinkedIn"><a id="footer_linkedin" href="https://www.linkedin.com/company/elastic-co">LinkedIn</a></li>
          
          		 	<li class="Xing"><a id="footer_xing" href="https://www.xing.com/companies/elastic.co">Xing</a></li>
          
          		 	<li class="YouTube"><a id="footer_youtube" href="https://www.youtube.com/user/elasticsearch">YouTube</a></li>
          
		  		</ul>
		     </div>
	    </div>
      </div>
    </div>
    <!-- Social Media Section end-->
    <div class="row">
	<div class="col-xs-12 col-sm-12 col-md-11">
		<div class="copyright">
			<ul>
				<li><a href="/legal/trademarks">Trademarks</a></li>
				<li><a href="/legal/terms-of-use">Terms of Use</a></li>
				<li><a href="/legal/privacy-statement">Privacy</a></li>
				<li><a href="/brand">Brand</a></li>
			</ul>
			<div class="copyright-content">
				<div class="footer-text">
					<p>© 2018. Elasticsearch B.V. All Rights Reserved
					</p>
					<p>Elasticsearch is a trademark of Elasticsearch B.V., registered in the U.S. and in other countries.
					</p>
					<p>Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a> in the United States and/or other countries.
					</p>
				</div>
			</div>
		</div>
	</div>
	<div class="col-xs-2 col-xs-offset-5 col-sm-1 col-sm-offset-5 col-md-1 col-md-offset-0">
		<div class="footer-logo"><a href="/"><img src="/static/images/svg/logo-elastic-footer-stacked-999.svg" class="img-responsive"></a>
		</div>
	</div>
</div>
  </div>
</footer>
<!-- Footer Section end-->

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>
 
     
<script type="text/javascript">
$(document).ready(function(){
	if (window.location.hash.length) {
	      var target = $(window.location.hash);
	      target = target.length ? target : $(window.location.hash);
	      if (target.length) {
	        setTimeout(function(){ $(window).scrollTop(target.offset().top - 60); }, 1200);        
	      }
	}
	$('#guide').on('click','a[href*=#]:not([href=#])',function(e) {
			var flag=true;
		      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
		          var target = $(this.hash);
		          target = target.length ? target :$(this.hash);
		          if (target.length) {
		            if(flag){
		              flag=false;
		              var heightScroll=($('.tertiary-nav.navbar-fixed-top').height())?60:110;
		              $('html,body').animate({
		                  scrollTop: target.offset().top - heightScroll
		                }, 2000, function(){
		                  flag=true;
		                });
		            }                    
		          }
		      }
		    
	});

})

</script>

     <style></style>
     
  
            <script type="text/javascript" src="docs.js"></script>
<script type='text/javascript' src='https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=yaml'></script>

            </body>
        
</html>