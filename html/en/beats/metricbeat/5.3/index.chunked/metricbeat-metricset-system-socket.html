<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">System Socket Metricset
        | Metricbeat Reference [5.3]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Metricbeat Reference [5.3]" /><link rel="up" href="metricbeat-module-system.html" title="System Module" /><link rel="prev" href="metricbeat-metricset-system-process.html" title="System Process Metricset" /><link rel="next" href="metricbeat-module-zookeeper.html" title="ZooKeeper Module" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Metricbeat/Reference/5.3" /></head><body><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Metricbeat Reference
      [5.3]
    </a></span> » <span class="breadcrumb-link"><a href="metricbeat-modules.html">Modules</a></span> » <span class="breadcrumb-link"><a href="metricbeat-module-system.html">System Module</a></span> » <span class="breadcrumb-node">System Socket Metricset</span></div><div xmlns="" class="navheader"><span class="prev"><a href="metricbeat-metricset-system-process.html">
              « 
              System Process Metricset</a>
           
        </span><span class="next">
           
          <a href="metricbeat-module-zookeeper.html">ZooKeeper Module
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="metricbeat-metricset-system-socket"></a>System Socket Metricset<a xmlns="" href="https://github.com/elastic/beats/edit/5.3/metricbeat/module/system/socket/_meta/docs.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div xmlns="" class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>This functionality is in beta and is subject to change. The design and code is considered to be less mature than official GA features. Elastic will take a best effort approach to fix any issues, but beta features are not subject to the support SLA of official GA features.</p></div></div><p>This metricset is available on Linux only and requires kernel 2.6.14 or newer.</p><p>The system <code class="literal">socket</code> metricset reports an event for each new TCP socket that it
sees. It does this by polling the kernel periodically to get a dump of all
sockets. You set the polling interval by configuring the <code class="literal">period</code> option.
Specifying a short polling interval with this metricset is important to avoid
missing short-lived connections. For example:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">metricbeat.modules:
- module: system
  metricsets: [cpu, memory]
- module: system
  metricsets: [socket] <a id="CO8-1"></a><span xmlns=""><img src="images/icons/callouts/1.png" alt="" /></span>
  period: 1s</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO8-1"><span xmlns=""><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
You can configure the <code class="literal">socket</code> metricset separately to specify a different
<code class="literal">period</code> value than the other metricsets.
</p></td></tr></table></div><p>The metricset reports the process that has the socket open. In order to provide
this information, Metricbeat must be running as root. Root access is also
required to read the file descriptor information of other processes.</p><p>You can configure the metricset to perform a reverse lookup on the remote IP,
and the returned hostname will be added to the event and cached. If a hostname
is found, then the eTLD+1 (effective top-level domain plus one level) value will
also be added to the event. Reverse lookups are disabled by default.</p><p>The following example shows the full configuration for the metricset along with
the defaults.</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">- module: system
  metricsets: [socket]
  socket.reverse_lookup.enabled: false
  socket.reverse_lookup.success_ttl: 60s
  socket.reverse_lookup.failure_ttl: 60s</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_fields_43"></a>Fields<a xmlns="" href="https://github.com/elastic/beats/edit/5.3/metricbeat/docs/modules/system/socket.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>For a description of each field in the metricset, see the
<a class="link" href="exported-fields-system.html" title="System Fields">exported fields</a> section.</p><p>Here is an example document generated by this metricset:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-json">{
    "@timestamp": "2016-05-23T08:05:34.853Z",
    "beat": {
        "hostname": "host.example.com",
        "name": "host.example.com"
    },
    "metricset": {
        "module": "system",
        "name": "socket",
        "rtt": 115
    },
    "system": {
        "socket": {
            "direction": "listening",
            "family": "ipv6",
            "local": {
                "ip": "::",
                "port": 42061
            },
            "process": {
                "cmdline": "/tmp/go-build519327234/github.com/elastic/beats/metricbeat/module/system/socket/_test/socket.test -test.v=true -data",
                "command": "socket.test",
                "exe": "/tmp/go-build519327234/github.com/elastic/beats/metricbeat/module/system/socket/_test/socket.test",
                "pid": 2025
            },
            "user": {
                "id": 0,
                "name": "root"
            }
        }
    },
    "type": "metricsets"
}</pre></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="metricbeat-metricset-system-process.html">
              « 
              System Process Metricset</a>
           
        </span><span class="next">
           
          <a href="metricbeat-module-zookeeper.html">ZooKeeper Module
               »
            </a></span></div></body></html>