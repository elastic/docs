<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Configuration
        | APM Node.js Agent Reference [2.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="APM Node.js Agent Reference [2.x]" /><link rel="up" href="api.html" title="API Reference" /><link rel="prev" href="agent-api.html" title="Agent API" /><link rel="next" href="transaction-api.html" title="Transaction API" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/APM Node.js Agent/Reference/2.x" /><meta name="DC.subject" content="APM" /><meta name="DC.identifier" content="2.x" />
    

    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
<meta name="apple-mobile-web-app-title" content="Elastic">
<meta name="application-name" content="Elastic">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">
<!-- DC tags section -->
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
<link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >



	



<!-- end DC tags -->


	<meta name="description" content="" />



	<meta name="localized" content="true" />


















		
			<meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
		

		

    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">

	 

    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    
    

    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  <script type="text/javascript">
  // -------------------- set language based on browser language --------------------
  var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

  if($.cookie("is_lang_detected") == undefined){
    if(locales[lang] != undefined && locales[lang] != currentlocale){
      locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
      $.cookie("is_lang_detected",true ,{ path: '/'}); 
      window.location = locale_lang_url;
    } 
  }
        
  // --------------------- end of set language based on browser language -----------------
  </script>


	
	<link type="text/css" rel="stylesheet" href="/static/css/guide.css" />


  
<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
  <body >
  	<!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
                              height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
<script src="/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>


<script type="text/javascript">
  var active;
  
  active = Math.random() < 1 //0.9 
  
  elasticApm.init({
    active: active,
    serviceName: "elastic-co-frontend",
    serverUrl: "https://elastic-co-apm-server.app.elstc.co"
  })

  var pageLoadName
  var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
  var parts = pathname.split('/');

  if (parts.length && parts[1] === 'blog') {
    if (parts.length === 2) {
      pageLoadName =  '/blog';
    }
    else if (parts[2] === 'category') {
      pageLoadName =  '/blog/category';
    }
    else if (parts[2] === 'archive') {
      pageLoadName =  '/blog/archive';
    }
    else {
      pageLoadName =  '/blog/detail';
    }
  }
  else if (parts.length && parts[1] === 'elasticon') {
    if (parts.length === 2) {
      pageLoadName =  '/elasticon';
    }
    else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
      pageLoadName =  '/elasticon/overview';
    }
    else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
      pageLoadName =  '/elasticon/video';
    }
  }
  else if (parts.length && parts[1] === 'guide') {
    pageLoadName =  '/guide';
  }
  else if (parts.length === 2 && parts[1] === 'videos') {
    pageLoadName =  '/videos';
  }
  else if (parts.length > 2 && parts[1] === 'videos') {
    pageLoadName =  '/videos/detail';
  }
  else if (parts.length > 2 && parts[1] === 'webinars') {
    pageLoadName =  '/webinars/detail';
  }
  else {
    pageLoadName =  window.location.pathname;
  }

  console.log('apm pageLoadName:', pageLoadName, parts)
  elasticApm.setTags({env:"production"});
  elasticApm.setInitialPageLoadName(pageLoadName);
</script>

<!-- Elastic APM -->


    <!-- Header Section -->
    
<header class="header-wrapper">
  



  




<div class="navigation-wrapper">
  <div class="container">
    <nav class="navbar">
    <!-- Brand and toggle get grouped for better mobile display -->

    <div class="navbar-mobile-header navbar-header mr-20 mr-xs-0">
      <div class="row hidden-sm hidden-md hidden-lg">
        <div class="col-xs-5 hidden-sm hidden-md hidden-lg">
          <div class="navbar-mobile-header-icon navbar-mobile-header-icon-out">
            <span></span>
            <span></span>
            <span></span>
          </div>
          
        </div>
        <div class="col-xs-2 text-center">
          <div class="navbar-brand" id="elastic">
            <div id="logo">
              <a class="logo-m hidden-sm hidden-md hidden-lg" href="/">
                <img src="/assets/blta09706b1c5cc1e99/elastic-logo-mobile.svg" alt="elastic-logo-mobile">
              </a>
            </div>
          </div>
        </div>
        <div class="col-xs-5 hidden-sm hidden-md hidden-lg text-right">
          <ul class="menu-m hidden-sm hidden-md hidden-lg">
            <li class=""><a class="icon-contact" href="/contact"></a></li>

            <li id="searchbar"><a class="button icon" href="#" alt="Search"></a></li>
            <li class="lang global-language">
                
                  
                
                  
                    <a href="#">EN</a>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              <ul class="language-list">
                
                  
                    
                  
                  
                  <li><a href="/de/" data-value="/de/" id="locale-select">Deutsch</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="#" data-value="/" id="locale-select">English</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/es/" data-value="/es/" id="locale-select">Español</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/fr/" data-value="/fr/" id="locale-select">Français</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/jp/" data-value="/jp/" id="locale-select">日本語</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/kr/" data-value="/kr/" id="locale-select">한국어</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/cn/" data-value="/cn/" id="locale-select">简体中文</a></li>
                  
                
              </ul>
            </li>
          </ul>
        </div>
      </div>

      <div class="navbar-brand hidden-xs" id="elastic">
        <div id="logo">
          <a class="hidden-xs" id="elastic-logo" href="/">
            <img src="/assets/blt244a845f141977c3/elastic-logo.svg" alt="elastic-logo">
          </a>
        </div>
      </div>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse mobile-inner-nav">
      <nav class="nav navbar-nav primary-nav-hover" id="nav">
        <ul>
        
          
            
              
            
            <li>
              <a class=" " href="/products">Products</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/cloud">Cloud</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/services">Services</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/use-cases">Customers</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/learn">Learn</a>
            </li>
          
        
          
        
        </ul>
      </nav>
      <nav class="nav navbar-nav navbar-right hidden-xs">
        <ul>
          <li class="hidden-xs hidden-sm"><a href="/downloads">downloads</a></li>
          <li class="hidden-xs hidden-md hidden-lg"><a class="icon-download" href="/downloads"></a></li>
          <!-- To set parameters to contact button -->
          
           
            
          

          
            
            
          
          <li class="hidden-xs hidden-sm"><a class="btn btn-secondary btn-contact" href="/contact?storm=global-header-en">contact</a></li>
          <!-- ////////////////ends here///////////////-->          
          <li class="hidden-xs hidden-md hidden-lg"><a class="icon-contact" href="/contact?storm=global-header-en"></a></li>
          <li class="hidden-xs" id="searchbar"><a class="button icon" href="#" alt="Search"></a></li>

          <li class="hidden-xs lang global-language">
                
                  
                
                  
                    <a href="#">EN</a>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
               <ul class="language-list">
              
                
                  
                
              
              <li><a class="" href="/de/" data-value="/de/">Deutsch</a></li>
              
              
                
                  
                
              
              <li><a class="" href="#" data-value="/">English</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/es/" data-value="/es/">Español</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/fr/" data-value="/fr/">Français</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/jp/" data-value="/jp/">日本語</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/kr/" data-value="/kr/">한국어</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/cn/" data-value="/cn/">简体中文</a></li>
              
              
            </ul>
          </li>
        </ul>
      </nav>
    </div><!-- /.navbar-collapse -->
  </nav>
  </div>
</div>

<div class="header-search-wrapper open-search"> 
  <div class="container">
    <div class="big-search">
      <i class="big-search-icon"></i>
      <form id="searchfrm" name="searchForm" autocomplete="on" action="/search" method="get">
        <ul class="tags-wrapper">
          <li class="search-field"><input type="text" name="q" id="autocomplete" class="form-control global-input" autocomplete="off"></li>
        </ul>
      </form>
      <a class="header-search-cancel" href="#"></a>
    </div>
    <div class="nav-auto-complete"></div>
  </div>
</div>
</header>
<link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">
<style> 
    
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    
      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    
      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    
    
</style>
<script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>
<script type="text/javascript">
  $(document).ready( function(){
    // if($('#scrollable-pane li').length > 3){
      $('.horizon-swiper').horizonSwiper({
        showItems: 3,
        arrows: true
      }); 
    // }
    
    $('.navbar-toggle').on('click', function(){
      $('.mobile-navigation, .menu-open').hide();
      $('.navigation-wrapper').addClass('mobile-navigation');
      $('.navbar').addClass('menu-open');
      $('.menu-close').show();
    });
    $('.menu-close').on('click', function(){
      $('.navigation-wrapper').removeClass('mobile-navigation');
      $('.navbar').removeClass('menu-open');
      $('.menu-close').hide();
    });

    var active_url = "";

    $(".navbar-mobile-header-icon").click(function(index){
      $('.navigation-wrapper').toggleClass('menu-overlay');
      $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
      $(".mobile-inner-nav").slideToggle(500);
      $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
        $(this).css({'animation-delay': (index/25)+'0.4s'});
      });
    });

    $('.dropdown-btn').on('click', function(e){
      e.preventDefault();
      setDropdown();
    });
    
    function setDropdown() {
      $('#myDropdown').slideToggle();
    }

    $('body').on('click', function(event){
      if (!event.target.matches('.dropdown-btn')) {

        var dropdowns = $(".dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    });

    // if($(window).width() < 769){
    //   var $item = $('.scrollable-panel li'), 
    //       visible = 3, //Set the number of items that will be visible
    //       index = 0, //Starting index
    //       endIndex = ( $item.length / visible ) - 1; //End index (NOTE:: Requires visible to be a factor of $item.length... You can improve this by rounding...)

    //   $('#right-arrow').click(function(){
    //     if(index < endIndex ){
    //       index++;
    //       $item.animate({'left':'-=300px'});
    //     }
    //   });

    //   $('#left-arrow').click(function(){
    //     if(index > 0){
    //       index--;            
    //       $item.animate({'left':'+=300px'});
    //     }
    //   });
    // }
  });
  $(window).resize(function () {
    $('.horizon-swiper').horizonSwiper({
      showItems: 3,
      arrows: true
    });
  });
</script>
    
      


  





  
  
  
  
    <div class="tertiary-nav bdr-btm-e0e0e0">
      <div class="container">
        <div class="p-t-b-15 clearfix">
          <div class="breadcrum-wrapper pull-left text-left">
          
            <a href="/guide">Docs</a> 
          
          </div>
          
          
          
        </div>
      </div>
    </div>

    <div class="nav-mobile-dropdown hidden-sm hidden-md hidden-lg bdr-btm-e0e0e0 clearfix">
      <div class="container text-right">
        <div class="breadcrum-wrapper pull-left text-left">
          
              <a href="/guide">Docs</a>
          
        </div>
        
        
      </div>
    </div>
  


<style type="text/css">

  
</style>
    
    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   
          
            
        			<!-- <div class="pageheader">
	<div class="common-container">
		
			<h2 class="page-title">Guide template</h2>
		
	</div>
</div> -->


        		
          

          
	<section id="guide" lang="en">
		<div class="container">
			<div class="row">
			  <!-- start body -->
				
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">APM Node.js Agent Reference
      [2.x]
    </a></span> » <span class="breadcrumb-link"><a href="api.html">API Reference</a></span> » <span class="breadcrumb-node">Configuration</span></div><div class="navheader"><span class="prev"><a href="agent-api.html">
              « 
              <code class="literal">Agent</code> API</a>
           
        </span><span class="next">
           
          <a href="transaction-api.html"><code class="literal">Transaction</code> API
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuration"></a>Configuration<a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The available configuration options are listed below.
Most configuration options can be set either in the optional <code class="literal">options</code> object,
by using environment variables,
or via the <a class="link" href="advanced-setup.html#agent-configuration-file" title="Agent configuration fileedit">agent configuration file</a>.
Their equivalent environment variable name is listed together with each option.</p><p>Environment variables will always take precedence over properties of the <code class="literal">options</code> object.</p><p>The only required parameter is <a class="link" href="configuration.html#service-name" title="serviceName"><code class="literal">serviceName</code></a>.
However,
the agent will use the <code class="literal">name</code> from <code class="literal">package.json</code> by default if available.</p><p>Example usage configuring the agent to only be active in production:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">// Add this to the VERY top of the first file loaded in your app
require('elastic-apm-node').start({
  // Override service name from package.json
  // Allowed characters: a-z, A-Z, 0-9, -, _, and space
  serviceName: '',

  // Use if APM Server requires a token
  secretToken: '',

  // Set custom APM Server URL (default: http://localhost:8200)
  serverUrl: '',

  // Only activate the agent if it's running in production
  active: process.env.NODE_ENV === 'production'
})</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="service-name"></a><code class="literal">serviceName</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">name</code> field of <code class="literal">package.json</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_SERVICE_NAME</code>
</li></ul></div><p>Your Elastic APM service name.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="secret-token"></a><code class="literal">secretToken</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_SECRET_TOKEN</code>
</li></ul></div><p>The secret token optionally expected by the APM Server.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="server-url"></a><code class="literal">serverUrl</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">http://localhost:8200</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_SERVER_URL</code>
</li></ul></div><p>The URL to where the APM Server is deployed.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="validate-server-cert"></a><code class="literal">verifyServerCert</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_VERIFY_SERVER_CERT</code>
</li></ul></div><p>By default the agent will validate the TLS/SSL certificate of the APM Server if using HTTPS.
You can switch this behavior off by setting this option to <code class="literal">false</code>.
Disabling validation is normally required if using self-signed certificates.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="service-version"></a><code class="literal">serviceVersion</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_SERVICE_VERSION</code>
</li></ul></div><p>The version of the app currently running.
This could be the version from your <code class="literal">package.json</code> file,
a git commit reference,
or any other string that might help you pinpoint a specific version or deployment.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="active"></a><code class="literal">active</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_ACTIVE</code>
</li></ul></div><p>A boolean specifying if the agent should be active or not.
If active,
the agent will instrument incoming HTTP requests and track errors.
Normally you would not want to run the agent in your development or testing environments.
If you are using the <code class="literal">NODE_ENV</code> environment variable,
you can use this to determine the state:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">var options = {
  active: process.env.NODE_ENV === 'production'
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="instrument"></a><code class="literal">instrument</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_INSTRUMENT</code>
</li></ul></div><p>A boolean specifying if the agent should collect performance metrics for the app.</p><p>Note that both <code class="literal">active</code> and <code class="literal">instrument</code> needs to be <code class="literal">true</code> for instrumentation to be running.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="async-hooks"></a><code class="literal">asyncHooks</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_ASYNC_HOOKS</code>
</li></ul></div><p>A boolean specifying if the agent should use the experimental <a class="ulink" href="https://nodejs.org/api/async_hooks.html" target="_top">Async Hooks</a> API found in Node.js version 8.2.0 and above.
This setting has no effect when running a Node.js version older than 8.2.0.</p><p>If you experience any issues related to using Async Hooks,
please <a class="ulink" href="https://github.com/elastic/apm-agent-nodejs/issues" target="_top">open an issue</a>.</p><p>Note that not all core Node.js API’s can be instrumented without the use of Async Hooks if running Node.js 8 or above.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ignore-urls"></a><code class="literal">ignoreUrls</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Array
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">undefined</code>
</li></ul></div><p>Used to restrict requests to certain URLs from being instrumented.</p><p>This property should be set to an array containing one or more strings or <code class="literal">RegExp</code> objects.
When an incoming HTTP request is detected,
its URL will be tested against each element in this list.
If an element in the array is a <code class="literal">String</code>,
an exact match will be performed.
If an element in the array is a <code class="literal">RegExp</code> object,
its test function will be called with the URL being tested.</p><p>Note that all errors that are captured during a request to an ignored URL are still sent to the APM Server regardless of this setting.</p><p>Example usage:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">require('elastic-apm-node').start({
  ignoreUrls: [
    '/ping',
    /^\/admin\//i
  ]
})</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ignore-user-agents"></a><code class="literal">ignoreUserAgents</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Array
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">undefined</code>
</li></ul></div><p>Used to restrict requests from certain User-Agents from being instrumented.</p><p>This property should be set to an array containing one or more strings or <code class="literal">RegExp</code> objects.
When an incoming HTTP request is detected,
the User-Agent from the request headers will be tested against each element in this list.
If an element in the array is a <code class="literal">String</code>,
it’s matched against the beginning of the User-Agent.
If an element in the array is a <code class="literal">RegExp</code> object,
its test function will be called with the User-Agent string being tested.</p><p>Note that all errors that are captured during a request by an ignored user agent are still sent to the APM Server regardless of this setting.</p><p>Example usage:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">require('elastic-apm-node').start({
  ignoreUserAgents: [
    'curl/',
    /pingdom/i
  ]
})</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="capture-body"></a><code class="literal">captureBody</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">off</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_CAPTURE_BODY</code>
</li></ul></div><p>The HTTP body of incoming HTTP requests is not recorded and sent to the APM Server by default.</p><p>Possible options are: <code class="literal">off</code>, <code class="literal">all</code>, <code class="literal">errors</code>, and <code class="literal">transactions</code>.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">off</code> - request bodies will never be reported
</li><li class="listitem">
<code class="literal">errors</code> - request bodies will only be reported with errors
</li><li class="listitem">
<code class="literal">transactions</code> - request bodies will only be reported with request transactions
</li><li class="listitem">
<code class="literal">all</code> - request bodies will be reported with both errors and request transactions
</li></ul></div><p>The recorded body will be truncated if larger than 2 KiB.</p><p>For the agent to be able to access the body,
the body needs to be available as a property on the incoming HTTP <a class="ulink" href="https://nodejs.org/api/http.html#http_class_http_incomingmessage" target="_top"><code class="literal">request</code></a> object.
The agent will look for the body on the following properties:
<code class="literal">req.json || req.body || req.payload</code></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="error-on-aborted-requests"></a><code class="literal">errorOnAbortedRequests</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_ERROR_ON_ABORTED_REQUESTS</code>
</li></ul></div><p>A boolean specifying if the agent should monitor for aborted TCP connections with un-ended HTTP requests.
An error will be generated and sent to the APM Server if this happens.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="aborted-error-threshold"></a><code class="literal">abortedErrorThreshold</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Number
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">25s</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_ABORTED_ERROR_THRESHOLD</code>
</li></ul></div><p>Specify the threshold for when an aborted TCP connection with an un-ended HTTP request is considered an error.
The value is expected to be in seconds,
or should include a time suffix.</p><p>If the <code class="literal">errorOnAbortedRequests</code> property is <code class="literal">false</code>, this property is ignored.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="transaction-sample-rate"></a><code class="literal">transactionSampleRate</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Number
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">1.0</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_TRANSACTION_SAMPLE_RATE</code>
</li></ul></div><p>Specify the sampling rate to use when deciding whether to trace a request.</p><p>The value should between <code class="literal">0.0</code> and <code class="literal">1.0</code> where <code class="literal">1.0</code> is 100% of all requests.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="hostname"></a><code class="literal">hostname</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> OS hostname
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_HOSTNAME</code>
</li></ul></div><p>The OS hostname is automatically logged along with all errors and transactions.
If you want to overwrite this,
use this option.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="framework-name"></a><code class="literal">frameworkName</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_FRAMEWORK_NAME</code>
</li></ul></div><p>Set the name of the web framework used by the instrumented service/application.
The name will be available as metadata for all errors and transactions sent to the APM Server.
This can be useful for debugging and filtering.</p><p>By default,
the agent will set the value of this config option if the framework can be detected automatically.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="framework-version"></a><code class="literal">frameworkVersion</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_FRAMEWORK_VERSION</code>
</li></ul></div><p>Set the version of the web framework used by the instrumented service/application.
The version will be available as metadata for all errors and transactions sent to the APM Server.
This can be useful for debugging and filtering.</p><p>By default,
the agent will set the value of this config option if the framework can be detected automatically.</p><p>Example of setting <a class="link" href="configuration.html#framework-name" title="frameworkName"><code class="literal">frameworkName</code></a> and <code class="literal">frameworkVersion</code> for a framework named <code class="literal">my-custom-framework</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">// read the version from the package.json file
var frameworkVersion = require('my-custom-framework/package').version

require('elastic-apm-node').start({
  frameworkName: 'my-custom-framework',
  frameworkVersion: frameworkVersion
})</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="log-level"></a><code class="literal">logLevel</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">'info'</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_LOG_LEVEL</code>
</li></ul></div><p>Set the verbosity level for the agent.
Note that this does not have any influence on the types of errors that are sent to the APM Server.
This only controls how chatty the agent is in your logs.
This only applies when not using a custom logger.</p><p>Possible levels are: <code class="literal">trace</code>, <code class="literal">debug</code>, <code class="literal">info</code>, <code class="literal">warn</code>, <code class="literal">error</code>, and <code class="literal">fatal</code>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="logger"></a><code class="literal">logger</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> object
</li></ul></div><p>Set a custom logger, e.g. <a class="ulink" href="https://github.com/trentm/node-bunyan" target="_top">bunyan</a>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">require('elastic-apm-node').start({
  logger: require('bunyan')({ level: 'info' })
})</pre></div><p>If no custom logger is provided,
the agent will use its built-in logger which will log to STDOUT and STDERR depending on the log level.</p><p>The logger should expose the following functions: <code class="literal">trace</code>, <code class="literal">debug</code>,<code class="literal">info</code>, <code class="literal">warn</code>, <code class="literal">error</code>, and <code class="literal">fatal</code>.</p><p>Note that if a custom logger is provided, the <code class="literal">logLevel</code> option will be ignored.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="capture-exceptions"></a><code class="literal">captureExceptions</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_CAPTURE_EXCEPTIONS</code>
</li></ul></div><p>Whether or not the agent should monitor for uncaught exceptions and send them to the APM Server automatically.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="capture-error-log-stack-traces"></a><code class="literal">captureErrorLogStackTraces</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">messages</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_CAPTURE_ERROR_LOG_STACK_TRACES</code>
</li></ul></div><p>Normally only <code class="literal">Error</code> objects have a stack trace associated with them.
This stack trace is stored along with the error message when the error is sent to the APM Server.
The stack trace points to the place where the <code class="literal">Error</code> object was instantiated.</p><p>But sometimes its valuable to know,
not where the <code class="literal">Error</code> was instantiated,
but where it was detected.
For instance,
when an error happens deep within a database driver,
the location where the error bubbles up to,
is sometimes more useful for debugging,
than where the error occurred.</p><p>Set this config option to <code class="literal">always</code> to — besides the error stack trace — also capture a stack trace at the location where <a class="link" href="agent-api.html#apm-capture-error" title="apm.captureError()"><code class="literal">captureError</code></a> was called.</p><p>By default,
this config option has the value <code class="literal">messages</code>,
which means that a stack trace of the capture location will be recorded only when <code class="literal">captureError</code> is called with either a <a class="link" href="agent-api.html#message-strings" title="Message strings">string</a> or the <a class="link" href="agent-api.html#parameterized-message-object" title="Parameterized message object">special parameterized message object</a>,
in which case a normal stack trace isn’t available.</p><p>Set this config option to <code class="literal">never</code> to never record a capture location stack trace.</p><p>A capture location stack trace is never generated for uncaught exceptions.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="capture-span-stack-traces"></a><code class="literal">captureSpanStackTraces</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_CAPTURE_SPAN_STACK_TRACES</code>
</li></ul></div><p>Set this option to <code class="literal">false</code> to disable capture of stack traces for measured spans during instrumentation.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="source-context-error"></a><code class="literal">sourceLinesErrorAppFrames</code> + <code class="literal">sourceLinesErrorLibraryFrames</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>When an error is captured by the agent,
its stack trace is stored in Elasticsearch.</p><p>By default, the agent will also collect a few lines of source code around the lines for each frame in the stack trace.
This can make it easier to determine the cause of an error as the source code related to the error is visible directly in Kibana.</p><p>The agent differentiates between so-called in-app frames and library frames.
Library frames are frames belonging to Node core and code inside the applications <code class="literal">node_modules</code> folder.
In-app frames are everything else.</p><p>Use the following two config options to change how many lines of source code to include for the different types of stack frames:</p><p><a id="source-context-error-app-frames"></a><span class="strong strong"><strong><code class="literal">sourceLinesErrorAppFrames</code></strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Number
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">5</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_SOURCE_LINES_ERROR_APP_FRAMES</code>
</li></ul></div><p>The default value <code class="literal">5</code> means that 5 lines of source code will be collected for in-app error frames.
2 lines above the stack frame line + 2 below + the stack frame line itself.</p><p>Setting this config option to <code class="literal">0</code> means that no source code will be collected for in-app error frames.</p><p><a id="source-context-error-library-frames"></a><span class="strong strong"><strong><code class="literal">sourceLinesErrorLibraryFrames</code></strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Number
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">5</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_SOURCE_LINES_ERROR_LIBRARY_FRAMES</code>
</li></ul></div><p>The default value <code class="literal">5</code> means that 5 lines of source code will be collected for error library frames.
2 lines above the stack frame line + 2 below + the stack frame line itself.</p><p>Setting this config option to <code class="literal">0</code> means that no source code will be collected for error library frames.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="source-context-span"></a><code class="literal">sourceLinesSpanAppFrames</code> + <code class="literal">sourceLinesSpanLibraryFrames</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>When a span is recorded by the agent,
a stack trace is recorded together with the span,
pointing to the location where the span was initiated.
This stack trace is stored in Elasticsearch along with the other span data.</p><p>By default, the agent will also collect a few lines of source code around the lines for each frame in the stack trace.
This can make it easier to determine why and how the span was initiated as the source code related to the span is visible directly in Kibana.</p><p>The agent differentiates between so-called in-app frames and library frames.
Library frames are frames belonging to Node core and code inside the applications <code class="literal">node_modules</code> folder.
In-app frames are everything else.</p><p>Use the following two config options to change how many lines of source code to include for the different types of stack frames:</p><p><a id="source-context-span-app-frames"></a><span class="strong strong"><strong><code class="literal">sourceLinesSpanAppFrames</code></strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Number
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">0</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_SOURCE_LINES_SPAN_APP_FRAMES</code>
</li></ul></div><p>The default value <code class="literal">0</code> means that no source code will be collected for in-app span frames.</p><p><a id="source-context-span-library-frames"></a><span class="strong strong"><strong><code class="literal">sourceLinesSpanLibraryFrames</code></strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Number
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">0</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_SOURCE_LINES_SPAN_LIBRARY_FRAMES</code>
</li></ul></div><p>The default value <code class="literal">0</code> means that no source code will be collected for span library frames.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="error-message-max-length"></a><code class="literal">errorMessageMaxLength</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">2kb</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_ERROR_MESSAGE_MAX_LENGTH</code>
</li></ul></div><p>The maximum length allowed for error messages.
It is expressed in bytes or includes a size suffix such as <code class="literal">2kb</code>.
Size suffixes are case-insensitive and include <code class="literal">b</code>,
<code class="literal">kb</code>,
<code class="literal">mb</code>,
and <code class="literal">gb</code>.
Messages above this length will be truncated before being sent to the APM Server.</p><p>Set to <code class="literal">-1</code> do disable truncation.</p><p>This applies to the following properties:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">error.exception.message</code>
</li><li class="listitem">
<code class="literal">error.log.message</code>
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="stack-trace-limit"></a><code class="literal">stackTraceLimit</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Number
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">50</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_STACK_TRACE_LIMIT</code>
</li></ul></div><p>Setting it to <code class="literal">0</code> will disable stack trace collection.
Any finite integer value will be used as the maximum number of frames to collect.
Setting it to <code class="literal">Infinity</code> means that all frames will be collected.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="transaction-max-spans"></a><code class="literal">transactionMaxSpans</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Number
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">500</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_TRANSACTION_MAX_SPANS</code>
</li></ul></div><p>Specify the maximum number of spans to capture within a request transaction
before dropping further spans.
Setting to <code class="literal">-1</code> means that spans will never be dropped.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="api-request-time"></a><code class="literal">apiRequestTime</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">10s</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_API_REQUEST_TIME</code>
</li></ul></div><p>The agent maintains an open HTTP request to the APM Server that is used to transmit the collected transactions,
spans,
and errors to the server.</p><p>To avoid issues with intermittent proxies and load balancers,
the HTTP request is ended and a new one created at regular intervals controlled by this config option.
The value is expected to be in seconds,
or should include a time suffix.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>The HTTP request is ended before the time threshold is reached if enough bytes are sent over it.
Use the <a class="link" href="configuration.html#api-request-size" title="apiRequestSize"><code class="literal">apiRequestSize</code></a> config option to control the byte threshold.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="api-request-size"></a><code class="literal">apiRequestSize</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">750kb</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_API_REQUEST_SIZE</code>
</li></ul></div><p>The agent maintains an open HTTP request to the APM Server that is used to transmit the collected transactions,
spans,
and errors to the server.</p><p>To avoid issues with intermittent proxies and load balancers,
the HTTP request is ended and a new one created if its body becomes too large.
That limit is controlled by this config option.
The value is expected to be in bytes,
or include a size suffix such as <code class="literal">1mb</code>.
Size suffixes are case-insensitive and include <code class="literal">b</code>,
<code class="literal">kb</code>,
<code class="literal">mb</code>,
and <code class="literal">gb</code>.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>The HTTP request is otherwise ended at regular intervals controlled by the <a class="link" href="configuration.html#api-request-time" title="apiRequestTime"><code class="literal">apiRequestTime</code></a> config option.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="server-timeout"></a><code class="literal">serverTimeout</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">30s</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_SERVER_TIMEOUT</code>
</li></ul></div><p>Specify the response timeout when reporting transactions to APM Server.
The timeout should be in seconds,
or should include a time suffix.</p><p>The timeout is applied once the agent has sent the entire request body to the APM Server.
If the response from the server takes longer than allowed by this timeout,
the HTTP request is terminated and the TCP socket closed.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="filter-http-headers"></a><code class="literal">filterHttpHeaders</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li><li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code>
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_FILTER_HTTP_HEADERS</code>
</li></ul></div><p>When tracing an incoming HTTP request,
the agent will add metadata about the requests to the recorded transaction.
The same applies for errors that occur and are captured as a result of the request.</p><p>This boolean specifies if the agent should anonymize certain sensitive HTTP headers by default before they are sent to the APM Server.
When anonymized,
the header value will be set to <code class="literal">[REDACTED]</code></p><p>Currently, the following HTTP headers are anonymized by default:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">Authorization</code> - The full value of this header is redacted
</li><li class="listitem">
<code class="literal">Cookie</code> - The cookies inside the <code class="literal">Cookie</code> header are analyzed and their values redacted if they appear sensitive (like a session cookie).
  See the <a class="ulink" href="https://github.com/watson/is-secret" target="_top">is-secret</a> module for details about which patterns are considered sensitive.
</li></ul></div><p>If you wish to filter or sanitize other data,
use one of the <a class="link" href="agent-api.html#apm-add-filter" title="apm.addFilter()">filtering</a> functions.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="disable-instrumentations"></a><code class="literal">disableInstrumentations</code><a href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Array of strings
</li><li class="listitem">
<span class="strong strong"><strong>Env:</strong></span> <code class="literal">ELASTIC_APM_DISABLE_INSTRUMENTATIONS</code>
</li></ul></div><p>Array or comma-separated string of modules to disable instrumentation for.
When instrumentation is disabled for a module,
no spans will be collected for that module.</p><p>Example using options object:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">require('elastic-apm-node').start({
  disableInstrumentations: ['graphql', 'express-graphql']
})</pre></div><p>Example using environment variable:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-bash">ELASTIC_APM_DISABLE_INSTRUMENTATIONS=graphql,express-graphql</pre></div><p>For an always up-to-date list of modules for which instrumentation can be disabled,
see the <a class="ulink" href="https://github.com/elastic/apm-agent-nodejs/tree/master/lib/instrumentation/modules" target="_top">lib/instrumentation/modules</a> folder in the agent repository.
Note that not all modules represented in this directory will generate spans,
and adding those to this array has no effect.</p></div></div><div class="navfooter"><span class="prev"><a href="agent-api.html">
              « 
              <code class="literal">Agent</code> API</a>
           
        </span><span class="next">
           
          <a href="transaction-api.html"><code class="literal">Transaction</code> API
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
					<div id="rtpcontainer" style="display: block;">
						<div class="mktg-promo">
						<h3>Getting Started Videos</h3>
						<ul class="icons">
							<li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
							<li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
							<li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
						</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

        </div>
      	


<div id="footer-subscribe" class="home-footer-subscribe">
  <div class="subscribe-wrapper">
    <div class="container">
      <div class="subscribe-form-container">
        <div class="subscribe-title col-md-12 col-lg-6">
            <h5>Be in the know with the latest and greatest from Elastic.</h5>
        </div>
        <div class="subscribe-form col-md-12 col-lg-6">
          <form class="mktoForm sb-form"></form>
        </div>
      </div>
      <div class="form_thanks hide">
        
          <p>Thanks for subscribing! We'll keep you updated with new releases.</p>
        
      </div>
    </div>
  </div>
</div>
<!--subscribe newsletter end-->

<!-- Footer Section -->
<footer class="footer-wrapper">
  <div class="container">
    <div class="row footer-content">
        
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3><a href="/products">Products ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/products/elasticsearch">Elasticsearch</a></li>
                  
                
              
                
                  
                    <li><a href="/products/kibana">Kibana</a></li>
                  
                
              
                
                  
                    <li><a href="/products/beats">Beats</a></li>
                  
                
              
                
                  
                    <li><a href="/products/logstash">Logstash</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack">Stack Features (formerly X-Pack)</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/security">Security</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/alerting">Alerting</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/canvas">Canvas</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/monitoring">Monitoring</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/graph">Graph</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/reporting">Reporting</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/machine-learning">Machine Learning</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/elasticsearch-sql">Elasticsearch SQL</a></li>
                  
                
              
                
                  
                    <li><a href="/products/hadoop">Elasticsearch-Hadoop</a></li>
                  
                
              
                
                  
                    <li><a href="/products/ece">Elastic Cloud Enterprise</a></li>
                  
                
              
              </ul>
              
                <h3><a href=""></a></h3>
              
              
              
              <ul class="">
              
              </ul>
          </div>    
      
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3><a href="/solutions">Solutions ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/solutions/logging">Logging</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/metrics">Metrics</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/site-search">Site Search</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/security-analytics">Security Analytics</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/apm">APM</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/app-search">App Search</a></li>
                  
                
              
              </ul>
              
                <h3><a href="/cloud">Elastic Cloud ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/cloud/elasticsearch-service">Elasticsearch Service</a></li>
                  
                
              
                
                  
                    <li><a href="/aws-elasticsearch-service">AWS Elasticsearch Service Comparison</a></li>
                  
                
              
                
                  
                    <li><a href="/cloud/app-search-service">Elastic App Search Service</a></li>
                  
                
              
                
                  
                    <li><a href="/cloud/site-search-service">Elastic Site Search Service</a></li>
                  
                
              
              </ul>
          </div>    
      
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3>Resources</h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/blog">Blog</a></li>
                  
                
              
                
                  
                    <li><a href="https://cloud-status.elastic.co">Cloud Status</a></li>
                  
                
              
                
                  
                    <li><a href="/community">Community</a></li>
                  
                
              
                
                  
                    <li><a href="/use-cases">Customers & Use Cases</a></li>
                  
                
              
                
                  
                    <li><a href="/guide">Documentation</a></li>
                  
                
              
                
                  
                    <li><a href="/elasticon">Elastic{ON} Events</a></li>
                  
                
              
                
                  
                    <li><a href="https://discuss.elastic.co/">Forums</a></li>
                  
                
              
                
                  
                    <li><a href="/community/meetups">Meetups</a></li>
                  
                
              
                
                  
                    <li><a href="/subscriptions">Subscriptions</a></li>
                  
                
              
                
                  
                    <li><a href="https://support.elastic.co">Support Portal</a></li>
                  
                
              
                
                  
                    <li><a href="/videos">Videos & Webinars</a></li>
                  
                
              
                
                  
                    <li><a href="/training">Training</a></li>
                  
                
              
              </ul>
              
                <h3></h3>
              
              
              
              <ul class="">
              
              </ul>
          </div>    
      
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3><a href="/about">About ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/about/careers">Careers/Jobs</a></li>
                  
                
              
                
                  
                    <li><a href="/about/our-source-code">Our Source Code</a></li>
                  
                
              
                
                  
                    <li><a href="/about/teams">Teams</a></li>
                  
                
              
                
                  
                    <li><a href="/about/teams/board">Board of Directors</a></li>
                  
                
              
                
                  
                    <li><a href="/about/teams/leadership">Leadership</a></li>
                  
                
              
                
                  
                    <li><a href="/contact">Contact</a></li>
                  
                
              
                
                  
                    <li><a href="/about/history-of-elasticsearch">Our Story</a></li>
                  
                
              
                
                  
                    <li><a href="/about/why-open-source">Why Open Source</a></li>
                  
                
              
                
                  
                    <li><a href="/about/distributed">Distributed by Intention</a></li>
                  
                
              
                
                  
                    <li><a href="/about/partners">Partners</a></li>
                  
                
              
                
                  
                    <li><a href="/about/press">Media</a></li>
                  
                
              
                
                  
                    <li><a href="https://ir.elastic.co">Investor Relations</a></li>
                  
                
              
                
                  
                    <li><a href="https://www.elastic.shop">Elastic Store</a></li>
                  
                
              
              </ul>
              
                <h3><a href=""></a></h3>
              
              
              
              <ul class="">
              
              </ul>
          </div>    
       
    </div>
     <!-- Social Media Section -->
    <div class="row social-icon">
      <div class="col-xs-12 col-sm-12 col-md-6 col-md-offset-3">
	    <div class="row">
		     <div class="follow-us col-xs-12 col-sm-12 col-md-12">
			    <div class="social-label">FOLLOW US</div>
			    <ul class="social-icon-list">
          
          		 	<li class="Facebook"><a id="footer_facebook" href="https://www.facebook.com/elastic.co">Facebook</a></li>
          
          		 	<li class="Twitter"><a id="footer_twitter" href="https://www.twitter.com/elastic">Twitter</a></li>
          
          		 	<li class="LinkedIn"><a id="footer_linkedin" href="https://www.linkedin.com/company/elastic-co">LinkedIn</a></li>
          
          		 	<li class="Xing"><a id="footer_xing" href="https://www.xing.com/companies/elastic.co">Xing</a></li>
          
          		 	<li class="YouTube"><a id="footer_youtube" href="https://www.youtube.com/user/elasticsearch">YouTube</a></li>
          
		  		</ul>
		     </div>
	    </div>
      </div>
    </div>
    <!-- Social Media Section end-->
    <div class="row">
	<div class="col-xs-12 col-sm-12 col-md-11">
		<div class="copyright">
			<ul>
				<li><a href="/legal/trademarks">Trademarks</a></li>
				<li><a href="/legal/terms-of-use">Terms of Use</a></li>
				<li><a href="/legal/privacy-statement">Privacy</a></li>
				<li><a href="/brand">Brand</a></li>
			</ul>
			<div class="copyright-content">
				<div class="footer-text">
					<p>© 2018. Elasticsearch B.V. All Rights Reserved
					</p>
					<p>Elasticsearch is a trademark of Elasticsearch B.V., registered in the U.S. and in other countries.
					</p>
					<p>Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a> in the United States and/or other countries.
					</p>
				</div>
			</div>
		</div>
	</div>
	<div class="col-xs-2 col-xs-offset-5 col-sm-1 col-sm-offset-5 col-md-1 col-md-offset-0">
		<div class="footer-logo"><a href="/"><img src="/static/images/svg/logo-elastic-footer-stacked-999.svg" class="img-responsive"></a>
		</div>
	</div>
</div>
  </div>
</footer>
<!-- Footer Section end-->

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>
 
     
<script type="text/javascript">
$(document).ready(function(){
	if (window.location.hash.length) {
	      var target = $(window.location.hash);
	      target = target.length ? target : $(window.location.hash);
	      if (target.length) {
	        setTimeout(function(){ $(window).scrollTop(target.offset().top - 60); }, 1200);        
	      }
	}
	$('#guide').on('click','a[href*=#]:not([href=#])',function(e) {
			var flag=true;
		      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
		          var target = $(this.hash);
		          target = target.length ? target :$(this.hash);
		          if (target.length) {
		            if(flag){
		              flag=false;
		              var heightScroll=($('.tertiary-nav.navbar-fixed-top').height())?60:110;
		              $('html,body').animate({
		                  scrollTop: target.offset().top - heightScroll
		                }, 2000, function(){
		                  flag=true;
		                });
		            }                    
		          }
		      }
		    
	});

})

</script>

     <style></style>
     
  
            <script type="text/javascript" src="docs.js"></script>
<script type='text/javascript' src='https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=yaml'></script>

            </body>
        
</html>