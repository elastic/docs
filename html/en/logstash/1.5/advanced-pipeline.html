
<!DOCTYPE HTML>
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Setting Up an Advanced Logstash Pipeline</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference [1.5]" /><link rel="up" href="getting-started-with-logstash.html" title="Getting Started with Logstash" /><link rel="prev" href="first-event.html" title="Stashing Your First Event: Basic Logstash Example" /><link rel="next" href="package-repositories.html" title="Package Repositories" /><meta name="DC.type" content="Docs/Logstash/Reference/1.5" />
  
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
 	<!-- RTP tag --> 
	<script type='text/javascript' async>
	(function(c,h,a,f,i,e){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
	 c[a].a=i;c[a].e=e;var g=h.createElement("script");g.async=true;g.type="text/javascript";
	 g.src=f+'?aid='+i;var b=h.getElementsByTagName("script")[0];b.parentNode.insertBefore(g,b);
	 })(window,document,"rtp","//sjrtp2-cdn.marketo.com/rtp-api/v1/rtp.js","elasticco");
	 
	rtp('send','view');
	rtp('get', 'campaign',true);
	</script>
	<!-- End of RTP tag -->
	
 	<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png?change=123">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png?change=123">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png?change=123">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png?change=123">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png?change=123">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png?change=123">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png?change=123">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png?change=123">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png?change=123">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png?change=123">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?change=123">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png?change=123">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?change=123">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<script type="text/javascript">visitor_count = ""</script>
<script type="text/javascript">mod_value = ""</script>


	<meta name="description" content="" />

	<link rel="canonical" href="" />

	<meta property="og:image" content="https://www.elastic.co/static/img/elastic-logo-200.png" />

	<!-- <link rel="shortcut icon" href="/favicon.ico?change=550" type="image/x-icon">
	<link rel="icon" href="/favicon.ico?change=550" type="image/x-icon"> -->
	<!-- For third-generation iPad with high-resolution Retina display: -->
	<!-- <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png?change=550"> -->

	<!-- For iPhone with high-resolution Retina display: -->

	<!-- <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png?change=550"> -->

	<!-- For first- and second-generation iPad: -->

	<!-- <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png?change=550"> -->
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'> -->
	
	<link type="text/css" rel="stylesheet" href="https://static-www.elastic.co/static/css/skel.css" />	
	<link type="text/css" rel="stylesheet" href="https://static-www.elastic.co/static/css/style.css?clr=140" />	
	<script src="https://static-www.elastic.co/static/js/skel.min.js"></script>
	
		<script type="text/javascript">form_name = "" ; cdn_url="https://static-www.elastic.co"</script>
		
	<script src="https://static-www.elastic.co/static/js/init.js?clr=151"></script>
	<script src="https://static-www.elastic.co/static/js/jquery.min.js"></script>
	<script src="https://static-www.elastic.co/static/js/jquery.cookie.js"></script>
	<!--<script type="text/javascript">
	    (function() {
	        var path = '//easy.myfonts.net/v2/js?sid=10336(font-family=Avenir+35+Light)&sid=10338(font-family=Avenir+55+Roman)&sid=10340(font-family=Avenir+85+Heavy)&sid=10344(font-family=Avenir+65+Medium)&key=nAD6PCOPrX',
	            protocol = ('https:' == document.location.protocol ? 'https:' : 'http:'),
	            trial = document.createElement('script');
	        trial.type = 'text/javascript';
	        trial.async = true;
	        trial.src = protocol + path;
	        var head = document.getElementsByTagName("head")[0];
	        head.appendChild(trial);
	    })();
	</script>-->

	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />
	<script type="text/javascript" src="/static/js/prettify.js"></script>

	

<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			


<div class="container w100">
	<div class="row">
		<div class="12u">
			

<section class="first-container">
	<div class="row">
		<div class="8u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 130" preserveAspectRatio="xMinYMin meet" enable-background="new 0 0 400 130" xml:space="preserve">
    <g>
    	<g>
    		<path fill="#FFFFFF" d="M122.5,67.8c0-10.3-6.4-19.2-15.9-22.7c0.4-2.2,0.6-4.3,0.6-6.6c0-19.1-15.5-34.6-34.6-34.6
    			c-11.1,0-21.5,5.3-28,14.4c-3.2-2.5-7.1-3.8-11.2-3.8c-10.1,0-18.4,8.2-18.4,18.4c0,2.2,0.4,4.4,1.1,6.4C6.5,42.6,0,51.8,0,62
    			c0,10.3,6.4,19.3,16,22.8c-0.4,2.1-0.6,4.3-0.6,6.6c0,19,15.5,34.5,34.5,34.5c11.2,0,21.5-5.4,28-14.4c3.2,2.5,7.2,3.9,11.3,3.9
    			c10.1,0,18.4-8.2,18.4-18.4c0-2.2-0.4-4.4-1.1-6.4C115.9,87.2,122.5,78,122.5,67.8z"/>
    		<g>
    			<path fill="#F4BD19" d="M47.9,56.3l27.3,12.5l27.6-24.2c0.4-2,0.6-4,0.6-6.1c0-17-13.8-30.8-30.8-30.8c-10.2,0-19.7,5-25.4,13.4
    				l-4.6,23.8L47.9,56.3z"/>
    		</g>
    		<g>
    			<path fill="#3CBEB1" d="M19.6,85.2c-0.4,2-0.6,4.1-0.6,6.2c0,17,13.9,30.9,30.9,30.9c10.3,0,19.8-5.1,25.6-13.5L80,85l-6.1-11.6
    				L46.5,60.9L19.6,85.2z"/>
    		</g>
    		<g>
    			<path fill="#E9478C" d="M19.4,37.9l18.7,4.4L42.3,21c-2.6-2-5.7-3-9-3c-8.1,0-14.8,6.6-14.8,14.8C18.5,34.5,18.8,36.3,19.4,37.9z
    				"/>
    		</g>
    		<g>
    			<path fill="#2C458F" d="M17.8,42.4C9.4,45.1,3.6,53.2,3.6,62c0,8.6,5.3,16.3,13.3,19.3l26.3-23.8l-4.8-10.3L17.8,42.4z"/>
    		</g>
    		<g>
    			<path fill="#95C63D" d="M80.3,108.7c2.6,2,5.7,3.1,8.9,3.1c8.1,0,14.8-6.6,14.8-14.8c0-1.8-0.3-3.5-0.9-5.1l-18.7-4.4L80.3,108.7
    				z"/>
    		</g>
    		<g>
    			<path fill="#176655" d="M84.1,82.6l20.6,4.8c8.4-2.8,14.2-10.8,14.2-19.6c0-8.6-5.3-16.2-13.3-19.3l-27,23.6L84.1,82.6z"/>
    		</g>
    	</g>
    	<path d="M162.8,76.3c0,0.1,0,0.6,0.1,1.4c0.1,0.8,0.3,1.8,0.6,3c0.3,1.1,0.8,2.4,1.4,3.7c0.6,1.3,1.4,2.5,2.5,3.6
    		c1,1.1,2.3,2,3.8,2.7c1.5,0.7,3.4,1.1,5.6,1.1c1.8,0,3.3-0.1,4.6-0.4c1.3-0.3,2.4-0.7,3.4-1.3c1-0.6,1.9-1.3,2.7-2.2
    		c0.8-0.9,1.6-1.9,2.4-3.1c0.5-0.7,1-1.2,1.6-1.5c0.6-0.3,1.2-0.4,1.8-0.4c1,0,2,0.4,2.8,1.1c0.9,0.7,1.3,1.7,1.3,2.8
    		c0,0.7-0.4,1.7-1.1,3.1c-0.7,1.4-1.9,2.8-3.6,4.1c-1.6,1.4-3.7,2.6-6.3,3.6c-2.6,1-5.7,1.5-9.5,1.5c-3.8,0-7.2-0.7-10.2-2.1
    		c-3-1.4-5.5-3.2-7.5-5.6c-2-2.3-3.6-5-4.7-8.1c-1.1-3.1-1.6-6.3-1.6-9.7c0-3.5,0.5-6.8,1.6-9.9c1.1-3.1,2.7-5.8,4.7-8.1
    		c2-2.3,4.5-4.1,7.4-5.5c2.9-1.3,6.1-2,9.6-2c3.3,0,6.3,0.5,9.2,1.5c2.8,1,5.3,2.4,7.4,4.3c2.1,1.9,3.7,4.1,5,6.8
    		c1.2,2.7,1.8,5.8,1.8,9.2c0,2.1-0.5,3.7-1.6,4.8c-1,1.1-2.2,1.6-3.6,1.6H162.8z M170.9,56.4c-1.5,0.6-2.7,1.4-3.7,2.4
    		c-1,0.9-1.8,2-2.4,3.1c-0.6,1.1-1,2.2-1.3,3.2c-0.3,1-0.5,1.8-0.5,2.5c-0.1,0.7-0.1,1.1-0.1,1.2h27.9c0-1.8-0.3-3.5-0.9-5.1
    		c-0.6-1.6-1.5-3-2.6-4.3c-1.2-1.2-2.7-2.2-4.5-3c-1.8-0.7-4-1.1-6.5-1.1C174.2,55.5,172.4,55.8,170.9,56.4z"/>
    	<path d="M214.3,94.6c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V35.1
    		c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,1.9,1.3,3.2V94.6z"/>
    	<path d="M229.8,63.5c-0.6,0.3-1.2,0.5-1.9,0.5c-1.2,0-2.2-0.4-3.2-1.1c-1-0.7-1.5-1.8-1.5-3.1c0-0.5,0.1-1.1,0.4-1.9
    		c0.5-1.2,1.2-2.4,2.1-3.6c0.9-1.2,2-2.2,3.5-3.1s3.3-1.7,5.4-2.2c2.2-0.5,4.8-0.8,7.9-0.8c5.9,0,10.5,1.2,14,3.5
    		c3.5,2.3,5.2,5.8,5.2,10.3v32.8c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2v-2
    		c-1.2,2-4.7,4.5-7.5,5.3c-2.8,0.8-5.7,1.2-8.8,1.2c-2,0-3.9-0.3-5.9-0.8c-2-0.5-3.8-1.4-5.3-2.5c-1.6-1.1-2.9-2.6-3.8-4.3
    		c-1-1.7-1.5-3.8-1.5-6.2c0-2.8,0.5-5.7,1.6-7.5c1.1-1.9,2.6-3.4,4.4-4.6c1.8-1.2,3.9-2.1,6.3-2.8c2.4-0.6,4.9-1.1,7.5-1.4
    		c3-0.3,5.4-0.7,7.2-1.2c1.7-0.4,3-0.9,3.9-1.5c0.9-0.6,1.4-1.2,1.6-2c0.2-0.7,0.3-1.6,0.3-2.5c0-1.1-0.3-2-0.9-2.8
    		c-0.6-0.8-1.4-1.5-2.4-2c-1-0.5-2.1-0.9-3.3-1.2s-2.4-0.4-3.5-0.4c-2.1,0-3.7,0.2-5,0.5c-1.3,0.3-2.3,0.8-3.1,1.4
    		c-0.8,0.6-1.5,1.3-1.9,2.1c-0.5,0.8-0.9,1.6-1.3,2.5C230.9,62.6,230.4,63.1,229.8,63.5z M250.6,74.4c-1.1,0.3-2.4,0.6-3.8,0.8
    		c-1.5,0.2-3,0.4-4.6,0.6c-1.6,0.2-3.1,0.5-4.6,0.9c-1.5,0.3-2.8,0.8-4,1.5c-1.2,0.7-2.2,1.5-2.9,2.5c-0.7,1-1.1,3-1.1,4.6
    		c0,1.3,0.3,2.3,0.8,3.1c0.5,0.8,1.2,1.5,2.1,2c0.9,0.5,1.8,0.8,2.9,1c1.1,0.2,2.2,0.3,3.3,0.3c1.7,0,3.3-0.2,5-0.6
    		c1.7-0.4,3.2-1,4.5-1.9s2.4-2,3.3-3.5c0.8-1.4,1.2-3.8,1.2-5.9v-6.1L250.6,74.4z"/>
    	<path d="M307.6,90.9c-1.1,2-2.7,3.6-4.6,4.8s-4.1,2.1-6.6,2.7c-2.5,0.5-5.2,0.8-7.9,0.8c-3.9,0-7.2-0.6-9.9-1.8
    		c-2.7-1.2-4.9-2.6-6.5-4.1c-1.7-1.6-2.9-3.1-3.7-4.7c-0.7-1.6-1.1-2.7-1.1-3.5c0-1.3,0.5-2.4,1.4-3.2c0.9-0.8,2-1.2,3.1-1.2
    		c0.7,0,1.3,0.2,2,0.6c0.6,0.4,1.1,1,1.5,1.9c1,2.5,2.5,4.5,4.7,6.2c2.2,1.7,5.2,2.5,9.3,2.5c1.8,0,3.4-0.2,4.7-0.6
    		c1.3-0.4,2.4-1,3.2-1.7c0.8-0.7,1.4-1.5,1.9-2.4c0.4-0.9,0.6-1.8,0.6-2.8c0-2-0.8-3.4-2.3-4.4c-1.5-1-3.5-1.7-5.8-2.3
    		c-2.3-0.6-4.8-1.1-7.5-1.6c-2.7-0.5-5.2-1.2-7.5-2.2c-2.3-0.9-4.2-2.3-5.8-4c-1.6-1.8-2.3-4.2-2.3-7.3c0-4.5,1.6-8,4.9-10.5
    		c3.3-2.5,7.8-3.8,13.7-3.8c3.3,0,6,0.3,8.3,1c2.2,0.7,4.1,1.6,5.5,2.7c0.6,0.5,1.2,1,1.8,1.7c0.6,0.7,1.2,1.4,1.8,2.2
    		c0.6,0.8,1,1.5,1.4,2.3c0.4,0.7,0.6,1.4,0.6,2c0,1.3-0.5,2.4-1.6,3.1c-1,0.8-2.2,1.2-3.4,1.2c-0.7,0-1.5-0.1-2.1-0.6
    		c-0.6-0.6-1-1.3-1.3-1.8c-0.5-1.1-1.1-2-1.7-2.8c-0.5-0.8-1.2-1.5-2-2c-0.8-0.5-1.8-0.9-3-1.2c-1.2-0.3-2.7-0.4-4.4-0.4
    		c-3.5,0-6,0.6-7.6,1.7c-1.6,1.1-2.4,2.5-2.4,4.2c0,1.3,0.5,2.3,1.4,3.1c0.9,0.8,2.1,1.4,3.7,2c1.5,0.5,3.3,1,5.2,1.4
    		c2,0.4,3.9,0.8,5.9,1.3c2,0.5,4,1.1,5.9,1.7c1.9,0.7,3.7,1.6,5.2,2.7c1.5,1.1,2.7,2.5,3.7,4.1c0.9,1.6,1.4,3.6,1.4,6
    		C309.4,86.4,308.8,88.9,307.6,90.9z"/>
    	<path d="M327.4,48.8h4.7c1.1,0,2,0.4,2.8,1.2c0.8,0.8,1.2,1.7,1.2,2.8c0,1.1-0.4,2.1-1.2,2.8s-1.7,1.1-2.8,1.1h-4.7v37.9
    		c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-2,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V56.7h-4.6c-1.1,0-2-0.4-2.8-1.1
    		c-0.8-0.7-1.2-1.7-1.2-2.8c0-1.1,0.4-2,1.2-2.8c0.8-0.8,1.7-1.2,2.8-1.2h4.6V39c0-1.3,0.4-2.3,1.3-3.2s1.9-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3s1.3,1.9,1.3,3.2V48.8z"/>
    	<path d="M341.5,32.1c1-1,2.2-1.5,3.7-1.5c1.4,0,2.6,0.5,3.6,1.5c1,1,1.5,2.2,1.5,3.6c0,1.4-0.5,2.6-1.5,3.6c-1,1-2.2,1.5-3.6,1.5
    		c-1.4,0-2.7-0.5-3.7-1.5c-1-1-1.5-2.2-1.5-3.6C340,34.2,340.5,33,341.5,32.1z M349.6,94.6c0,1.3-0.4,2.3-1.3,3.2
    		c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V53.3c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,2,1.3,3.2V94.6z"/>
    	<path d="M369.1,97.3c-2.9-1.2-5.4-3-7.5-5.2c-2.1-2.2-3.8-4.9-5-8.1c-1.2-3.1-1.8-6.6-1.8-10.4c0-3.8,0.6-7.3,1.8-10.5
    		c1.2-3.1,2.9-5.8,5-8.1c2.1-2.2,4.6-4,7.5-5.2c2.9-1.2,6-1.9,9.4-1.9c3.4,0,6.4,0.5,9,1.5c2.5,1,4.6,2.2,6.2,3.6
    		c1.6,1.4,3.2,2.9,4,4.4c0.5,0.9,0.9,1.5,0.9,2.6c0,1.3-0.5,2.3-1.4,3.1c-0.9,0.7-2,1.1-3.1,1.1c-0.8,0-1.6-0.2-2.2-0.6
    		c-0.7-0.4-1.2-1.3-1.8-2.1c-1-1.4-0.5-0.6-1.1-1.5c-0.7-0.9-1.5-1.6-2.5-2.3c-1-0.7-2.2-1.2-3.5-1.6c-1.4-0.4-2.8-0.6-4.4-0.6
    		c-1.8,0-3.5,0.3-5.3,1c-1.8,0.7-3.3,1.7-4.7,3.1c-1.4,1.4-2.5,3.3-3.4,5.6s-1.3,5.1-1.3,8.4c0,3.3,0.4,6.1,1.3,8.4s2,4.2,3.4,5.6
    		c1.4,1.4,3,2.5,4.7,3.1c1.8,0.7,3.5,1,5.3,1c1.6,0,3.1-0.2,4.4-0.6c1.3-0.4,2.5-0.9,3.5-1.6c1-0.7,1.8-1.5,2.5-2.3
    		c0.7-0.9,1.1-1.8,1.4-2.7c0.3-1,0.8-1.7,1.5-2.1c0.7-0.4,1.4-0.6,2.2-0.6c1.1,0,2.2,0.4,3.1,1.1c0.9,0.7,1.4,1.7,1.4,3
    		c0,0.6-0.3,1.7-0.9,3.1c-0.6,1.5-1.6,2.9-3.1,4.4c-1.5,1.5-3.5,2.8-6.2,4c-2.6,1.1-6,1.7-10,1.7C375.1,99.2,372,98.5,369.1,97.3z"
    		/>
    </g>
</svg>
						</div>
					</a>
				</h1>
			</div>
			<!-- Searchbar Input box -->
			<form method="get" action="/search" name="searchForm" class="header-search-form" id="searchMobileFrm">
			   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
			</form>
			<div class="mobile-auto-complete"></div> 
		</div>
		<div class="4u 6u(small) 6u(xsmall)">
			<!-- Mobile Menu -->
			<div class="mobile-menu-wrapper">
				<ul class="m-shortcuts">
					
					<li><a href="#" class="m-search" id="header-search"></a></li>
					
					<li><a href="/guide" class="m-docs" id="mobile-docs"></a></li>
					
					<li><a href="/contact" class="m-contact" id="mobile-contact"></a></li>
					
				</ul>											
				<nav class="nav-menu">
					<div class="menu-button">
						<span></span>
					</div>
					<div class="nav-menu-list-wrap">
						<div class="nav-menu-list">
							
								<h3><a href="/products" id="nav_products" >Products</a></h3>

								
								<ul>
									
									<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>
									
									<li><a href="/found" id="nav_hosted-elasticsearch" >elasticsearch as a service</a></li>
									
									<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>
									
									<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>
									
									<li><a href="/products/beats" id="nav_beats" >beats</a></li>
									
									<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>
									
									<li><a href="/products/shield" id="nav_shield" >shield</a></li>
									
									<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>
									
									<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>
									
									<li><a href="/downloads" id="nav_downloads" >downloads</a></li>
									
								</ul>
								
							
								<h3><a href="/subscriptions" id="nav_subscriptions" >Subscriptions</a></h3>

								
							
								<h3><a href="/learn" id="nav_learn" >Learn</a></h3>

								
								<ul>
									
									<li><a href="/guide" id="nav_guide" >docs</a></li>
									
									<li><a href="/videos" id="nav_videos" >videos</a></li>
									
									<li><a href="/training" id="nav_training" >training</a></li>
									
									<li><a href="/services" id="nav_services" >services</a></li>
									
									<li><a href="/blog" id="nav_learn_blog" >blog</a></li>
									
									<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>
									
								</ul>
								
							
								<h3><a href="/community" id="nav_community" >Community</a></h3>

								
								<ul>
									
									<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>
									
									<li><a href="https://discuss.elastic.co" id="nav_discuss" target="_blank">discuss</a></li>
									
									<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>
									
								</ul>
								
							
								<h3><a href="/use-cases" id="nav_usecases" >Use Cases</a></h3>

								
							
								<h3><a href="/blog" id="nav_blog" >Blog</a></h3>

								
							
								<h3><a href="/about" id="nav_about" >About</a></h3>

								
								<ul>
									
									<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>
									
									<li><a href="/about/board" id="nav_board" >board of directors</a></li>
									
									<li><a href="/about/careers" id="nav_careers" >careers</a></li>
									
									<li><a href="/about/partners" id="nav_partners" >partners</a></li>
									
									<li><a href="/about/press" id="nav_press" >press</a></li>
									
								</ul>
								
							
						</div>
					</div>
				</nav>
			</div>
			<!-- Shortcuts -->
			<nav id="shortcuts">
				<ul class="links">
					
						<li class="shortcut-1 grayscale">
							<a href="/downloads" id="header_downloads" >
								<span class="img"></span>
								<span class="txt">downloads</span>	
							</a>
						</li>
					
						<li class="shortcut-2 grayscale">
							<a href="/guide" id="header_guide" >
								<span class="img"></span>
								<span class="txt">docs</span>	
							</a>
						</li>
					
						<li class="shortcut-3 grayscale">
							<a href="/subscriptions" id="header_subscriptions" >
								<span class="img"></span>
								<span class="txt">support</span>	
							</a>
						</li>
					
						<li class="shortcut-4 grayscale">
							<a href="https://discuss.elastic.co" id="header_discuss" target="_blank">
								<span class="img"></span>
								<span class="txt">discuss</span>	
							</a>
						</li>
					
						<li class="shortcut-5 grayscale">
							<a href="/contact" id="header_contact" >
								<span class="img"></span>
								<span class="txt">contact</span>	
							</a>
						</li>
					
				</ul>
			</nav>
		</div>
	</div>
</section>


<section class="desktop-main-nav">
	<div class="row">
		<div class="8u">
			<!-- Nav -->
			<nav id="nav">
				<ul>
					
					<li>
						
							
						
						<a href="/products" id="nav_products"   >Products</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/found" id="nav_hosted-elasticsearch" >elasticsearch as a service</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/beats" id="nav_beats" >beats</a></li>								
							
								<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/subscriptions" id="nav_subscriptions"   >Subscriptions</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/learn" id="nav_learn"   >Learn</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="/training" id="nav_training" >training</a></li>								
							
								<li><a href="/services" id="nav_services" >services</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/community" id="nav_community"   >Community</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
							
								<li><a href="https://discuss.elastic.co" id="nav_discuss" target="_blank">discuss</a></li>								
							
								<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/use-cases" id="nav_usecases"   >Use Cases</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/blog" id="nav_blog"   >Blog</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/about" id="nav_about"   >About</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>
		</div>
		<!-- Search -->
		<div class="4u">
			<div class="languages-wrapper">
				<div class="global-language">
					<img src="https://static-www.elastic.co/static/img/icon-globe.png"/>
					<ul class="all-languages">
						
							<li><a href="/">English</a></li>
						
							<li><a href="/fr/">French</a></li>
						
							<li><a href="/de/">German</a></li>
						
							<li><a href="/jp/">Japanese</a></li>
						
							<li><a href="/kr/">Korean</a></li>
						
					</ul>
				</div>
				<div id="searchbar">
					<form method="get" action="/search" name="searchForm" id="searchfrm">
						<input type="text" value="" name="q" placeholder="elastic{search}" id="autocomplete">
						<button class="button icon" onclick="searchForm.submit()">GO</button>
					</form>
				</div>
				<div class="nav-auto-complete"></div>
			</div>
		</div>
	</div>
</section>

		</div>
	</div>
</div>

<style>	
	
		#shortcuts ul.links li.shortcut-1 span.img{
			background-image: url("/assets/blt406dbf0c61aa5579/shortcuts.png");
    		background-repeat: no-repeat;
			display:inline-block;}
	
		#shortcuts ul.links li.shortcut-2 span.img{
			background-image: url("/assets/blt406dbf0c61aa5579/shortcuts.png");
    		background-repeat: no-repeat;
			display:inline-block;}
	
		#shortcuts ul.links li.shortcut-3 span.img{
			background-image: url("/assets/blt406dbf0c61aa5579/shortcuts.png");
    		background-repeat: no-repeat;
			display:inline-block;}
	
		#shortcuts ul.links li.shortcut-4 span.img{
			background-image: url("/assets/blt406dbf0c61aa5579/shortcuts.png");
    		background-repeat: no-repeat;
			display:inline-block;}
	
		#shortcuts ul.links li.shortcut-5 span.img{
			background-image: url("/assets/blt406dbf0c61aa5579/shortcuts.png");
    		background-repeat: no-repeat;
			display:inline-block;}
	
	
	
		.m-shortcuts li a.m-search {
			background: url("/assets/blt174b13be89ff803c/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-docs {
			background: url("/assets/blt5ba03f594a7d610a/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-contact {
			background: url("/assets/blt38c3e853c4b1174d/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1><a href="/learn" title="Learn">Learn</a> |</h1>
            <h2><a href="/guide" title="Docs">Docs</a></h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference
      [1.5]
    </a></span> » <span class="breadcrumb-link"><a href="getting-started-with-logstash.html">Getting Started with Logstash</a></span> » <span class="breadcrumb-node">Setting Up an Advanced Logstash Pipeline</span></div><div class="navheader"><span class="prev"><a href="first-event.html">
              « 
              Stashing Your First Event: Basic Logstash Example</a>
           
        </span><span class="next">
           
          <a href="package-repositories.html">Package Repositories
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="advanced-pipeline"></a>Setting Up an Advanced Logstash Pipeline<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/advanced-pipeline.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>A Logstash pipeline in most use cases has one or more input, filter, and output plugins. The scenarios in this section
build Logstash configuration files to specify these plugins and discuss what each plugin is doing.</p><p>The Logstash configuration file defines your <span class="emphasis"><em>Logstash pipeline</em></span>. When you start a Logstash instance, use the
<code class="literal">-f &lt;path/to/file&gt;</code> option to specify the configuration file that defines that instance’s pipeline.</p><p>A Logstash pipeline has two required elements, <code class="literal">input</code> and <code class="literal">output</code>, and one optional element, <code class="literal">filter</code>. The input
plugins consume data from a source, the filter plugins modify the data as you specify, and the output plugins write
the data to a destination.</p><div class="informalfigure"><div class="mediaobject"><img src="static/images/basic_logstash_pipeline.png" alt="static/images/basic_logstash_pipeline.png" /></div></div><p>The following text represents the skeleton of a configuration pipeline:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell"># The # character at the beginning of a line indicates a comment. Use
# comments to describe your configuration.
input {
}
# The filter part of this file is commented out to indicate that it is
# optional.
# filter {
#
# }
output {
}</pre></div><p>This skeleton is non-functional, because the input and output sections don’t have any valid options defined. The
examples in this tutorial build configuration files to address specific use cases.</p><p>Paste the skeleton into a file named <code class="literal">first-pipeline.conf</code> in your home Logstash directory.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="parsing-into-es"></a>Parsing Apache Logs into Elasticsearch<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/advanced-pipeline.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>This example creates a Logstash pipeline that takes Apache web logs as input, parses those logs to create specific,
named fields from the logs, and writes the parsed data to an Elasticsearch cluster.</p><h5><a id="configuring-file-input"></a>Configuring Logstash for File Input<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/advanced-pipeline.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>To start your Logstash pipeline, configure the Logstash instance to read from a file using the
<a class="ulink" href="https://www.elastic.co/guide/en/logstash/1.5/plugins-inputs-file.html" target="_top">file</a> input plugin.</p><p>Edit the <code class="literal">first-pipeline.conf</code> file to add the following text:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">input {
    file {
        path =&gt; "/path/to/groksample.log"
        start_position =&gt; beginning <a id="CO1-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The default behavior of the file input plugin is to monitor a file for new information, in a manner similar to the
UNIX <code class="literal">tail -f</code> command. To change this default behavior and process the entire file, we need to specify the position
where Logstash starts processing the file.
</p></td></tr></table></div><p>Replace <code class="literal">/path/to/</code> with the actual path to the location of <code class="literal">groksample.log</code> in your file system.</p><h5><a id="configuring-grok-filter"></a>Parsing Web Logs with the Grok Filter Plugin<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/advanced-pipeline.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>The <a class="ulink" href="https://www.elastic.co/guide/en/logstash/1.5/plugins-filters-grok.html" target="_top"><code class="literal">grok</code></a> filter plugin is one of several plugins that are available by default in
Logstash. For details on how to manage Logstash plugins, see the <a class="link" href="working-with-plugins.html" title="Working with plugins">reference documentation</a> for
the plugin manager.</p><p>Because the <code class="literal">grok</code> filter plugin looks for patterns in the incoming log data, configuration requires you to make
decisions about how to identify the patterns that are of interest to your use case. A representative line from the web
server log sample looks like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">83.149.9.216 - - [04/Jan/2015:05:13:42 +0000] "GET /presentations/logstash-monitorama-2013/images/kibana-search.png
HTTP/1.1" 200 203023 "http://semicomplete.com/presentations/logstash-monitorama-2013/" "Mozilla/5.0 (Macintosh; Intel
Mac OS X 10_9_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1700.77 Safari/537.36"</pre></div><p>The IP address at the beginning of the line is easy to identify, as is the timestamp in brackets. In this tutorial, use
the <code class="literal">%{COMBINEDAPACHELOG}</code> grok pattern, which structures lines from the Apache log using the following schema:</p><div class="horizontal"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<span class="strong"><strong>Information</strong></span>
</p>
</td><td valign="top">
<p>
<span class="strong"><strong>Field Name</strong></span>
</p>
</td></tr><tr><td valign="top">
<p>
IP Address
</p>
</td><td valign="top">
<p>
<code class="literal">clientip</code>
</p>
</td></tr><tr><td valign="top">
<p>
User ID
</p>
</td><td valign="top">
<p>
<code class="literal">ident</code>
</p>
</td></tr><tr><td valign="top">
<p>
User Authentication
</p>
</td><td valign="top">
<p>
<code class="literal">auth</code>
</p>
</td></tr><tr><td valign="top">
<p>
timestamp
</p>
</td><td valign="top">
<p>
<code class="literal">timestamp</code>
</p>
</td></tr><tr><td valign="top">
<p>
HTTP Verb
</p>
</td><td valign="top">
<p>
<code class="literal">verb</code>
</p>
</td></tr><tr><td valign="top">
<p>
Request body
</p>
</td><td valign="top">
<p>
<code class="literal">request</code>
</p>
</td></tr><tr><td valign="top">
<p>
HTTP Version
</p>
</td><td valign="top">
<p>
<code class="literal">httpversion</code>
</p>
</td></tr><tr><td valign="top">
<p>
HTTP Status Code
</p>
</td><td valign="top">
<p>
<code class="literal">response</code>
</p>
</td></tr><tr><td valign="top">
<p>
Bytes served
</p>
</td><td valign="top">
<p>
<code class="literal">bytes</code>
</p>
</td></tr><tr><td valign="top">
<p>
Referrer URL
</p>
</td><td valign="top">
<p>
<code class="literal">referrer</code>
</p>
</td></tr><tr><td valign="top">
<p>
User agent
</p>
</td><td valign="top">
<p>
<code class="literal">agent</code>
</p>
</td></tr></tbody></table></div><p>Edit the <code class="literal">first-pipeline.conf</code> file to add the following text:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">filter {
    grok {
        match =&gt; { "message" =&gt; "%{COMBINEDAPACHELOG}"}
    }
}</pre></div><p>After processing, the sample line has the following JSON representation:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{
"clientip" : "83.149.9.216",
"ident" : ,
"auth" : ,
"timestamp" : "04/Jan/2015:05:13:42 +0000",
"verb" : "GET",
"request" : "/presentations/logstash-monitorama-2013/images/kibana-search.png",
"httpversion" : "HTTP/1.1",
"response" : "200",
"bytes" : "203023",
"referrer" : "http://semicomplete.com/presentations/logstash-monitorama-2013/",
"agent" : "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1700.77 Safari/537.36"
}</pre></div><h5><a id="indexing-parsed-data-into-elasticsearch"></a>Indexing Parsed Data into Elasticsearch<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/advanced-pipeline.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Now that the web logs are broken down into specific fields, the Logstash pipeline can index the data into an
Elasticsearch cluster. Edit the <code class="literal">first-pipeline.conf</code> file to add the following text after the <code class="literal">input</code> section:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">output {
    elasticsearch {
        protocol =&gt; "http"
    }
}</pre></div><p>With this configuration, Logstash uses multicast discovery to connect to Elasticsearch.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Multicast discovery is acceptable for development work, but unsuited for production environments. For the
purposes of this example, however, the default behavior is sufficient.</p></div></div><h5><a id="configuring-geoip-plugin"></a>Enhancing Your Data with the Geoip Filter Plugin<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/advanced-pipeline.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>In addition to parsing log data for better searches, filter plugins can derive supplementary information from existing
data. As an example, the <a class="ulink" href="https://www.elastic.co/guide/en/logstash/1.5/plugins-filters-geoip.html" target="_top"><code class="literal">geoip</code></a> plugin looks up IP addresses, derives geographic
location information from the addresses, and adds that location information to the logs.</p><p>Configure your Logstash instance to use the <code class="literal">geoip</code> filter plugin by adding the following lines to the <code class="literal">filter</code> section
of the <code class="literal">first-pipeline.conf</code> file:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">geoip {
    source =&gt; "clientip"
}</pre></div><p>The <code class="literal">geoip</code> plugin configuration requires data that is already defined as separate fields. Make sure that the <code class="literal">geoip</code>
section is after the <code class="literal">grok</code> section of the configuration file.</p><p>Specify the name of the field that contains the IP address to look up. In this tutorial, the field name is <code class="literal">clientip</code>.</p><h5><a id="testing-initial-pipeline"></a>Testing Your Initial Pipeline<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/advanced-pipeline.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>At this point, your <code class="literal">first-pipeline.conf</code> file has input, filter, and output sections properly configured, and looks
like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">input {
    file {
        path =&gt; "/Users/palecur/logstash-1.5.2/logstash-tutorial-dataset"
        start_position =&gt; beginning
    }
}
filter {
    grok {
        match =&gt; { "message" =&gt; "%{COMBINEDAPACHELOG}"}
    }
    geoip {
        source =&gt; "clientip"
    }
}
output {
    elasticsearch {
        protocol =&gt; "http"
    }
    stdout {}
}</pre></div><p>To verify your configuration, run the following command:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">bin/logstash -f first-pipeline.conf --configtest</pre></div><p>The <code class="literal">--configtest</code> option parses your configuration file and reports any errors. When the configuration file passes
the configuration test, start Logstash with the following command:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">bin/logstash -f first-pipeline.conf</pre></div><p>Try a test query to Elasticsearch based on the fields created by the <code class="literal">grok</code> filter plugin:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">curl -XGET 'localhost:9200/logstash-$DATE/_search?q=response=401'</pre></div><p>Replace $DATE with the current date, in YYYY.MM.DD format.</p><p>Since our sample has just one 401 HTTP response, we get one hit back:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{"took":2,
"timed_out":false,
"_shards":{"total":5,
  "successful":5,
  "failed":0},
"hits":{"total":1,
  "max_score":1.5351382,
  "hits":[{"_index":"logstash-2015.07.30",
    "_type":"logs",
    "_id":"AU7gqOky1um3U6ZomFaF",
    "_score":1.5351382,
    "_source":{"message":"83.149.9.216 - - [04/Jan/2015:05:13:45 +0000] \"GET /presentations/logstash-monitorama-2013/images/frontend-response-codes.png HTTP/1.1\" 200 52878 \"http://semicomplete.com/presentations/logstash-monitorama-2013/\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1700.77 Safari/537.36\"",
      "@version":"1",
      "@timestamp":"2015-07-30T20:30:41.265Z",
      "host":"localhost",
      "path":"/path/to/logstash-tutorial-dataset",
      "clientip":"83.149.9.216",
      "ident":"-",
      "auth":"-",
      "timestamp":"04/Jan/2015:05:13:45 +0000",
      "verb":"GET",
      "request":"/presentations/logstash-monitorama-2013/images/frontend-response-codes.png",
      "httpversion":"1.1",
      "response":"200",
      "bytes":"52878",
      "referrer":"\"http://semicomplete.com/presentations/logstash-monitorama-2013/\"",
      "agent":"\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1700.77 Safari/537.36\""
      }
    }]
  }
}</pre></div><p>Try another search for the geographic information derived from the IP address:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">curl -XGET 'localhost:9200/logstash-$DATE/_search?q=geoip.city_name=Buffalo'</pre></div><p>Replace $DATE with the current date, in YYYY.MM.DD format.</p><p>Only one of the log entries comes from Buffalo, so the query produces a single response:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{"took":3,
"timed_out":false,
"_shards":{
  "total":5,
  "successful":5,
  "failed":0},
"hits":{"total":1,
  "max_score":1.03399,
  "hits":[{"_index":"logstash-2015.07.31",
    "_type":"logs",
    "_id":"AU7mK3CVSiMeBsJ0b_EP",
    "_score":1.03399,
    "_source":{
      "message":"108.174.55.234 - - [04/Jan/2015:05:27:45 +0000] \"GET /?flav=rss20 HTTP/1.1\" 200 29941 \"-\" \"-\"",
      "@version":"1",
      "@timestamp":"2015-07-31T22:11:22.347Z",
      "host":"localhost",
      "path":"/path/to/logstash-tutorial-dataset",
      "clientip":"108.174.55.234",
      "ident":"-",
      "auth":"-",
      "timestamp":"04/Jan/2015:05:27:45 +0000",
      "verb":"GET",
      "request":"/?flav=rss20",
      "httpversion":"1.1",
      "response":"200",
      "bytes":"29941",
      "referrer":"\"-\"",
      "agent":"\"-\"",
      "geoip":{
        "ip":"108.174.55.234",
        "country_code2":"US",
        "country_code3":"USA",
        "country_name":"United States",
        "continent_code":"NA",
        "region_name":"NY",
        "city_name":"Buffalo",
        "postal_code":"14221",
        "latitude":42.9864,
        "longitude":-78.7279,
        "dma_code":514,
        "area_code":716,
        "timezone":"America/New_York",
        "real_region_name":"New York",
        "location":[-78.7279,42.9864]
      }
    }
  }]
 }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="multiple-input-output-plugins"></a>Multiple Input and Output Plugins<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/advanced-pipeline.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The information you need to manage often comes from several disparate sources, and use cases can require multiple
destinations for your data. Your Logstash pipeline can use multiple input and output plugins to handle these
requirements.</p><p>This example creates a Logstash pipeline that takes input from a Twitter feed and the Logstash Forwarder client, then
sends the information to an Elasticsearch cluster as well as writing the information directly to a file.</p><h5><a id="twitter-configuration"></a>Reading from a Twitter feed<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/advanced-pipeline.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>To add a Twitter feed, you need several pieces of information:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
A <span class="emphasis"><em>consumer</em></span> key, which uniquely identifies your Twitter app, which is Logstash in this case.
</li><li class="listitem">
A <span class="emphasis"><em>consumer secret</em></span>, which serves as the password for your Twitter app.
</li><li class="listitem">
One or more <span class="emphasis"><em>keywords</em></span> to search in the incoming feed.
</li><li class="listitem">
An <span class="emphasis"><em>oauth token</em></span>, which identifies the Twitter account using this app.
</li><li class="listitem">
An <span class="emphasis"><em>oauth token secret</em></span>, which serves as the password of the Twitter account.
</li></ul></div><p>Visit <a class="ulink" href="https://dev.twitter.com/apps" target="_top">https://dev.twitter.com/apps</a> to set up a Twitter account and generate your consumer key and secret, as well as
your OAuth token and secret.</p><p>Use this information to add the following lines to the <code class="literal">input</code> section of the <code class="literal">first-pipeline.conf</code> file:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">twitter {
    consumer_key =&gt;
    consumer_secret =&gt;
    keywords =&gt;
    oauth_token =&gt;
    oauth_token_secret =&gt;
}</pre></div><h5><a id="configuring-lsf"></a>The Logstash Forwarder<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/advanced-pipeline.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>The <a class="ulink" href="https://github.com/elastic/logstash-forwarder" target="_top">Logstash Forwarder</a> is a lightweight, resource-friendly tool that
collects logs from files on the server and forwards these logs to your Logstash instance for processing. The
Logstash Forwarder uses a secure protocol called <span class="emphasis"><em>lumberjack</em></span> to communicate with your Logstash instance. The
lumberjack protocol is designed for reliability and low latency. The Logstash Forwarder uses the computing resources of
the machine hosting the source data, and the Lumberjack input plugin minimizes the resource demands on the Logstash
instance.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>In a typical use case, the Logstash Forwarder client runs on a separate machine from the machine running your
Logstash instance. For the purposes of this tutorial, both Logstash and the Logstash Forwarder will be running on the
same machine.</p></div></div><p>Default Logstash configuration includes the <a class="ulink" href="https://www.elastic.co/guide/en/logstash/1.5/plugins-inputs-lumberjack.html" target="_top">Lumberjack input plugin</a>, which is
designed to be resource-friendly. To install the Logstash Forwarder on your data source machine, install the
appropriate package from the main Logstash <a class="ulink" href="https://www.elastic.co/downloads/logstash" target="_top">product page</a>.</p><p>Create a configuration file for the Logstash Forwarder similar to the following example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{
    "network": {
        "servers": [ "localhost:5043" ],
        "ssl ca": "/path/to/localhost.crt", <a id="CO2-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
        "timeout": 15
    },
    "files": [
        {
            "paths": [
                "/path/to/sample-log" <a id="CO2-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
            ],
            "fields": { "type": "apache" }
        }
    ]
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO2-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Path to the SSL certificate for the Logstash instance.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO2-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Path to the file or files that the Logstash Forwarder processes.
</p></td></tr></table></div><p>Save this configuration file as <code class="literal">logstash-forwarder.conf</code>.</p><p>Configure your Logstash instance to use the Lumberjack input plugin by adding the following lines to the <code class="literal">input</code> section
of the <code class="literal">first-pipeline.conf</code> file:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">lumberjack {
    port =&gt; "5043"
    ssl_certificate =&gt; "/path/to/ssl-cert" <a id="CO3-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
    ssl_key =&gt; "/path/to/ssl-key" <a id="CO3-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO3-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Path to the SSL certificate that the Logstash instance uses to authenticate itself to Logstash Forwarder.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO3-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Path to the key for the SSL certificate.
</p></td></tr></table></div><h5><a id="logstash-file-output"></a>Writing Logstash Data to a File<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/advanced-pipeline.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>You can configure your Logstash pipeline to write data directly to a file with the
<a class="ulink" href="https://www.elastic.co/guide/en/logstash/1.5/plugins-outputs-file.html" target="_top"><code class="literal">file</code></a> output plugin.</p><p>Configure your Logstash instance to use the <code class="literal">file</code> output plugin by adding the following lines to the <code class="literal">output</code> section
of the <code class="literal">first-pipeline.conf</code> file:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">file {
    path =&gt; /path/to/target/file
}</pre></div><h5><a id="multiple-es-nodes"></a>Writing to multiple Elasticsearch nodes<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/advanced-pipeline.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Writing to multiple Elasticsearch nodes lightens the resource demands on a given Elasticsearch node, as well as
providing redundant points of entry into the cluster when a particular node is unavailable.</p><p>To configure your Logstash instance to write to multiple Elasticsearch nodes, edit the output section of the <code class="literal">first-pipeline.conf</code> file to read:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">output {
    elasticsearch {
        protocol =&gt; "http"
        host =&gt; ["IP Address 1", "IP Address 2", "IP Address 3"]
    }
}</pre></div><p>Use the IP addresses of three non-master nodes in your Elasticsearch cluster in the host line. When the <code class="literal">host</code>
parameter lists multiple IP addresses, Logstash load-balances requests across the list of addresses.</p><h5><a id="testing-second-pipeline"></a>Testing the Pipeline<a href="https://github.com/elastic/logstash/edit/master/docs/asciidoc/static/advanced-pipeline.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>At this point, your <code class="literal">first-pipeline.conf</code> file looks like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">input {
    twitter {
        consumer_key =&gt;
        consumer_secret =&gt;
        keywords =&gt;
        oauth_token =&gt;
        oauth_token_secret =&gt;
    }
    lumberjack {
        port =&gt; "5043"
        ssl_certificate =&gt; "/path/to/ssl-cert"
        ssl_key =&gt; "/path/to/ssl-key"
    }
}
output {
    elasticsearch {
        protocol =&gt; "http"
        host =&gt; ["IP Address 1", "IP Address 2", "IP Address 3"]
    }
    file {
        path =&gt; /path/to/target/file
    }
}</pre></div><p>Logstash is consuming data from the Twitter feed you configured, receiving data from the Logstash Forwarder, and
indexing this information to three nodes in an Elasticsearch cluster as well as writing to a file.</p><p>At the data source machine, run the Logstash Forwarder with the following command:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">logstash-forwarder -config logstash-forwarder.conf</pre></div><p>Logstash Forwarder will attempt to connect on port 5403. Until Logstash starts with an active Lumberjack plugin, there
won’t be any answer on that port, so any messages you see regarding failure to connect on that port are normal for now.</p><p>To verify your configuration, run the following command:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">bin/logstash -f first-pipeline.conf --configtest</pre></div><p>The <code class="literal">--configtest</code> option parses your configuration file and reports any errors. When the configuration file passes
the configuration test, start Logstash with the following command:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">bin/logstash -f first-pipeline.conf</pre></div><p>Use the <code class="literal">grep</code> utility to search in the target file to verify that information is present:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">grep Mozilla /path/to/target/file</pre></div><p>Run an Elasticsearch query to find the same information in the Elasticsearch cluster:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">curl -XGET 'localhost:9200/logstash-2015.07.30/_search?q=agent=Mozilla'</pre></div></div></div><div class="navfooter"><span class="prev"><a href="first-event.html">
              « 
              Stashing Your First Event: Basic Logstash Example</a>
           
        </span><span class="next">
           
          <a href="package-repositories.html">Package Repositories
               »
            </a></span></div>
<!-- end body -->

            </section>

            <div id="rtpcontainer"
        >
	<h3>Top Videos</h3>
	<ul class="lists">
		<li><a href="https://www.elastic.co/webinars/get-started-with-elasticsearch/?baymax=default&elektra=docs&storm=top-video">Getting Started</a></li>
		<li><a href="http://www.elastic.co/webinars/elasticsearch-performance-optimization-tale-two-tickets/?elektra=docs">Scaling</a></li>
		<li><a href="http://www.elastic.co/webinars/shield-securing-your-data-in-elasticsearch/?elektra=docs">Security</a></li>
	</ul>
</div>


	  	

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
	<!-- subscribe-newsletter -->
	<div id="subscribe-newsletter">
		<div class="container">
			<div class="row">
				<div class="12u">
					<div class="subscribe-wrapper" id="rtp-newsletter">
						<header>
							<h3>Subscribe to Our Newsletter</h3>
						</header>
						<div class="subscribe-form">
							<form id="mktoForm_1398" class="container"></form>
							<div class="form_thanks hide">
								
									<p>Thanks for subscribing! We'll keep you updated with new releases.</p>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

  	<!-- Footer -->
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2015. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="https://www.linkedin.com/company/elastic-co" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
						<li class="youtube grayscale"><a href="https://www.youtube.com/user/elasticsearch" target="_blank" id="footer_youtube"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("/assets/bltda40eebd7c7cae9a/facebook.svg") no-repeat;}		
	
		.twitter{background:url("/assets/bltfd3b1511512f4632/twitter.svg") no-repeat;}		
	
		.linkedin{background:url("/assets/blt6b4f6f8d6b96f814/linkedin.svg") no-repeat;}		
	
		.xing{background:url("/assets/blta76b2ae2b2f10a98/xing.svg") no-repeat;}		
	
		.youtube{background:url("/assets/blt5761648c9581fb53/youtube.svg") no-repeat;}		
	
</style>

<script>
MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", 1398,function(form){
	form.onSuccess(function(form){
		$('#mktoForm_1398').css('display','none');
		$('#subscribe-newsletter header').hide();
		$('#mktoForm_1398').siblings('.form_thanks').removeClass('hide')
		dataLayer.push({'event': 'mktoFormSubmit'});
	    return false;
  	});
});
</script>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script src="https://static-www.elastic.co/static/js/jquery.autocomplete.js"></script>
<script src="https://static-www.elastic.co/static/js/script.js?clr=150"></script>

   	
   	
   	
   	<script type="application/ld+json">
	
		
	
	{
	  	"@context": "http://schema.org",
	  	"@type": "Organization",
	  	"name" : "Elastic",
	  	"url": "https://www.elastic.co/",
	  	"logo": "https://www.elastic.co/static/img/elastic-logo-200.pngg",
		"sameAs" : [ "https://www.facebook.com/elastic.co",
			"https://twitter.com/elastic",
			"https://plus.google.com/105178019064686397293",
			"https://www.youtube.com/user/elasticsearch",
			"https://www.linkedin.com/company/elasticsearch"
		],
	  	"potentialAction": {
	    	"@type": "SearchAction",
	    	"target": "https://www.elastic.co/search?q={query_string}",
	    	"query-input": "required name=query_string"
	  	}
	}
</script>	

            <script type="text/javascript" src="docs.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>

            </body>
        

