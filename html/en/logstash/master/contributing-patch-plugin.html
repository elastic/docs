
<!DOCTYPE HTML>
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Contributing a Patch to a Logstash Plugin</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference [master]" /><link rel="up" href="contributing-to-logstash.html" title="Contributing to Logstash" /><link rel="prev" href="contributing-to-logstash.html" title="Contributing to Logstash" /><link rel="next" href="community-maintainer.html" title="Logstash Plugins Community Maintainer Guide" /><meta name="DC.type" content="Docs/Logstash/Reference/master" />
  
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />

 	<!-- RTP tag --> 
	<script type='text/javascript' async>
	(function(c,h,a,f,i,e){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
	 c[a].a=i;c[a].e=e;var g=h.createElement("script");g.async=true;g.type="text/javascript";
	 g.src=f+'?aid='+i;var b=h.getElementsByTagName("script")[0];b.parentNode.insertBefore(g,b);
	 })(window,document,"rtp","//sjrtp2-cdn.marketo.com/rtp-api/v1/rtp.js","elasticco");
	 
	rtp('send','view');
	rtp('get', 'campaign',true);
	</script>
	<!-- End of RTP tag -->
	
	
 	<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
<meta name="apple-mobile-web-app-title" content="Elastic">
<meta name="application-name" content="Elastic">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">

<!-- DC tags section -->
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
<link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >


<!-- end DC tags -->

	<meta name="description" content="" />

	<link rel="canonical" href="" />

	<meta property="og:image" content="https://www.elastic.co/static/img/elastic-logo-200.png" />
	


	
	<link type="text/css" rel="stylesheet" href="https://static-www.elastic.co/static/css/skel.css?q=200" />
	<link type="text/css" rel="stylesheet" href="https://static-www.elastic.co/static/css/style.css?q=200" />	
	<script src="https://static-www.elastic.co/static/js/skel.min.js?q=200"></script>
	
		<script type="text/javascript">form_name = "" ; cdn_url="https://static-www.elastic.co";cdn_slug = "200"</script>
	
	<script src="https://static-www.elastic.co/static/js/init.js?q=200"></script>
	<script src="https://static-www.elastic.co/static/js/jquery.min.js?q=200"></script>
	<script src="https://static-www.elastic.co/static/js/jquery.cookie.js?q=200"></script>
	<!--<script type="text/javascript">
	    (function() {
	        var path = '//easy.myfonts.net/v2/js?sid=10336(font-family=Avenir+35+Light)&sid=10338(font-family=Avenir+55+Roman)&sid=10340(font-family=Avenir+85+Heavy)&sid=10344(font-family=Avenir+65+Medium)&key=nAD6PCOPrX',
	            protocol = ('https:' == document.location.protocol ? 'https:' : 'http:'),
	            trial = document.createElement('script');
	        trial.type = 'text/javascript';
	        trial.async = true;
	        trial.src = protocol + path;
	        var head = document.getElementsByTagName("head")[0];
	        head.appendChild(trial);
	    })();
	</script>-->

	
	<link type="text/css" rel="stylesheet" href="/static/css/prettify.css" />
	<script type="text/javascript" src="/static/js/prettify.js"></script>
	<script type="text/javascript">
	$(document).ready(function(){
		var path_name = window.location.pathname.substring(1, window.location.pathname.length);
		$('.all-languages li').each(function(){
			var new_path = $('a',this).attr('href')+path_name;
			$('a',this).attr('href',new_path);
		})
	})
	</script>



<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	<!-- begin olark code -->
	<script data-cfasync="false" type='text/javascript'>/*<![CDATA[*/window.olark||(function(c){var f=window,d=document,l=f.location.protocol=="https:"?"https:":"http:",z=c.name,r="load";var nt=function(){
	f[z]=function(){
	(a.s=a.s||[]).push(arguments)};var a=f[z]._={
	},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){
	f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={
	0:+new Date};a.P=function(u){
	a.p[u]=new Date-a.p[0]};function s(){
	a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){
	hd="head";return["<",hd,"></",hd,"><",i,' onl' + 'oad="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if(!m){
	return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){
	b.src="javascript:false"}b.allowTransparency="true";v[j](b);try{
	b.contentWindow[g].open()}catch(w){
	c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try{
	var t=b.contentWindow[g];t.write(p());t.close()}catch(x){
	b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()})({
	loader: "static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});
	/* custom configuration goes here (www.olark.com/documentation) */
	olark.identify('1356-750-10-5709');/*]]>*/</script><noscript><a href="https://www.olark.com/site/1356-750-10-5709/contact" title="Contact us" target="_blank">Questions? Feedback?</a> powered by <a href="http://www.olark.com?welcome" title="Olark live chat software">Olark live chat software</a></noscript>
	<!-- end olark code -->


	<div class="header-cont">
		<div id="header-wrapper">
			


	<script src="/static/js/jquery.tokeninput.js?change=123"></script>
	<link rel="stylesheet" type="text/css" href="/static/css/token-input.css">

<div class="shortcuts-wrapper">
	<div class="container">
		<!-- Shortcuts -->
		<nav id="shortcuts">
			<ul class="links">
				
					
					
						
						
					
					
					
						
					
					<li class="shortcut-1">
						<a href="/downloads" id="header_downloads" >
							<span class="txt">downloads</span>
						</a>
					</li>
				
					
					
						
						
					
					
					
						
					
					<li class="shortcut-2">
						<a href="/guide" id="header_guide" >
							<span class="txt">docs</span>
						</a>
					</li>
				
					
					
						
						
					
					
					
						
					
					<li class="shortcut-3">
						<a href="/subscriptions" id="header_subscriptions" >
							<span class="txt">support</span>
						</a>
					</li>
				
					
					
						
						
					
					
					
						
					
					<li class="shortcut-4">
						<a href="https://discuss.elastic.co" id="header_forums" target="_blank">
							<span class="txt">forums</span>
						</a>
					</li>
				
					
					
						
						
					
					
					
						
						
					
					<li class="shortcut-5">
						<a href="/contact?storm=global-header-en" id="header_contact" >
							<span class="txt">contact</span>
						</a>
					</li>
				
			</ul>
		</nav>
		<div class="languages-wrapper">
			<div class="global-language">
				<ul class="language">
					<!-- <li class="active-language"><a class="active" href="#">EN</a></li> -->
					
						<li><a href="#">EN</a></li>
					
				</ul>
				<ul class="all-languages">
					
						
						<li><a href="/">English</a></li>
					
						
						<li><a href="/fr/">French</a></li>
					
						
						<li><a href="/de/">German</a></li>
					
						
						<li><a href="/jp/">Japanese</a></li>
					
						
						<li><a href="/kr/">Korean</a></li>
					
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="container w100">
	<div class="row 0%">
		<div class="12u">
			

<section class="first-container desktop-main-nav">
	<div class="row 0%">
		<div class="11u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" viewBox="-155 383.3 687.5 235.7" xml:space="preserve" enable-background="new -155 383.3 687.5 235.7"><path fill="#FFFFFF" d="M81.6 506.8c0-19.8-12.3-37.2-30.8-43.9 0.8-4.2 1.2-8.4 1.2-12.7 0-36.9-30-66.9-66.8-66.9 -21.6 0-41.6 10.3-54.2 27.7 -6.2-4.8-13.8-7.4-21.7-7.4 -19.6 0-35.5 15.9-35.5 35.5 0 4.3 0.8 8.5 2.2 12.4 -18.4 6.6-31 24.3-31 44 0 19.9 12.4 37.3 30.9 44 -0.8 4.1-1.2 8.4-1.2 12.7 0 36.8 29.9 66.7 66.7 66.7 21.6 0 41.6-10.4 54.1-27.8 6.2 4.9 13.8 7.6 21.7 7.6 19.6 0 35.5-15.9 35.5-35.5 0-4.3-0.8-8.5-2.2-12.4C68.9 544.2 81.6 526.5 81.6 506.8"/><path fill="#FED10A" d="M-62 484.8l51.8 23.6L42 462.6c0.8-3.8 1.1-7.5 1.1-11.5 0-32.2-26.2-58.4-58.4-58.4 -19.3 0-37.2 9.5-48.1 25.4l-8.7 45.1L-62 484.8z"/><path fill="#24BBB1" d="M-115.6 539.6c-0.8 3.8-1.1 7.7-1.1 11.7 0 32.3 26.3 58.5 58.6 58.5 19.4 0 37.5-9.6 48.4-25.6l8.6-44.9 -11.5-22 -52-23.7L-115.6 539.6z"/><path fill="#EF5098" d="M-115.9 450l35.5 8.4 7.8-40.3c-4.8-3.7-10.8-5.7-17-5.7 -15.4 0-28 12.5-28 28C-117.6 443.7-117 447-115.9 450"/><path fill="#17A8E0" d="M-119 458.5c-15.8 5.2-26.9 20.4-26.9 37.1 0 16.3 10.1 30.8 25.2 36.6l49.8-45 -9.1-19.5L-119 458.5z"/><path fill="#93C83E" d="M-0.7 584.2c4.9 3.7 10.8 5.8 16.9 5.8 15.4 0 28-12.5 28-28 0-3.4-0.6-6.7-1.7-9.7L7.1 544 -0.7 584.2z"/><path fill="#0779A1" d="M6.5 534.7l39 9.1c15.9-5.2 26.9-20.4 26.9-37.2 0-16.2-10.1-30.8-25.2-36.5l-51 44.7L6.5 534.7z"/><path d="M175.8 548.8l4.7-0.5 0.3 9.6c-12.4 1.7-23 2.6-31.8 2.6 -11.7 0-20-3.4-24.9-10.2s-7.3-17.4-7.3-31.7c0-28.6 11.4-42.9 34.1-42.9 11 0 19.2 3.1 24.6 9.2s8.1 15.8 8.1 28.9l-0.7 9.3h-53.8c0 9 1.6 15.7 4.9 20 3.3 4.3 8.9 6.5 17 6.5C159.2 549.8 167.4 549.5 175.8 548.8zM171.4 513.5c0-10-1.6-17.1-4.8-21.2 -3.2-4.1-8.4-6.2-15.6-6.2s-12.7 2.2-16.3 6.5c-3.6 4.3-5.5 11.3-5.6 20.9H171.4z"/><path d="M200.6 559V442h12.2v117H200.6z"/><path d="M289.9 502.1v40.1c0 4.1 10.1 4.9 10.1 4.9l-0.6 10.8c-8.6 0-15.7 0.7-20-3.4 -9.8 4.3-19.5 6.1-29.3 6.1 -7.5 0-13.2-2.1-17.1-6.4 -3.9-4.2-5.9-10.3-5.9-18.3 0-7.9 2-13.8 6-17.5 4-3.7 10.3-6.1 18.9-6.9l25.6-2.4v-7c0-5.5-1.2-9.5-3.6-11.9 -2.4-2.4-5.7-3.6-9.8-3.6h-32.1v-10.8h31.3c9.2 0 15.9 2.1 20.1 6.4C287.8 486.4 289.9 493.1 289.9 502.1zM239.7 535.3c0 10 4.1 15 12.4 15 7.4 0 14.7-1.2 21.8-3.7l3.7-1.3v-26.9l-24.1 2.3c-4.9 0.4-8.4 1.8-10.6 4.2C240.7 527.3 239.7 530.8 239.7 535.3z"/><path d="M337.6 486.7c-11.8 0-17.8 4.1-17.8 12.4 0 3.8 1.4 6.5 4.1 8.1s8.9 3.2 18.6 4.9c9.7 1.7 16.5 4 20.5 7.1 4 3 6 8.7 6 17.1 0 8.4-2.7 14.5-8.1 18.4 -5.4 3.9-13.2 5.9-23.6 5.9 -6.7 0-29.2-2.5-29.2-2.5l0.7-10.6c12.9 1.2 22.3 2.2 28.6 2.2 6.3 0 11.1-1 14.4-3s5-5.4 5-10.1 -1.4-7.9-4.2-9.6c-2.8-1.7-9-3.3-18.6-4.8s-16.4-3.7-20.4-6.7c-4-2.9-6-8.4-6-16.3 0-7.9 2.8-13.8 8.4-17.6 5.6-3.8 12.6-5.7 20.9-5.7 6.6 0 29.6 1.7 29.6 1.7v10.7C354.4 487.6 344.5 486.7 337.6 486.7z"/><path d="M428 488.1h-25.9v39c0 9.3 0.7 15.5 2 18.4 1.4 2.9 4.6 4.4 9.7 4.4l14.5-1 0.8 10.1c-7.3 1.2-12.8 1.8-16.6 1.8 -8.5 0-14.3-2.1-17.6-6.2s-4.9-12-4.9-23.6v-42.9h-11.6v-10.6H390v-25h12.1v24.9H428V488.1z"/><path d="M445 459v-14.1h12.2v14.2L445 459 445 459zM445 559v-81.5h12.2V559H445z"/><path d="M510.2 475.8c3.6 0 9.7 0.7 18.3 2l3.9 0.5 -0.5 9.9c-8.7-1-15.1-1.5-19.2-1.5 -9.2 0-15.5 2.2-18.8 6.6s-5 12.6-5 24.5c0 11.9 1.5 20.2 4.6 24.9 3.1 4.7 9.5 7 19.3 7l19.2-1.5 0.5 10.1c-10.1 1.5-17.7 2.3-22.7 2.3 -12.7 0-21.5-3.3-26.3-9.8s-7.3-17.5-7.3-33 2.6-26.4 7.8-32.6C489.3 479 498 475.8 510.2 475.8z"/></svg>
						</div>
					</a>
				</h1>
			</div>
			<nav id="nav">
				<ul>
					
					<li>
						
							
						
						<a href="/products" id="nav_products"   >Products</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/cloud" id="nav_elasticsearch_as_a_service" >elasticsearch as a service</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/beats" id="nav_beats" >beats</a></li>								
							
								<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/cloud" id="nav_cloud"   >Cloud</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/subscriptions" id="nav_subscriptions"   >Subscriptions</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/learn" id="nav_learn"   >Learn</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="/training" id="nav_training" >training</a></li>								
							
								<li><a href="/services" id="nav_services" >services</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/community" id="nav_community"   >Community</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
							
								<li><a href="https://discuss.elastic.co" id="nav_forums" target="_blank">forums</a></li>								
							
								<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/use-cases" id="nav_usecases"   >Use Cases</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/blog" id="nav_blog"   >Blog</a>
						
						<ul class="dropdown">
							
								<li><a href="/blog/category/news" id="blog_news" >News</a></li>								
							
								<li><a href="/blog/category/engineering" id="blog_engineering" >Engineering</a></li>								
							
								<li><a href="/blog/category/user-stories" id="blog_user-stories" >User Stories</a></li>								
							
								<li><a href="/blog/category/releases" id="blog_releases" >Releases</a></li>								
							
								<li><a href="/blog/archive" id="blog_archive" >Archive</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/about" id="nav_about"   >About</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>			
			<!-- Searchbar Input box -->
			 <!-- <form method="get" action="/search" name="searchForm" class="header-search-form" id="searchMobileFrm">
			   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
			</form>
			<div class="mobile-auto-complete"></div> -->  
		</div>
		<div class="1u 6u(small) 6u(xsmall)">
			<div id="searchbar">
				<a href="#" class="button icon"></a>
			</div>
			<!-- <div class="nav-auto-complete"></div> -->
		</div>
	</div>
</section>
<div class="mobile-menu-wrapper">
	<div class="row 0%">
		<div class="8u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" viewBox="-155 383.3 687.5 235.7" xml:space="preserve" enable-background="new -155 383.3 687.5 235.7"><path fill="#FFFFFF" d="M81.6 506.8c0-19.8-12.3-37.2-30.8-43.9 0.8-4.2 1.2-8.4 1.2-12.7 0-36.9-30-66.9-66.8-66.9 -21.6 0-41.6 10.3-54.2 27.7 -6.2-4.8-13.8-7.4-21.7-7.4 -19.6 0-35.5 15.9-35.5 35.5 0 4.3 0.8 8.5 2.2 12.4 -18.4 6.6-31 24.3-31 44 0 19.9 12.4 37.3 30.9 44 -0.8 4.1-1.2 8.4-1.2 12.7 0 36.8 29.9 66.7 66.7 66.7 21.6 0 41.6-10.4 54.1-27.8 6.2 4.9 13.8 7.6 21.7 7.6 19.6 0 35.5-15.9 35.5-35.5 0-4.3-0.8-8.5-2.2-12.4C68.9 544.2 81.6 526.5 81.6 506.8"/><path fill="#FED10A" d="M-62 484.8l51.8 23.6L42 462.6c0.8-3.8 1.1-7.5 1.1-11.5 0-32.2-26.2-58.4-58.4-58.4 -19.3 0-37.2 9.5-48.1 25.4l-8.7 45.1L-62 484.8z"/><path fill="#24BBB1" d="M-115.6 539.6c-0.8 3.8-1.1 7.7-1.1 11.7 0 32.3 26.3 58.5 58.6 58.5 19.4 0 37.5-9.6 48.4-25.6l8.6-44.9 -11.5-22 -52-23.7L-115.6 539.6z"/><path fill="#EF5098" d="M-115.9 450l35.5 8.4 7.8-40.3c-4.8-3.7-10.8-5.7-17-5.7 -15.4 0-28 12.5-28 28C-117.6 443.7-117 447-115.9 450"/><path fill="#17A8E0" d="M-119 458.5c-15.8 5.2-26.9 20.4-26.9 37.1 0 16.3 10.1 30.8 25.2 36.6l49.8-45 -9.1-19.5L-119 458.5z"/><path fill="#93C83E" d="M-0.7 584.2c4.9 3.7 10.8 5.8 16.9 5.8 15.4 0 28-12.5 28-28 0-3.4-0.6-6.7-1.7-9.7L7.1 544 -0.7 584.2z"/><path fill="#0779A1" d="M6.5 534.7l39 9.1c15.9-5.2 26.9-20.4 26.9-37.2 0-16.2-10.1-30.8-25.2-36.5l-51 44.7L6.5 534.7z"/><path d="M175.8 548.8l4.7-0.5 0.3 9.6c-12.4 1.7-23 2.6-31.8 2.6 -11.7 0-20-3.4-24.9-10.2s-7.3-17.4-7.3-31.7c0-28.6 11.4-42.9 34.1-42.9 11 0 19.2 3.1 24.6 9.2s8.1 15.8 8.1 28.9l-0.7 9.3h-53.8c0 9 1.6 15.7 4.9 20 3.3 4.3 8.9 6.5 17 6.5C159.2 549.8 167.4 549.5 175.8 548.8zM171.4 513.5c0-10-1.6-17.1-4.8-21.2 -3.2-4.1-8.4-6.2-15.6-6.2s-12.7 2.2-16.3 6.5c-3.6 4.3-5.5 11.3-5.6 20.9H171.4z"/><path d="M200.6 559V442h12.2v117H200.6z"/><path d="M289.9 502.1v40.1c0 4.1 10.1 4.9 10.1 4.9l-0.6 10.8c-8.6 0-15.7 0.7-20-3.4 -9.8 4.3-19.5 6.1-29.3 6.1 -7.5 0-13.2-2.1-17.1-6.4 -3.9-4.2-5.9-10.3-5.9-18.3 0-7.9 2-13.8 6-17.5 4-3.7 10.3-6.1 18.9-6.9l25.6-2.4v-7c0-5.5-1.2-9.5-3.6-11.9 -2.4-2.4-5.7-3.6-9.8-3.6h-32.1v-10.8h31.3c9.2 0 15.9 2.1 20.1 6.4C287.8 486.4 289.9 493.1 289.9 502.1zM239.7 535.3c0 10 4.1 15 12.4 15 7.4 0 14.7-1.2 21.8-3.7l3.7-1.3v-26.9l-24.1 2.3c-4.9 0.4-8.4 1.8-10.6 4.2C240.7 527.3 239.7 530.8 239.7 535.3z"/><path d="M337.6 486.7c-11.8 0-17.8 4.1-17.8 12.4 0 3.8 1.4 6.5 4.1 8.1s8.9 3.2 18.6 4.9c9.7 1.7 16.5 4 20.5 7.1 4 3 6 8.7 6 17.1 0 8.4-2.7 14.5-8.1 18.4 -5.4 3.9-13.2 5.9-23.6 5.9 -6.7 0-29.2-2.5-29.2-2.5l0.7-10.6c12.9 1.2 22.3 2.2 28.6 2.2 6.3 0 11.1-1 14.4-3s5-5.4 5-10.1 -1.4-7.9-4.2-9.6c-2.8-1.7-9-3.3-18.6-4.8s-16.4-3.7-20.4-6.7c-4-2.9-6-8.4-6-16.3 0-7.9 2.8-13.8 8.4-17.6 5.6-3.8 12.6-5.7 20.9-5.7 6.6 0 29.6 1.7 29.6 1.7v10.7C354.4 487.6 344.5 486.7 337.6 486.7z"/><path d="M428 488.1h-25.9v39c0 9.3 0.7 15.5 2 18.4 1.4 2.9 4.6 4.4 9.7 4.4l14.5-1 0.8 10.1c-7.3 1.2-12.8 1.8-16.6 1.8 -8.5 0-14.3-2.1-17.6-6.2s-4.9-12-4.9-23.6v-42.9h-11.6v-10.6H390v-25h12.1v24.9H428V488.1z"/><path d="M445 459v-14.1h12.2v14.2L445 459 445 459zM445 559v-81.5h12.2V559H445z"/><path d="M510.2 475.8c3.6 0 9.7 0.7 18.3 2l3.9 0.5 -0.5 9.9c-8.7-1-15.1-1.5-19.2-1.5 -9.2 0-15.5 2.2-18.8 6.6s-5 12.6-5 24.5c0 11.9 1.5 20.2 4.6 24.9 3.1 4.7 9.5 7 19.3 7l19.2-1.5 0.5 10.1c-10.1 1.5-17.7 2.3-22.7 2.3 -12.7 0-21.5-3.3-26.3-9.8s-7.3-17.5-7.3-33 2.6-26.4 7.8-32.6C489.3 479 498 475.8 510.2 475.8z"/></svg>
						</div>
					</a>
				</h1>
			</div>
		</div>
		<div class="4u 6u(small) 6u(xsmall) text-right">
			<!-- <div class="mobile-menu-wrapper"> -->
				<ul class="m-shortcuts">
					
					<li><a href="#" class="m-search" id="header-search"></a></li>
					
					<li><a href="/guide" class="m-docs" id="mobile-docs"></a></li>
					
					<li><a href="/contact" class="m-contact" id="mobile-contact"></a></li>
					
				</ul>	
				<nav class="nav-menu">
					<div class="menu-button">
						<span></span>
					</div>
					<div class="nav-menu-list-wrap">
						<div class="nav-menu-list">
							
								<h3><a href="/products" id="nav_products" >Products</a></h3>

								
								<ul>
									
									<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>
									
									<li><a href="/cloud" id="nav_elasticsearch_as_a_service" >elasticsearch as a service</a></li>
									
									<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>
									
									<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>
									
									<li><a href="/products/beats" id="nav_beats" >beats</a></li>
									
									<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>
									
									<li><a href="/products/shield" id="nav_shield" >shield</a></li>
									
									<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>
									
									<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>
									
									<li><a href="/downloads" id="nav_downloads" >downloads</a></li>
									
								</ul>
								
							
								<h3><a href="/cloud" id="nav_cloud" >Cloud</a></h3>

								
							
								<h3><a href="/subscriptions" id="nav_subscriptions" >Subscriptions</a></h3>

								
							
								<h3><a href="/learn" id="nav_learn" >Learn</a></h3>

								
								<ul>
									
									<li><a href="/guide" id="nav_guide" >docs</a></li>
									
									<li><a href="/videos" id="nav_videos" >videos</a></li>
									
									<li><a href="/training" id="nav_training" >training</a></li>
									
									<li><a href="/services" id="nav_services" >services</a></li>
									
									<li><a href="/blog" id="nav_learn_blog" >blog</a></li>
									
									<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>
									
								</ul>
								
							
								<h3><a href="/community" id="nav_community" >Community</a></h3>

								
								<ul>
									
									<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>
									
									<li><a href="/https:/discuss.elastic.co" id="nav_forums" target="_blank">forums</a></li>
									
									<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>
									
								</ul>
								
							
								<h3><a href="/use-cases" id="nav_usecases" >Use Cases</a></h3>

								
							
								<h3><a href="/blog" id="nav_blog" >Blog</a></h3>

								
								<ul>
									
									<li><a href="/blog/category/news" id="blog_news" >News</a></li>
									
									<li><a href="/blog/category/engineering" id="blog_engineering" >Engineering</a></li>
									
									<li><a href="/blog/category/user-stories" id="blog_user-stories" >User Stories</a></li>
									
									<li><a href="/blog/category/releases" id="blog_releases" >Releases</a></li>
									
									<li><a href="/blog/archive" id="blog_archive" >Archive</a></li>
									
								</ul>
								
							
								<h3><a href="/about" id="nav_about" >About</a></h3>

								
								<ul>
									
									<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>
									
									<li><a href="/about/board" id="nav_board" >board of directors</a></li>
									
									<li><a href="/about/careers" id="nav_careers" >careers</a></li>
									
									<li><a href="/about/partners" id="nav_partners" >partners</a></li>
									
									<li><a href="/about/press" id="nav_press" >press</a></li>
									
								</ul>
								
							
						</div>
					</div>
				</nav>
			<!-- </div> -->
		</div>
	</div>
</div>
<!-- Mobile Menu -->


		</div>
	</div>
</div>
<div class="header-search-wrapper">	
	<div class="container">
		<div class="big-search">
			<i class="big-search-icon"></i>
			<form method="get" action="/search" autocomplete="on" name="searchForm" id="searchfrm">
				<ul class="tags-wrapper">
					<li class="search-field"><input type="text" class="form-control global-input" id="autocomplete" name="q"></li>
				</ul>
			</form>
			<a href="#" class="header-search-cancel"></a>
		</div>
		<div class="nav-auto-complete"></div>
	</div>
</div>
<style>	
	
	
		.m-shortcuts li a.m-search {
			background: url("https://static-www.elastic.co/assets/blt174b13be89ff803c/m-search-icon.png?q=200") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-docs {
			background: url("https://static-www.elastic.co/assets/blt5ba03f594a7d610a/m-guide-icon.png?q=200") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-contact {
			background: url("https://static-www.elastic.co/assets/blt38c3e853c4b1174d/m-contact-icon.png?q=200") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
	  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1><a href="/learn" title="Learn">Learn</a> |</h1>
            <h2><a href="/guide" title="Docs">Docs</a></h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="page_header"><b>PLEASE NOTE:</b>
<br/>
This page is for an as yet unreleased version of the software. Check out the <a href="../current/index.html">latest
version&#39;s documentation here</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="contributing-to-logstash.html">Contributing to Logstash</a></span> » <span class="breadcrumb-node">Contributing a Patch to a Logstash Plugin</span></div><div class="navheader"><span class="prev"><a href="contributing-to-logstash.html">
              « 
              Contributing to Logstash</a>
           
        </span><span class="next">
           
          <a href="community-maintainer.html">Logstash Plugins Community Maintainer Guide
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="contributing-patch-plugin"></a>Contributing a Patch to a Logstash Plugin<a href="https://github.com/elastic/logstash/edit/master/docs/static/contributing-patch.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>This section discusses the information you need to know to successfully contribute a patch to a Logstash plugin.</p><p>Each plugin defines its own configuration options. These control the behaviour of the plugin to some degree. Configuration
option definitions commonly include:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Data validation
</li><li class="listitem">
The default value
</li><li class="listitem">
Any required flags
</li></ul></div><p>Plugins are subclasses of a Logstash base class. A plugin’s base class defines common configuration and methods.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_input_plugins"></a>Input Plugins<a href="https://github.com/elastic/logstash/edit/master/docs/static/contributing-patch.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Input plugins ingest data from an external source. Input plugins are always associated with a codec. An input plugin
always has an associated codec plugin. Input and codec plugins operate in conjuction to create a Logstash event and add
that event to the processing queue. An input codec is a subclass of the <code class="literal">LogStash::Inputs::Base</code> class.</p><div class="horizontal"><a id="id-1.9.15.6.3"></a><p class="title"><strong>Table 1. Input API</strong></p><div class="horizontal-contents"><table summary="Input API" cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">#register() -&gt; nil</code>
</p>
</td><td valign="top">
<p>
Required. This API sets up resources for the plugin, typically the connection to the
external source.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">#run(queue) -&gt; nil</code>
</p>
</td><td valign="top">
<p>
Required. This API fetches or listens for source data, typically looping until stopped. Must handle
errors inside the loop. Pushes any created events to the queue object specified in the method argument. Some inputs may
receive batched data to minimize the external call overhead.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">#stop() -&gt; nil</code>
</p>
</td><td valign="top">
<p>
Optional. Stops external connections and cleans up.
</p>
</td></tr></tbody></table></div></div><br class="horizontal-break" /></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_codec_plugins"></a>Codec Plugins<a href="https://github.com/elastic/logstash/edit/master/docs/static/contributing-patch.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Codec plugins decode input data that has a specific structure, such as JSON input data. A codec plugin is a subclass of
<code class="literal">LogStash::Codecs::Base</code>.</p><div class="horizontal"><a id="id-1.9.15.7.3"></a><p class="title"><strong>Table 2. Codec API</strong></p><div class="horizontal-contents"><table summary="Codec API" cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">#register() -&gt; nil</code>
</p>
</td><td valign="top">
<p>
Identical to the API of the same name for input plugins.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">#decode(data){|event| block} -&gt; nil</code>
</p>
</td><td valign="top">
<p>
Must be implemented. Used to create an Event from the raw data given in the method
argument. Must handle errors. The caller must provide a Ruby block. The block is called with the created Event.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">#encode(event) -&gt; nil</code>
</p>
</td><td valign="top">
<p>
Required.  Used to create a structured data object from the given Event. May handle
errors. This method calls a block that was previously stored as @on_event with two arguments: the original event and the
data object.
</p>
</td></tr></tbody></table></div></div><br class="horizontal-break" /></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_filter_plugins"></a>Filter Plugins<a href="https://github.com/elastic/logstash/edit/master/docs/static/contributing-patch.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>A mechanism to change, mutate or merge one or more Events. A filter plugin is a subclass of the <code class="literal">LogStash::Filters::Base</code>
class.</p><div class="horizontal"><a id="id-1.9.15.8.3"></a><p class="title"><strong>Table 3. Filter API</strong></p><div class="horizontal-contents"><table summary="Filter API" cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">#register() -&gt; nil</code>
</p>
</td><td valign="top">
<p>
Identical to the API of the same name for input plugins.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">#filter(event) -&gt; nil</code>
</p>
</td><td valign="top">
<p>
Required. May handle errors. Used to apply a mutation function to the given event.
</p>
</td></tr></tbody></table></div></div><br class="horizontal-break" /></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_output_plugins"></a>Output Plugins<a href="https://github.com/elastic/logstash/edit/master/docs/static/contributing-patch.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>A mechanism to send an event to an external destination. This process may require serialization. An output plugin is a
subclass of the <code class="literal">LogStash::Outputs::Base</code> class.</p><div class="horizontal"><a id="id-1.9.15.9.3"></a><p class="title"><strong>Table 4. Output API</strong></p><div class="horizontal-contents"><table summary="Output API" cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">#register() -&gt; nil</code>
</p>
</td><td valign="top">
<p>
Identical to the API of the same name for input plugins.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">#receive(event) -&gt; nil</code>
</p>
</td><td valign="top">
<p>
Required. Must handle errors. Used to prepare the given event for transmission to
the external destination. Some outputs may buffer the prepared events to batch transmit to the destination.
</p>
</td></tr></tbody></table></div></div><br class="horizontal-break" /></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="patch-process"></a>Process<a href="https://github.com/elastic/logstash/edit/master/docs/static/contributing-patch.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>A bug or feature is identified. An issue is created in the plugin repository. A patch is created and a pull request (PR)
is submitted. After review and possible rework the PR is merged and the plugin is published.</p><p>The <a class="link" href="community-maintainer.html" title="Logstash Plugins Community Maintainer Guide">Community Maintainer Guide</a> explains, in more detail, the process of getting a patch accepted,
merged and published.  The Community Maintainer Guide also details the roles that contributors and maintainers are
expected to perform.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_testing_methodologies"></a>Testing Methodologies<a href="https://github.com/elastic/logstash/edit/master/docs/static/contributing-patch.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_test_driven_development"></a>Test Driven Development<a href="https://github.com/elastic/logstash/edit/master/docs/static/contributing-patch.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Test Driven Development, colloquially known as TDD, describes a methodology for using tests to guide evolution of source
code. For our purposes, we are only going to use a part of it, that is, before writing the fix - we create tests that
illustrate the bug by failing. We stop when we have written enough code to make the tests pass and submit the fix and
tests as a patch. It is not necessary to write the tests before the fix, but it is very easy to write a passing test
afterwards that may not actually verify that the fault is really fixed especially if the fault can be triggered via
multiple execution paths or varying input data.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_the_rspec_framework"></a>The RSpec Framework<a href="https://github.com/elastic/logstash/edit/master/docs/static/contributing-patch.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Logstash uses Rspec, a Ruby testing framework, to define and run the test suite. What follows is a summary of various
sources.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
Rspec Example
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby"> 1 # encoding: utf-8
 2 require "logstash/devutils/rspec/spec_helper"
 3 require "logstash/plugin"
 4
 5 describe "outputs/riemann" do
 6   describe "#register" do
 7     let(:output) do
 8       LogStash::Plugin.lookup("output", "riemann").new(configuration)
 9     end
10
11     context "when no protocol is specified" do
12       let(:configuration) { Hash.new }
13
14       it "the method completes without error" do
15         expect {output.register}.not_to raise_error
16       end
17     end
18
19     context "when a bad protocol is specified" do
20       let(:configuration) { {"protocol" =&gt; "fake"} }
21
22       it "the method fails with error" do
23         expect {output.register}.to raise_error
24       end
25     end
26
27     context "when the tcp protocol is specified" do
28       let(:configuration) { {"protocol" =&gt; "tcp"} }
29
30       it "the method completes without error" do
31         expect {output.register}.not_to raise_error
32       end
33     end
34   end
35
36   describe "#receive" do
37     let(:output) do
38       LogStash::Plugin.lookup("output", "riemann").new(configuration)
39     end
40
41     context "when operating normally" do
42       let(:configuration) { Hash.new }
43       let(:event) do
44         data = {"message"=&gt;"hello", "@version"=&gt;"1",
45                 "@timestamp"=&gt;"2015-06-03T23:34:54.076Z",
46                 "host"=&gt;"vagrant-ubuntu-trusty-64"}
47         LogStash::Event.new(data)
48       end
49
50       before(:example) do
51         output.register
52       end
53
54       it "should accept the event" do
55         expect { output.receive event }.not_to raise_error
56       end
57     end
58   end
59 end</pre></div></li></ol></div><p><strong>Describe blocks (lines 5, 6 and 36 in Example 1). </strong>
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">describe(string){block} -&gt; nil
describe(Class){block} -&gt; nil</pre></div><p>
</p><p>With RSpec, we are always describing the plugin method behavior. The describe block is added in logical sections and can
accept either an existing class name or a string. The string used in line 5 is the plugin name. Line 6 is the register
method, line 36 is the receive method. It is a RSpec convention to prefix instance methods with one hash and class
methods with one dot.</p><p><strong>Context blocks (lines 11, 19, 27 and 41). </strong>
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">context(string){block} -&gt; nil</pre></div><p>
</p><p>In RSpec, context blocks define sections that group tests by a variation.  The string should start with the word <code class="literal">when</code>
and then detail the variation. See line 11.  The tests in the content block should should only be for that variation.</p><p><strong>Let blocks (lines 7, 12, 20, 28, 37, 42 and 43). </strong>
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">let(symbol){block} -&gt; nil</pre></div><p>
</p><p>In RSpec, <code class="literal">let</code> blocks define resources for use in the test blocks. These resources are reinitialized for every test
block. They are available as method calls inside the test block. Define <code class="literal">let</code> blocks in <code class="literal">describe</code> and <code class="literal">context</code> blocks,
which scope the <code class="literal">let</code> block and any other nested blocks.
You can use other <code class="literal">let</code> methods defined later within the <code class="literal">let</code> block body. See lines 7-9, which define the output resource
and use the configuration method, defined with different variations in lines 12, 20 and 28.</p><p><strong>Before blocks (line 50). </strong>
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">before(symbol){block} -&gt; nil - symbol is one of :suite, :context, :example, but :all and :each are synonyms for :suite and :example respectively.</pre></div><p>
</p><p>In RSpec, <code class="literal">before</code> blocks are used to further set up any resources that would have been initialized in a <code class="literal">let</code> block.
You cannot define <code class="literal">let</code> blocks inside <code class="literal">before</code> blocks.</p><p>You can also define <code class="literal">after</code> blocks, which are typically used to clean up any setup activity performed by a <code class="literal">before</code> block.</p><p><strong>It blocks (lines 14, 22, 30 and 54). </strong>
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">it(string){block} -&gt; nil</pre></div><p>
</p><p>In RSpec, <code class="literal">it</code> blocks set the expectations that verify the behavior of the tested code. The string should not start with
<span class="emphasis"><em>it</em></span> or <span class="emphasis"><em>should</em></span>, but needs to express the outcome of the expectation.  When put together the texts from the enclosing
describe, <code class="literal">context</code> and <code class="literal">it</code> blocks should form a fairly readable sentence, as in lines 5, 6, 11 and 14:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">outputs/riemann
#register when no protocol is specified the method completes without error</pre></div><p>Readable code like this make the goals of tests easy to understand.</p><p><strong>Expect method (lines 15, 23, 31, 55). </strong>
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">expect(object){block} -&gt; nil</pre></div><p>
</p><p>In RSpec, the expect method verifies a statement that compares an actual result to an expected result. The <code class="literal">expect</code> method
is usually paired with a call to the <code class="literal">to</code> or <code class="literal">not_to</code> methods. Use the block form when expecting errors or observing for
changes. The <code class="literal">to</code> or <code class="literal">not_to</code> methods require a <code class="literal">matcher</code> object that encapsulates the expected value. The argument form
of the <code class="literal">expect</code> method encapsulates the actual value. When put together the whole line tests the actual against the
expected value.</p><p><strong>Matcher methods (lines 15, 23, 31, 55). </strong>
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">raise_error(error class|nil) -&gt; matcher instance
be(object) -&gt; matcher instance
eq(object) -&gt; matcher instance
eql(object) -&gt; matcher instance
  for more see http://www.relishapp.com/rspec/rspec-expectations/docs/built-in-matchers</pre></div><p>
</p><p>In RSpec, a matcher is an object generated by the equivalent method call (be, eq) that will be used to evaluate the
expected against the actual values.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_putting_it_all_together"></a>Putting it all together<a href="https://github.com/elastic/logstash/edit/master/docs/static/contributing-patch.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>This example fixes an <a class="ulink" href="https://github.com/logstash-plugins/logstash-output-zeromq/issues/9" target="_top">issue</a> in the ZeroMQ output
plugin. The issue does not require knowledge of ZeroMQ.</p><p>The activities in this example have the following prerequisites:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
A minimal knowledge of Git and Github. See the <a class="ulink" href="https://help.github.com/categories/bootcamp/" target="_top">Github boot camp</a>.
</li><li class="listitem">
A text editor.
</li><li class="listitem">
A JRuby <a class="ulink" href="https://www.ruby-lang.org/en/documentation/installation/#managers" target="_top">runtime</a>
<a class="ulink" href="https://howistart.org/posts/ruby/1" target="_top">environment</a>. The <code class="literal">chruby</code> tool manages Ruby versions.
</li><li class="listitem">
JRuby 1.7.22 or later.
</li><li class="listitem">
The <code class="literal">bundler</code> and <code class="literal">rake</code> gems installed.
</li><li class="listitem">
ZeroMQ <a class="ulink" href="http://zeromq.org/intro:get-the-software" target="_top">installed</a>.
</li></ul></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
In Github, fork the ZeroMQ <a class="ulink" href="https://github.com/logstash-plugins/logstash-output-zeromq" target="_top">output plugin repository</a>.
</li><li class="listitem">
On your local machine, <a class="ulink" href="https://help.github.com/articles/fork-a-repo/" target="_top">clone</a> the fork to a known folder such as
<code class="literal">logstash/</code>.
</li><li class="listitem"><p class="simpara">
Open the following files in a text editor:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">logstash-output-zeromq/lib/logstash/outputs/zeromq.rb</code>
</li><li class="listitem">
<code class="literal">logstash-output-zeromq/lib/logstash/util/zeromq.rb</code>
</li><li class="listitem">
<code class="literal">logstash-output-zeromq/spec/outputs/zeromq_spec.rb</code>
</li></ul></div></li><li class="listitem"><p class="simpara">
According to the issue, log output in server mode must indicate <code class="literal">bound</code>. Furthermore, the test file contains no tests.
</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Line 21 of <code class="literal">util/zeromq.rb</code> reads <code class="literal">@logger.info("0mq: #{server? ? 'connected' : 'bound'}", :address =&gt; address)</code></p></div></div></li><li class="listitem"><p class="simpara">
In the text editor, set the file encoding and require <code class="literal">zeromq.rb</code> for the file <code class="literal">zeromq_spec.rb</code> by adding the following
lines:
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby"># encoding: utf-8
require "logstash/outputs/zeromq"
require "logstash/devutils/rspec/spec_helper"</pre></div></li><li class="listitem"><p class="simpara">
The desired error message should read:
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">LogStash::Outputs::ZeroMQ when in server mode a 'bound' info line is logged</pre></div><p class="simpara">To properly generate this message, add a <code class="literal">describe</code> block with the fully qualified class name as the argument, a context
block, and an <code class="literal">it</code> block.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">describe LogStash::Outputs::ZeroMQ do
  context "when in server mode" do
    it "a 'bound' info line is logged" do
    end
  end
end</pre></div></li><li class="listitem"><p class="simpara">
To add the missing test, use an instance of the ZeroMQ output and a substitute logger. This examle uses an RSpec feature
called <span class="emphasis"><em>test doubles</em></span> as the substitute logger.
</p><p class="simpara">Add the following lines to <code class="literal">zeromq_spec.rb</code>, after <code class="literal">describe LogStash::Outputs::ZeroMQ do</code> and before <code class="literal">context "when in
server mode" do</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">let(:output) { described_class.new("mode" =&gt; "server", "topology" =&gt; "pushpull" }
let(:tracer) { double("logger") }</pre></div></li><li class="listitem"><p class="simpara">
Add the body to the <code class="literal">it</code> block. Add the following five lines after the line <code class="literal">context "when in server mode" do</code>:
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">allow(tracer).to receive(:debug)<a id="CO5-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
output.logger = logger<a id="CO5-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
expect(tracer).to receive(:info).with("0mq: bound", {:address=&gt;"tcp://127.0.0.1:2120"})<a id="CO5-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
output.register<a id="CO5-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
output.do_close<a id="CO5-5"></a><span><img src="images/icons/callouts/5.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO5-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Allow the double to receive <code class="literal">debug</code> method calls.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO5-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Make the output use the test double.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO5-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Set an expectation on the test to receive an <code class="literal">info</code> method call.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO5-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Call <code class="literal">register</code> on the output.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO5-5"><span><img src="images/icons/callouts/5.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Call <code class="literal">do_close</code> on the output so the test does not hang.
</p></td></tr></table></div></li></ol></div><p>At the end of the modifications, the relevant code section reads:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby"># encoding: utf-8
require "logstash/outputs/zeromq"
require "logstash/devutils/rspec/spec_helper"

describe LogStash::Outputs::ZeroMQ do
  let(:output) { described_class.new("mode" =&gt; "server", "topology" =&gt; "pushpull" }
  let(:tracer) { double("logger") }

  context "when in server mode" do
    it "a ‘bound’ info line is logged" do
      allow(tracer).to receive(:debug)
      output.logger = logger
      expect(tracer).to receive(:info).with("0mq: bound", {:address=&gt;"tcp://127.0.0.1:2120"})
      output.register
      output.do_close
    end
  end
end</pre></div><p>To run this test:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Open a terminal window
</li><li class="listitem">
Mavigate to the cloned plugin folder
</li><li class="listitem">
The first time you run the test, run the command <code class="literal">bundle install</code>
</li><li class="listitem">
Run the command <code class="literal">bundle exec rspec</code>
</li></ol></div><p>Assuming all prerequisites were installed correctly, the test fails with output similar to:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">Using Accessor#strict_set for specs
Run options: exclude {:redis=&gt;true, :socket=&gt;true, :performance=&gt;true, :couchdb=&gt;true, :elasticsearch=&gt;true,
:elasticsearch_secure=&gt;true, :export_cypher=&gt;true, :integration=&gt;true, :windows=&gt;true}

LogStash::Outputs::ZeroMQ
  when in server mode
    a ‘bound’ info line is logged (FAILED - 1)

Failures:

  1) LogStash::Outputs::ZeroMQ when in server mode a ‘bound’ info line is logged
     Failure/Error: output.register
       Double "logger" received :info with unexpected arguments
         expected: ("0mq: bound", {:address=&gt;"tcp://127.0.0.1:2120"})
              got: ("0mq: connected", {:address=&gt;"tcp://127.0.0.1:2120"})
     # ./lib/logstash/util/zeromq.rb:21:in `setup'
     # ./lib/logstash/outputs/zeromq.rb:92:in `register'
     # ./lib/logstash/outputs/zeromq.rb:91:in `register'
     # ./spec/outputs/zeromq_spec.rb:13:in `(root)'
     # /Users/guy/.gem/jruby/1.9.3/gems/rspec-wait-0.0.7/lib/rspec/wait.rb:46:in `(root)'

Finished in 0.133 seconds (files took 1.28 seconds to load)
1 example, 1 failure

Failed examples:

rspec ./spec/outputs/zeromq_spec.rb:10 # LogStash::Outputs::ZeroMQ when in server mode a ‘bound’ info line is logged

Randomized with seed 2568</pre></div><p>To correct the error, open the <code class="literal">util/zeromq.rb</code> file in your text editor and swap the positions of the words <code class="literal">connected</code>
and <code class="literal">bound</code> on line 21. Line 21 now reads:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">@logger.info("0mq: #{server? ? 'bound' : 'connected'}", :address =&gt; address)</pre></div><p>Run the test again with the <code class="literal">bundle exec rspec</code> command.</p><p>The test passes with output similar to:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-shell">Using Accessor#strict_set for specs
Run options: exclude {:redis=&gt;true, :socket=&gt;true, :performance=&gt;true, :couchdb=&gt;true, :elasticsearch=&gt;true, :elasticsearch_secure=&gt;true, :export_cypher=&gt;true, :integration=&gt;true, :windows=&gt;true}

LogStash::Outputs::ZeroMQ
  when in server mode
    a ‘bound’ info line is logged

Finished in 0.114 seconds (files took 1.22 seconds to load)
1 example, 0 failures

Randomized with seed 45887</pre></div><p><a class="ulink" href="https://help.github.com/articles/fork-a-repo/#next-steps" target="_top">Commit</a> the changes to git and Github.</p><p>Your pull request is visible from the <a class="ulink" href="https://github.com/logstash-plugins/logstash-output-zeromq/pulls" target="_top">Pull Requests</a>
section of the original Github repository. The plugin maintainers review your work, suggest changes if necessary, and
merge and publish a new version of the plugin.</p></div></div><div class="navfooter"><span class="prev"><a href="contributing-to-logstash.html">
              « 
              Contributing to Logstash</a>
           
        </span><span class="next">
           
          <a href="community-maintainer.html">Logstash Plugins Community Maintainer Guide
               »
            </a></span></div>
<!-- end body -->

            </section>

            <div id="rtpcontainer"
        >
	<h3>Top Videos</h3>
	<ul class="lists">
		<li><a href="https://www.elastic.co/webinars/get-started-with-elasticsearch/?baymax=default&elektra=docs&storm=top-video">Getting Started</a></li>
		<li><a href="http://www.elastic.co/webinars/elasticsearch-performance-optimization-tale-two-tickets/?elektra=docs">Scaling</a></li>
		<li><a href="http://www.elastic.co/webinars/shield-securing-your-data-in-elasticsearch/?elektra=docs">Security</a></li>
	</ul>
</div>


	  	




<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
	<!-- subscribe-newsletter -->
	<div id="subscribe-newsletter">
		<div class="container">
			<div class="row">
				<div class="12u">
					<div class="subscribe-wrapper" id="rtp-newsletter">
						<header>
							<h3>Subscribe to our newsletter</h3>
						</header>
						<div class="subscribe-form">
							<form id="mktoForm_1398" class="container"></form>
							<div class="form_thanks hide">
								
									<p>Thanks for subscribing! We'll keep you updated with new releases.</p>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

  	<!-- Footer -->
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2016. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
<li><a href="/brand" id="footer_brand">Brand</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div>
<!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="https://www.linkedin.com/company/elastic-co" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
						<li class="youtube grayscale"><a href="https://www.youtube.com/user/elasticsearch" target="_blank" id="footer_youtube"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("https://static-www.elastic.co/assets/bltda40eebd7c7cae9a/facebook.svg?q=200") no-repeat;}		
	
		.twitter{background:url("https://static-www.elastic.co/assets/bltfd3b1511512f4632/twitter.svg?q=200") no-repeat;}		
	
		.linkedin{background:url("https://static-www.elastic.co/assets/blt6b4f6f8d6b96f814/linkedin.svg?q=200") no-repeat;}		
	
		.xing{background:url("https://static-www.elastic.co/assets/blta76b2ae2b2f10a98/xing.svg?q=200") no-repeat;}		
	
		.youtube{background:url("https://static-www.elastic.co/assets/blt5761648c9581fb53/youtube.svg?q=200") no-repeat;}		
	
</style>

<script>
MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", 1398,function(form){
	form.onSuccess(function(form){
		$('#mktoForm_1398').css('display','none');
		$('#subscribe-newsletter header').hide();
		$('#mktoForm_1398').siblings('.form_thanks').removeClass('hide')
		dataLayer.push({'event': 'mktoFormSubmit'});
	    return false;
  	});
});
</script>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";	
</script>
<script src="https://static-www.elastic.co/static/js/jquery.autocomplete.js?q=200"></script>
<script src="https://static-www.elastic.co/static/js/script.js?q=200"></script>


   	
   	
   	
   	<script type="application/ld+json">
	
		
	
	{
	  	"@context": "http://schema.org",
	  	"@type": "Organization",
	  	"name" : "Elastic",
	  	"url": "https://www.elastic.co/",
	  	"logo": "https://www.elastic.co/static/img/elastic-logo-200.png",
		"sameAs" : [ "https://www.facebook.com/elastic.co",
			"https://twitter.com/elastic",
			"https://plus.google.com/105178019064686397293",
			"https://www.youtube.com/user/elasticsearch",
			"https://www.linkedin.com/company/elasticsearch"
		],
	  	"potentialAction": {
	    	"@type": "SearchAction",
	    	"target": "https://www.elastic.co/search?q={query_string}",
	    	"query-input": "required name=query_string"
	  	}
	}
</script>	

            <script type="text/javascript" src="docs.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>

            </body>
        

