<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>REST API
        | Elasticsearch Watcher [2.4]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Watcher [2.4]" /><link rel="up" href="reference.html" title="Reference" /><link rel="prev" href="api-java.html" title="Java API" /><link rel="next" href="watcher-settings.html" title="Watcher Settings" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Legacy/Watcher/Reference/2.4" /><meta name="DC.subject" content="Watcher" /><meta name="DC.identifier" content="2.4" />
    

    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
<meta name="apple-mobile-web-app-title" content="Elastic">
<meta name="application-name" content="Elastic">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">
<meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
<meta name="yandex-verification" content="d8a47e95d0972434" />
<!-- DC tags section -->
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
<link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >



	



<!-- end DC tags -->


	<meta name="description" content="" />



	<meta name="localized" content="true" />


















		
			<meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
		

		

    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">

	 

    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    
    

    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  <script type="text/javascript">
  // -------------------- set language based on browser language --------------------
  var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

  if($.cookie("is_lang_detected") == undefined){
    if(locales[lang] != undefined && locales[lang] != currentlocale){
      locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
      $.cookie("is_lang_detected",true ,{ path: '/'}); 
      window.location = locale_lang_url;
    } 
  }
        
  // --------------------- end of set language based on browser language -----------------
  </script>

  

	
	<link type="text/css" rel="stylesheet" href="/static/css/guide.css" />


  
<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
  <body >
  	<!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
                              height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
<script src="/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>


<script type="text/javascript">
  var active;
  
  active = Math.random() < 1 //0.9 
  
  elasticApm.init({
    active: active,
    serviceName: "elastic-co-frontend",
    serverUrl: "https://elastic-co-apm-server.app.elstc.co"
  })

  var pageLoadName
  var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
  var parts = pathname.split('/');

  if (parts.length && parts[1] === 'blog') {
    if (parts.length === 2) {
      pageLoadName =  '/blog';
    }
    else if (parts[2] === 'category') {
      pageLoadName =  '/blog/category';
    }
    else if (parts[2] === 'archive') {
      pageLoadName =  '/blog/archive';
    }
    else {
      pageLoadName =  '/blog/detail';
    }
  }
  else if (parts.length && parts[1] === 'elasticon') {
    if (parts.length === 2) {
      pageLoadName =  '/elasticon';
    }
    else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
      pageLoadName =  '/elasticon/overview';
    }
    else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
      pageLoadName =  '/elasticon/video';
    }
  }
  else if (parts.length && parts[1] === 'guide') {
    pageLoadName =  '/guide';
  }
  else if (parts.length === 2 && parts[1] === 'videos') {
    pageLoadName =  '/videos';
  }
  else if (parts.length > 2 && parts[1] === 'videos') {
    pageLoadName =  '/videos/detail';
  }
  else if (parts.length > 2 && parts[1] === 'webinars') {
    pageLoadName =  '/webinars/detail';
  }
  else {
    pageLoadName =  window.location.pathname;
  }

  console.log('apm pageLoadName:', pageLoadName, parts)
  elasticApm.setTags({env:"production"});
  elasticApm.setInitialPageLoadName(pageLoadName);
</script>

<!-- Elastic APM -->


    <!-- Header Section -->
    
<header class="header-wrapper">
  



  




<div class="navigation-wrapper">
  <div class="container">
    <nav class="navbar">
    <!-- Brand and toggle get grouped for better mobile display -->

    <div class="navbar-mobile-header navbar-header mr-20 mr-xs-0">
      <div class="row hidden-sm hidden-md hidden-lg">
        <div class="col-xs-5 hidden-sm hidden-md hidden-lg">
          <div class="navbar-mobile-header-icon navbar-mobile-header-icon-out">
            <span></span>
            <span></span>
            <span></span>
          </div>
          
        </div>
        <div class="col-xs-2 text-center">
          <div class="navbar-brand" id="elastic">
            <div id="logo">
              <a class="logo-m hidden-sm hidden-md hidden-lg" href="/">
                <img src="/assets/blta09706b1c5cc1e99/elastic-logo-mobile.svg" alt="elastic-logo-mobile">
              </a>
            </div>
          </div>
        </div>
        <div class="col-xs-5 hidden-sm hidden-md hidden-lg text-right">
          <ul class="menu-m hidden-sm hidden-md hidden-lg">
            <li class=""><a class="icon-contact" href="/contact"></a></li>

            <li id="searchbar"><a class="button icon" href="#" alt="Search"></a></li>
            <li class="lang global-language">
                
                  
                
                  
                    <a href="#">EN</a>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              <ul class="language-list">
                
                  
                    
                  
                  
                  <li><a href="/de/" data-value="/de/" id="locale-select">Deutsch</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="#" data-value="/" id="locale-select">English</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/es/" data-value="/es/" id="locale-select">Español</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/fr/" data-value="/fr/" id="locale-select">Français</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/jp/" data-value="/jp/" id="locale-select">日本語</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/kr/" data-value="/kr/" id="locale-select">한국어</a></li>
                  
                
                  
                    
                  
                  
                  <li><a href="/cn/" data-value="/cn/" id="locale-select">简体中文</a></li>
                  
                
              </ul>
            </li>
          </ul>
        </div>
      </div>

      <div class="navbar-brand hidden-xs" id="elastic">
        <div id="logo">
          <a class="hidden-xs" id="elastic-logo" href="/">
            <img src="/assets/blt244a845f141977c3/elastic-logo.svg" alt="elastic-logo">
          </a>
        </div>
      </div>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse mobile-inner-nav">
      <nav class="nav navbar-nav primary-nav-hover" id="nav">
        <ul>
        
          
            
              
            
            <li>
              <a class=" " href="/products">Products</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/cloud">Cloud</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/services">Services</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/use-cases">Customers</a>
            </li>
          
        
          
            
              
            
            <li>
              <a class=" " href="/learn">Learn</a>
            </li>
          
        
          
        
        </ul>
      </nav>
      <nav class="nav navbar-nav navbar-right hidden-xs">
        <ul>
          <li class="hidden-xs hidden-sm"><a href="/downloads">downloads</a></li>
          <li class="hidden-xs hidden-md hidden-lg"><a class="icon-download" href="/downloads"></a></li>
          <!-- To set parameters to contact button -->
          
           
            
          

          
            
            
          
          <li class="hidden-xs hidden-sm"><a class="btn btn-secondary btn-contact" href="/contact?storm=global-header-en">contact</a></li>
          <!-- ////////////////ends here///////////////-->          
          <li class="hidden-xs hidden-md hidden-lg"><a class="icon-contact" href="/contact?storm=global-header-en"></a></li>
          <li class="hidden-xs" id="searchbar"><a class="button icon" href="#" alt="Search"></a></li>

          <li class="hidden-xs lang global-language">
                
                  
                
                  
                    <a href="#">EN</a>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
               <ul class="language-list">
              
                
                  
                
              
              <li><a class="" href="/de/" data-value="/de/">Deutsch</a></li>
              
              
                
                  
                
              
              <li><a class="" href="#" data-value="/">English</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/es/" data-value="/es/">Español</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/fr/" data-value="/fr/">Français</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/jp/" data-value="/jp/">日本語</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/kr/" data-value="/kr/">한국어</a></li>
              
              
                
                  
                
              
              <li><a class="" href="/cn/" data-value="/cn/">简体中文</a></li>
              
              
            </ul>
          </li>
        </ul>
      </nav>
    </div><!-- /.navbar-collapse -->
  </nav>
  </div>
</div>

<div class="header-search-wrapper open-search"> 
  <div class="container">
    <div class="big-search">
      <i class="big-search-icon"></i>
      <form id="searchfrm" name="searchForm" autocomplete="on" action="/search" method="get">
        <ul class="tags-wrapper">
          <li class="search-field"><input type="text" name="q" id="autocomplete" class="form-control global-input" autocomplete="off"></li>
        </ul>
      </form>
      <a class="header-search-cancel" href="#"></a>
    </div>
    <div class="nav-auto-complete"></div>
  </div>
</div>
</header>
<link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">
<style> 
    
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    
      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    
      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    
    
</style>
<script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>
<script type="text/javascript">
  $(document).ready( function(){
    // if($('#scrollable-pane li').length > 3){
      $('.horizon-swiper').horizonSwiper({
        showItems: 3,
        arrows: true
      }); 
    // }
    
    $('.navbar-toggle').on('click', function(){
      $('.mobile-navigation, .menu-open').hide();
      $('.navigation-wrapper').addClass('mobile-navigation');
      $('.navbar').addClass('menu-open');
      $('.menu-close').show();
    });
    $('.menu-close').on('click', function(){
      $('.navigation-wrapper').removeClass('mobile-navigation');
      $('.navbar').removeClass('menu-open');
      $('.menu-close').hide();
    });

    var active_url = "";

    $(".navbar-mobile-header-icon").click(function(index){
      $('.navigation-wrapper').toggleClass('menu-overlay');
      $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
      $(".mobile-inner-nav").slideToggle(500);
      $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
        $(this).css({'animation-delay': (index/25)+'0.4s'});
      });
    });

    $('.dropdown-btn').on('click', function(e){
      e.preventDefault();
      setDropdown();
    });
    
    function setDropdown() {
      $('#myDropdown').slideToggle();
    }

    $('body').on('click', function(event){
      if (!event.target.matches('.dropdown-btn')) {

        var dropdowns = $(".dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    });

    // if($(window).width() < 769){
    //   var $item = $('.scrollable-panel li'), 
    //       visible = 3, //Set the number of items that will be visible
    //       index = 0, //Starting index
    //       endIndex = ( $item.length / visible ) - 1; //End index (NOTE:: Requires visible to be a factor of $item.length... You can improve this by rounding...)

    //   $('#right-arrow').click(function(){
    //     if(index < endIndex ){
    //       index++;
    //       $item.animate({'left':'-=300px'});
    //     }
    //   });

    //   $('#left-arrow').click(function(){
    //     if(index > 0){
    //       index--;            
    //       $item.animate({'left':'+=300px'});
    //     }
    //   });
    // }
  });
  $(window).resize(function () {
    $('.horizon-swiper').horizonSwiper({
      showItems: 3,
      arrows: true
    });
  });
</script>
    
      


  





  
  
  
  
    <div class="tertiary-nav bdr-btm-e0e0e0">
      <div class="container">
        <div class="p-t-b-15 clearfix">
          <div class="breadcrum-wrapper pull-left text-left">
          
            <a href="/guide">Docs</a> 
          
          </div>
          
          
          
        </div>
      </div>
    </div>

    <div class="nav-mobile-dropdown hidden-sm hidden-md hidden-lg bdr-btm-e0e0e0 clearfix">
      <div class="container text-right">
        <div class="breadcrum-wrapper pull-left text-left">
          
              <a href="/guide">Docs</a>
          
        </div>
        
        
      </div>
    </div>
  


<style type="text/css">

  
</style>
    
    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   
          
            
        			<!-- <div class="pageheader">
	<div class="common-container">
		
			<h2 class="page-title">Guide template</h2>
		
	</div>
</div> -->


        		
          

          
	<section id="guide" lang="en">
		<div class="container">
			<div class="row">
			  <!-- start body -->
				
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="page_header">From version 5.0 onward, Watcher is part of X-Pack. For more information, see 
<a href=https://www.elastic.co/guide/en/x-pack/current/xpack-alerting.html>
    Alerting on cluster and index events</a> in the X-Pack Reference. </div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Watcher
      [2.4]
    </a></span> » <span class="breadcrumb-link"><a href="reference.html">Reference</a></span> » <span class="breadcrumb-node">REST API</span></div><div class="navheader"><span class="prev"><a href="api-java.html">
              « 
              Java API</a>
           
        </span><span class="next">
           
          <a href="watcher-settings.html">Watcher Settings
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="api-rest"></a>REST API</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="api-rest-put-watch"></a>PUT Watch API</h3></div></div></div><p>The PUT watch API either registers a new watch in watcher or update an existing one. Once registered, a new document
will be added to the <code class="literal">.watches</code> index, representing the watch, and the watch’s trigger will immediately be registered
with the relevant trigger engine (typically the scheduler, for the <code class="literal">schedule</code> trigger).</p><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>Putting a watch must be done via this API only. Do not put a watch directly to the <code class="literal">.watches</code> index
            using Elasticsearch’s Index API. When integrating with Shield, a best practice is to make sure
            no <code class="literal">write</code> privileges are granted to anyone over the <code class="literal">.watches</code> API.</p></div></div><p>The following example adds a watch with the <code class="literal">my-watch</code> id that has the following qualities:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The watch schedule triggers every minute.
</li><li class="listitem">
The watch search input finds any 404 HTTP responses that occurred in the past five minutes.
</li><li class="listitem">
The watch condition checks the search results for 404s.
</li><li class="listitem">
The watch action sends an email if there are any 404s.
</li></ul></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT _watcher/watch/my-watch
{
  "trigger" : {
    "schedule" : { "cron" : "0 0/1 * * * ?" }
  },
  "input" : {
    "search" : {
      "request" : {
        "indices" : [
          "logstash*"
        ],
        "body" : {
          "query" : {
            "filtered": {
              "query": {
                "match": { "response": 404 }
              },
              "filter": {
                "range": {
                  "@timestamp" : {
                    "from": "{{ctx.trigger.scheduled_time}}||-5m",
                    "to": "{{ctx.trigger.triggered_time}}"
                 }
                }
              }
            }
          }
        }
      }
    }
  },
  "condition" : {
    "script" : "ctx.payload.hits.total &gt; 1"
  },
  "actions" : {
    "email_admin" : {
        "email" : {
          "to" : "admin@domain.host.com",
          "subject" : "404 recently encountered"
        }
      }
    }
}'</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/1.json"></div><p>A watch has the following fields:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top"> Name              </th><th align="left" valign="top"> Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">trigger</code></p></td><td align="left" valign="top"><p>The <a class="link" href="trigger.html" title="Triggers">trigger</a> that defines when the watch should run</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">input</code></p></td><td align="left" valign="top"><p>The <a class="link" href="input.html" title="Inputs">input</a> that defines the input that loads the data for the watch</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">condition</code></p></td><td align="left" valign="top"><p>The <a class="link" href="condition.html" title="Conditions">condition</a> that defines if the actions should be run</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">actions</code></p></td><td align="left" valign="top"><p>The list of <a class="link" href="actions.html" title="Actions">actions</a> that will be run if the condition matches</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">meta</code></p></td><td align="left" valign="top"><p>Metadata json that will be copied into the history entries.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">throttle_period</code></p></td><td align="left" valign="top"><p>The minimum time between actions being run, the default for this is 5 seconds. This default can be changed in the config file with the setting <code class="literal">watcher.throttle.period.default_period</code>.</p></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_timeouts"></a>Timeouts</h4></div></div></div><p>When updating a watch while it is executing, the put action will block and wait for the watch execution
to finish. Depending on the nature of the watch, in some situations this can take a while. For this reason,
the put watch action is associated with a timeout that is set to 10 seconds by default. You can control this
timeout by passing in the <code class="literal">master_timeout</code> parameter.</p><p>The following snippet shows how to change the default timeout of the put action to 30 seconds:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT _watcher/watch/my-watch?master_timeout=30s</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="api-rest-put-watch-active-state"></a>Controlling Default Active State</h4></div></div></div><p>When adding a watch you can also define its initial <a class="link" href="watch-active-state.html" title="Watch Active State">active state</a>. You do that by
setting the <code class="literal">active</code> parameter. The following command add a watch and sets it to be inactive by default:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT _watcher/watch/my-watch?active=false</pre></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>If you omit the <code class="literal">active</code> parameter, the watch is set to the active state by default.</p></div></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="api-rest-get-watch"></a>Get Watch API</h3></div></div></div><p>This API retrieves a watch by its id.</p><p>The following example gets a watch with <code class="literal">my-watch</code> id:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET _watcher/watch/my-watch</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/2.json"></div><p>This is an example of the output:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
  "found": true,
  "_id": "my_watch",
  "_status": { <a id="CO37-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
    "last_checked": "2015-05-26T18:21:08.630Z",
    "last_met_condition": "2015-05-26T18:21:08.630Z",
    "actions": {
      "email_admin": {
        "ack_status": {
          "timestamp": "2015-05-26T18:21:09.982Z",
          "state": "acked"
        },
        "last_execution": {
          "timestamp": "2015-05-26T18:21:04.106Z",
          "successful": true
        },
        "last_successful_execution": {
          "timestamp": "2015-05-26T18:21:04.106Z",
          "successful": true
        },
        "last_throttle": {
          "timestamp": "2015-05-26T18:21:08.630Z",
          "reason": "throttling interval is set to [5 seconds] but time elapsed since last execution is [4 seconds and 530 milliseconds]"
        }
      }
    }
  },
  "watch": {
    "input": {
      "search": {
        "request": {
          "search_type": "query_then_fetch",
          "indices": [
            "logstash*"
          ],
          "types": [],
          "body": {
            "query": {
              "filtered": {
                "filter": {
                  "range": {
                    "@timestamp": {
                      "from": "{{ctx.trigger.scheduled_time}}||-5m",
                      "to": "{{ctx.trigger.triggered_time}}"
                    }
                  }
                },
                "query": {
                  "match": {
                    "response": 404
                  }
                }
              }
            }
          }
        }
      }
    },
    "condition": {
      "script": {
        "type": "inline",
        "lang": "groovy",
        "params": {},
        "script": "ctx.payload.hits.total &gt; 1"
      }
    },
    "trigger": {
      "schedule": {
        "cron": "0 0/1 * * * ?"
      }
    },
    "actions": {
      "email_admin": {
        "email": {
          "subject": {
            "type": "inline",
            "lang": "mustache",
            "params": {},
            "script": "404 recently encountered"
          },
          "to": [
            "someone@domain.host.com"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO37-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The retrieved watch will return with its current status
</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="api-rest-delete-watch"></a>Delete Watch API</h3></div></div></div><p>The DELETE watch API removes a specific watch (identified by its <code class="literal">id</code>) from watcher. Once removed, the document
representing the watch in the <code class="literal">.watches</code> index will be gone and it will never be executed again.</p><p>Please note that deleting a watch <span class="strong strong"><strong>does not</strong></span> delete any watch execution records related to this watch from
the <a class="link" href="watch-history.html" title="Monitoring Watch Execution">Watch History</a>.</p><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>Deleting a watch must be done via this API only. Do not delete the watch directly from the <code class="literal">.watches</code> index
            using Elasticsearch’s DELETE Document API. When integrating with Shield, a best practice is to make sure
            no <code class="literal">write</code> privileges are granted to anyone over the <code class="literal">.watches</code> API.</p></div></div><p>The following example deletes a watch with the <code class="literal">my-watch</code> id:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">DELETE _watcher/watch/my-watch</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/3.json"></div><p>This is a sample output</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
   "found": true,
   "_id": "my_watch",
   "_version": 10
}</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_timeouts_2"></a>Timeouts</h4></div></div></div><p>When deleting a watch while it is executing, the delete action will block and wait for the watch execution
to finish. Depending on the nature of the watch, in some situations this can take a while. For this reason,
the delete watch action is associated with a timeout that is set to 10 seconds by default. You can control this
timeout by passing in the <code class="literal">master_timeout</code> parameter.</p><p>The following snippet shows how to change the default timeout of the delete action to 30 seconds:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">DELETE _watcher/watch/my-watch?master_timeout=30s</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/4.json"></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="api-rest-execute-watch"></a>Execute Watch API</h3></div></div></div><p>The execute watch API forces the execution of a stored watch. It can be used to force
execution of the watch outside of its triggering logic, or to test the watch for
debugging purposes.</p><p>The following example executes the <code class="literal">my-watch</code> watch:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">POST _watcher/watch/my-watch/_execute</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/5.json"></div><p>For testing and debugging purposes, you also have fine-grained control on how the
watch is executed—execute the watch without executing all of its actions or by simply
simulating them. You can also force execution by ignoring the watch’s condition and
control whether a watch record would be written to the watch history after execution.</p><p>This API supports the following fields:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /><col class="col_4" /></colgroup><thead><tr><th align="left" valign="top"> Name               </th><th align="left" valign="top"> Required </th><th align="left" valign="top"> Default </th><th align="left" valign="top"> Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>trigger_data</p></td><td align="left" valign="top"><p>no</p></td><td align="left" valign="top"><p></p></td><td align="left" valign="top"><p>This structure is parsed as the data of
                                            the trigger event that will be used during
                                            the watch execution</p></td></tr><tr><td align="left" valign="top"><p>ignore_condition</p></td><td align="left" valign="top"><p>no</p></td><td align="left" valign="top"><p>false</p></td><td align="left" valign="top"><p>When set to <code class="literal">true</code>, the watch execution
                                            uses the <a class="link" href="condition.html#condition-always" title="Always Condition">Always</a>
                                            Condition. This can also be specified as a HTTP parameter.</p></td></tr><tr><td align="left" valign="top"><p>alternative_input</p></td><td align="left" valign="top"><p>no</p></td><td align="left" valign="top"><p>null</p></td><td align="left" valign="top"><p>When present, the watch uses this object as a payload
                                            instead of executing its own input.</p></td></tr><tr><td align="left" valign="top"><p>action_modes</p></td><td align="left" valign="top"><p>no</p></td><td align="left" valign="top"><p>null</p></td><td align="left" valign="top"><p>Determines how to handle the watch actions as part
                                            of the watch execution. See
                                            <a class="link" href="api-rest.html#api-rest-execute-watch-action-mode" title="Action Execution Modes">Action Execution Modes</a>
                                            for more information.</p></td></tr><tr><td align="left" valign="top"><p>record_execution</p></td><td align="left" valign="top"><p>no</p></td><td align="left" valign="top"><p>false</p></td><td align="left" valign="top"><p>When set to <code class="literal">true</code>, the watch record representing
                                            the watch execution result is persisted to
                                            the <code class="literal">.watch_history</code> index for the current time.
                                            In addition, the status of the watch is
                                            updated, possbily throttling subsequent executions.
                                            This can also be specified as a HTTP parameter.</p></td></tr><tr><td align="left" valign="top"><p>watch</p></td><td align="left" valign="top"><p>no</p></td><td align="left" valign="top"><p>null</p></td><td align="left" valign="top"><p>When present, this <a class="link" href="watch-definition.html" title="Watch Definition">watch</a> is
                                            used instead of the one specified in the request. This
                                            watch is not persisted to the index and record_execution
                                            cannot be set.</p></td></tr></tbody></table></div><p>The following example shows a comprehensive example of executing the <code class="literal">my-watch</code> watch:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">POST _watcher/watch/my-watch/_execute
{
  "trigger_data" : { <a id="CO38-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
     "triggered_time" : "now",
     "scheduled_time" : "now"
  },
  "alternative_input" : { <a id="CO38-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
    "foo" : "bar"
  },
  "ignore_condition" : true, <a id="CO38-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
  "action_modes" : {
    "my-action" : "force_simulate" <a id="CO38-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
  },
  "record_execution" : true <a id="CO38-5"></a><span><img src="images/icons/callouts/5.png" alt="" /></span>
}</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/6.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO38-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The triggered and schedule times are provided.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO38-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The input as defined by the watch is ignored and instead the
    provided input will be used as the execution payload.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO38-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The condition as defined by the watch will be ignored and will
    be assumed to evaluate to <code class="literal">true</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO38-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Forces the simulation of <code class="literal">my-action</code>. Forcing the simulation
    means that throttling is ignored and the watch is simulated by
    Watcher instead of being executed normally.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO38-5"><span><img src="images/icons/callouts/5.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The execution of the watch will create a watch record in the
    watch history, and the throttling state of the watch will
    potentially be updated accordingly.
</p></td></tr></table></div><p>This is an example of the output:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
   "_id": "my-watch_0-2015-06-02T23:17:55.124Z", <a id="CO39-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
   "watch_record": { <a id="CO39-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
      "watch_id": "my-watch",
      "trigger_event": {
         "type": "manual",
         "triggered_time": "2015-06-02T23:17:55.124Z",
         "manual": {
            "schedule": {
               "scheduled_time": "2015-06-02T23:17:55.124Z"
            }
         }
      },
      "state": "executed",
      "input": {
         "search": {
            "request": {
               "search_type": "query_then_fetch",
               "indices": [
                  "logstash*"
               ],
               "types": [],
               "body": {
                  "query": {
                     "filtered": {
                        "query": {
                           "match": {
                              "response": 404
                           }
                        },
                        "filter": {
                           "range": {
                              "@timestamp": {
                                 "from": "{{ctx.trigger.scheduled_time}}||-5m",
                                 "to": "{{ctx.trigger.triggered_time}}"
                              }
                           }
                        }
                     }
                  }
               }
            }
         }
      },
      "condition": {
         "script": "ctx.payload.hits.total &gt; 1"
      },
      "result": { <a id="CO39-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
         "execution_time": "2015-06-02T23:17:55.124Z",
         "execution_duration": 12608,
         "input": {
            "type": "simple",
            "payload": {
               "foo": "bar"
            }
         },
         "condition": {
            "type": "always",
            "met": true
         },
         "actions": [
            {
               "id": "email_admin",
               "type" : "email"
               "status" : "success"
               "email": {
                  "account": "gmail",
                  "email": {
                     "id": "my-watch_0-2015-05-30T01:14:05.319Z",
                     "from": "watcher@example.com",
                     "sent_date": "2015-05-30T01:14:05.319Z",
                     "to": [
                        "admin@domain.host.com"
                     ],
                     "subject": "404 recently encountered"
                  }
               }
            }
         ]
      }
   }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO39-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The id of the watch record as it would be stored in the <code class="literal">.watch_history</code> index.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO39-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The watch record document as it would be stored in the <code class="literal">.watch_history</code> index.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO39-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The watch execution results.
</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="api-rest-execute-watch-action-mode"></a>Action Execution Modes</h4></div></div></div><p>Action modes define how actions will be handled during the watch execution. There are five
possible modes an action can be associated with:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top"> Name              </th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>simulate</p></td><td align="left" valign="top"><p>The action execution will be simulated. Each action type define its own
                      simulation mode. For example, The <a class="link" href="actions.html#actions-email" title="Email Action">email</a> action
                      will create the email that would have been sent but will not actually
                      send it. In this mode, the action may be throttled if the current state
                      of the watch indicates it should be.</p></td></tr><tr><td align="left" valign="top"><p>force_simulate</p></td><td align="left" valign="top"><p>Similar to the the <code class="literal">simulate</code> mode, except the action will not be
                      throttled even if the current state of the watch indicates it should be.</p></td></tr><tr><td align="left" valign="top"><p>execute</p></td><td align="left" valign="top"><p>Executes the action as it would have been executed if the watch would have
                      been triggered by its own trigger. The execution may be throttled if the
                      current state of the watch indicates it should be.</p></td></tr><tr><td align="left" valign="top"><p>force_execute</p></td><td align="left" valign="top"><p>Similar to the <code class="literal">execute</code> mode, except the action ill not be throttled
                      even if the current state of the watch indicates it should be.</p></td></tr><tr><td align="left" valign="top"><p>skip</p></td><td align="left" valign="top"><p>The action will be skipped and won’t be executed or simulated.
                      Effectively forcing the action to be throttled.</p></td></tr></tbody></table></div><p>You can set a different execution mode for every action by simply associating the mode name
with the action id:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">POST _watcher/watch/my-watch/_execute
{
  "action_modes" : {
    "action1" : "force_simulate",
    "action2" : "skip"
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/7.json"></div><p>You can also associate a single execution mode with all the watch’s actions using <code class="literal">_all</code>
as the action id:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">POST _watcher/watch/my-watch/_execute
{
  "action_modes" : {
    "_all" : "force_execute"
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/8.json"></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="api-rest-execute-inline-watch"></a>Inline Watch Execution</h4></div></div></div><p>You can use the Execute API to execute watches that are not yet registered in Watcher by
specifying the watch definition inline. This serves as great tool for testing and debugging
your watches prior to adding them to Watcher.</p><p>The following example demonstrates how you can test a watch defintion:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">POST _watcher/watch/_execute
{
  "watch" : {
    "trigger" : { "schedule" : { "interval" : "10s" } },
    "input" : {
      "search" : {
        "request" : {
          "indices" : [ "logs" ],
          "body" : {
            "query" : {
              "match" : { "message": "error" }
            }
          }
        }
      }
    },
    "condition" : {
      "compare" : { "ctx.payload.hits.total" : { "gt" : 0 }}
    },
    "actions" : {
      "log_error" : {
        "logging" : {
          "text" : "Found {{ctx.payload.hits.total}} errors in the logs"
        }
      }
    }
  }
}</pre></div><p>All other settings for this API still apply take effect when inlining a watch.
In the following snippet, while the watch is defined with a <code class="literal">compare</code> condition,
during execution this condition will be ignored:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">POST _watcher/watch/_execute
{
  "ignore_condition" : true,
  "watch" : {
    "trigger" : { "schedule" : { "interval" : "10s" } },
    "input" : {
      "search" : {
        "request" : {
          "indices" : [ "logs" ],
          "body" : {
            "query" : {
              "match" : { "message": "error" }
            }
          }
        }
      }
    },
    "condition" : {
      "compare" : { "ctx.payload.hits.total" : { "gt" : 0 }}
    },
    "actions" : {
      "log_error" : {
        "logging" : {
          "text" : "Found {{ctx.payload.hits.total}} errors in the logs"
        }
      }
    }
  }
}</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="api-rest-ack-watch"></a>Ack Watch API</h3></div></div></div><p><a class="link" href="actions.html#actions-ack-throttle" title="Acknowledgement and Throttling">Acknowledging</a> a watch enables you to manually throttle
execution of the watch’s actions. An action’s <span class="emphasis"><em>acknowledgement state</em></span> is stored in the
<code class="literal">_status.actions.&lt;id&gt;.ack.state</code> structure.</p><p>The current status of a watch and the state of its actions is returned with the watch
definition when you call the <a class="link" href="api-rest.html#api-rest-get-watch" title="Get Watch API">Get Watch API</a>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">GET _watcher/watch/&lt;watch_id&gt;</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/9.json"></div><p>The action state of a newly-created watch is <code class="literal">awaits_successful_execution</code>.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"_status": {
   ...
   "actions": {
    "action_id": {
     "ack": {
      "timestamp": "2015-05-26T18:04:27.723Z",
      "state": "awaits_successful_execution"
     },
     ...
    }
   }
}</pre></div><p>When the watch runs and the condition matches, the value of the <code class="literal">ack.state</code> changes
to <code class="literal">ackable</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"_status": {
   ...
   "actions": {
    "action_id": {
     "ack": {
      "timestamp": "2015-05-26T18:19:08.758Z",
      "state": "ackable"
     },
     ...
    }
   }
}</pre></div><p>Acknowledging the watch action (using the ACK API) sets the value of the <code class="literal">ack.state</code>
to <code class="literal">acked</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"_status": {
   ...
   "actions": {
    "action_id": {
     "ack": {
      "timestamp": "2015-05-26T18:21:09.982Z",
      "state": "acked"
     },
     ...
    }
   }
}</pre></div><p>Acknowledging an action throttles further executions of that action until its
<code class="literal">ack.state</code> is reset to <code class="literal">awaits_successful_execution</code>. This happens when the watch’s condition
is checked and is not met (the condition evaluates to <code class="literal">false</code>).</p><p>The following snippet shows how to ack a watch action identified by its id. In this example, the
watch id is <code class="literal">my-watch</code> and the id of the action being acknowledged is <code class="literal">my-action</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT _watcher/watch/my-watch/my-action/_ack</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/10.json"></div><p>As a response to this request, the full watch status is returned:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
   "_status": {
      "last_checked": "2015-05-26T18:21:08.630Z",
      "last_met_condition": "2015-05-26T18:21:08.630Z",
      "actions": {
         "my-action": {
            "ack_status": {
               "timestamp": "2015-05-26T18:21:09.982Z",
               "state": "acked"
            },
            "last_execution": {
               "timestamp": "2015-05-26T18:21:04.106Z",
               "successful": true
            },
            "last_successful_execution": {
               "timestamp": "2015-05-26T18:21:04.106Z",
               "successful": true
            },
            "last_throttle": {
               "timestamp": "2015-05-26T18:21:08.630Z",
               "reason": "throttling interval is set to [5 seconds] but time elapsed since last execution is [4 seconds and 530 milliseconds]"
            }
         }
      }
   }
}</pre></div><p>You can acknowledge multiple actions by assigning the <code class="literal">actions</code> parameter a
comma-separated list of action ids:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT _watcher/watch/my-watch/action1,action2/_ack</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/11.json"></div><p>To acknowledge all of a watch’s actions, simply omit the <code class="literal">actions</code> parameter:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT _watcher/watch/my-watch/_ack</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/12.json"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_timeouts_3"></a>Timeouts</h4></div></div></div><p>If you acknowledge a watch while it is executing, the ack action blocks and waits for the watch
execution to finish. For some watches, this can take a significant amount of time. By default,
the ack watch action has a timeout of 10 seconds. You can change the timeout setting by
specifying the <code class="literal">master_timeout</code> parameter.</p><p>The following snippet shows how to change the default timeout of the ack action to 30 seconds:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT _watcher/watch/my-watch/_ack?master_timeout=30s</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/13.json"></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="api-rest-activate-watch"></a>Activate Watch API</h3></div></div></div><p>A watch can be either <a class="link" href="watch-active-state.html" title="Watch Active State">active or inactive</a>. This API enables
you to activate a currently inactive watch.</p><p>The status of an inactive watch is returned with the watch definition
when you call the <a class="link" href="api-rest.html#api-rest-get-watch" title="Get Watch API">Get Watch API</a>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">GET _watcher/watch/&lt;watch_id&gt;</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/14.json"></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"_status": {
   "state" : {
    "active" : false,
    "timestamp" : "2015-08-20T12:21:32.734Z"
   }
   "actions": {
     ...
   }
  }
}</pre></div><p>You can activate the watch by executing the following API call:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT _watcher/watch/&lt;watch_id&gt;/_activate</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/15.json"></div><p>The new state of the watch is returned as part of its overall status.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"_status": {
   "state" : {
    "active" : true,
    "timestamp" : "2015-09-04T08:39:46.816Z"
   }
   "actions": {
     ...
   }
  }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="api-rest-deactivate-watch"></a>Deactivate Watch API</h3></div></div></div><p>A watch can be either <a class="link" href="watch-active-state.html" title="Watch Active State">active or inactive</a>. This API enables
you to deactivate a currently active watch.</p><p>The status of an active watch is returned with the watch definition
when you call the <a class="link" href="api-rest.html#api-rest-get-watch" title="Get Watch API">Get Watch API</a>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">GET _watcher/watch/&lt;watch_id&gt;</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/16.json"></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"_status": {
   "state" : {
    "active" : true,
    "timestamp" : "2015-08-20T12:21:32.734Z"
   }
   "actions": {
     ...
   }
  }
}</pre></div><p>You can deactivate the watch by executing the following API call:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT _watcher/watch/&lt;watch_id&gt;/_deactivate</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/17.json"></div><p>The new state of the watch is returned as part of its overall status.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"_status": {
   "state" : {
    "active" : false,
    "timestamp" : "2015-09-04T08:39:46.816Z"
   }
   "actions": {
     ...
   }
  }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="api-rest-info"></a>Info API</h3></div></div></div><p>The watcher info API gives basic version information on the watcher plugin that is installed.</p><p>The following example queries the <code class="literal">info</code> API.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET _watcher</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/18.json"></div><p>A successful call returns a JSON structure similar to the following example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
   "version": {
      "name": "{version}",
      "number": "{version}", <a id="CO40-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
      "build_hash": "41f64213d2d370bf66f0e9b839a30a19", <a id="CO40-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
      "build_timestamp": "2015-04-07T13:34:42Z", <a id="CO40-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
      "build_snapshot": true <a id="CO40-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
   }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO40-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The build number of the plugin
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO40-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The build hash of the plugin
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO40-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The time the plugin was built
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO40-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Whether or not this plugin was a development snapshot build
</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="api-rest-stats"></a>Stats API</h3></div></div></div><p>The watcher <code class="literal">stats</code> API returns information on the aspects of watcher on your cluster.</p><p>The watcher <code class="literal">stats</code> API supports the following request options</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /><col class="col_4" /></colgroup><thead><tr><th align="left" valign="top"> Name               </th><th align="left" valign="top"> Required </th><th align="left" valign="top"> Default </th><th align="left" valign="top"> Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>metric</p></td><td align="left" valign="top"><p>no</p></td><td align="left" valign="top"><p>null</p></td><td align="left" valign="top"><p>What metric should be returned.</p></td></tr></tbody></table></div><p>The supported metric values:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top"> Metric             </th><th align="left" valign="top"> Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>executing_watches</p></td><td align="left" valign="top"><p>Include the current executing watches in the response.</p></td></tr><tr><td align="left" valign="top"><p>queued_watches</p></td><td align="left" valign="top"><p>Include the watches queued for execution in the response.</p></td></tr><tr><td align="left" valign="top"><p>_all</p></td><td align="left" valign="top"><p>Include all metrics in the response.</p></td></tr></tbody></table></div><p>The watcher <code class="literal">stats</code> API always returns basic metrics regardless of the <code class="literal">metric</code> option.</p><p>The following example queries the <code class="literal">stats</code> API including the basic metrics:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET _watcher/stats</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/19.json"></div><p>A successful call returns a JSON structure similar to the following example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
   "watcher_state": "started",  <a id="CO41-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
   "watch_count": 1, <a id="CO41-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
   "execution_thread_pool": {
      "size": 1000, <a id="CO41-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
      "max_size": 1 <a id="CO41-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
   }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO41-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The current state of watcher. May be either <code class="literal">started</code>, <code class="literal">starting</code> or <code class="literal">stopped</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO41-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The number of watches currently registered in watcher.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO41-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The number of watches that were triggered and currently queued for execution.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO41-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The largest size of the execution thread pool indicating the largest number of concurrent executing watches.
</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_current_executing_watches_metric"></a>Current executing watches metric</h4></div></div></div><p>The current executing watches metric gives insight into the watches that are currently being executed by Watcher.
Per watch that is executing information is shared, like the <code class="literal">watch_id</code>, when execution started and at what phase the
execution is.</p><p>To include this metric, the <code class="literal">metric</code> option should be set to <code class="literal">executing_watches</code> or <code class="literal">_all</code>.</p><p>The following example specifies the <code class="literal">metric</code> option as a query string argument and will include the basic metrics and
metrics about the current watches being executed:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET _watcher/stats?metric=executing_watches</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/20.json"></div><p>The following example specifies the <code class="literal">metric</code> option as part of the url path:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET _watcher/stats/current_watches</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/21.json"></div><p>An example of a successful json response that captures a watch in execution:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
   "watcher_state": "started",
   "watch_count": 2,
   "execution_thread_pool": {
      "queue_size": 1000,
      "max_size": 20
   },
   "current_watches": [ <a id="CO42-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
      {
         "watch_id": "slow_condition", <a id="CO42-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
         "watch_record_id": "slow_condition_3-2015-05-13T07:42:32.179Z", <a id="CO42-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
         "triggered_time": "2015-05-12T11:53:51.800Z", <a id="CO42-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
         "execution_time": "2015-05-13T07:42:32.179Z", <a id="CO42-5"></a><span><img src="images/icons/callouts/5.png" alt="" /></span>
         "execution_phase": "condition" <a id="CO42-6"></a><span><img src="images/icons/callouts/6.png" alt="" /></span>
      }
   ]
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO42-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
A list of all the Watches that are currently being executed by Watcher. In case of an empty array no executing watches
    had been captured. The captured watches are sorted by execution time in descending order. So the longest running watch
    is always on top.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO42-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The id of the watch being executed.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO42-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The id of the watch record.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO42-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The time the watch was triggered by the trigger engine.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO42-5"><span><img src="images/icons/callouts/5.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The time the watch was executed. This is just before the input is being executed.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO42-6"><span><img src="images/icons/callouts/6.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The current execution phase the watch is in. Can be <code class="literal">input</code>, <code class="literal">condition</code> or <code class="literal">action</code>.
</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_queued_watches_metric"></a>Queued watches metric</h4></div></div></div><p>When a watch triggers it is being prepared for execution and when there is capacity the watch get executed.
If many watches trigger concurrently and there is no capacity to execute then watches are queued up. These watches
are then queued for execution. The queued watches metric gives insight what watches are queued for execution.</p><p>To include this metric, the <code class="literal">metric</code> option should include <code class="literal">queued_watches</code> or <code class="literal">_all</code>.</p><p>The following example specifies the <code class="literal">queued_watches</code> metric option and will include the basic metrics and
the watches queued for execution:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET _watcher/stats/queued_watches</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/22.json"></div><p>An example of a successful json response that captures a watch in execution:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
   "watcher_state": "started",
   "watch_count": 10,
   "execution_thread_pool": {
      "queue_size": 1000,
      "max_size": 20
   },
   "queued_watches": [ <a id="CO43-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
         {
            "watch_id": "slow_condition4", <a id="CO43-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
            "watch_record_id": "slow_condition4_223-2015-05-21T11:59:59.811Z", <a id="CO43-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
            "triggered_time": "2015-05-21T11:59:59.811Z", <a id="CO43-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
            "execution_time": "2015-05-21T11:59:59.811Z" <a id="CO43-5"></a><span><img src="images/icons/callouts/5.png" alt="" /></span>
         },
      ...
   ]
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO43-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
A list of all the Watches that are queued for execution. In case of an empty array no watches are queued for execution.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO43-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The id of the watch queued for execution.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO43-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The id of the watch record.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO43-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The time the watch was triggered by the trigger engine.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO43-5"><span><img src="images/icons/callouts/5.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The time the watch was went into a queued state.
</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="api-rest-stop"></a>Stop API</h3></div></div></div><p>The <code class="literal">stop</code> watcher API stops the watcher service if the service is running, as in the following example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT _watcher/_stop</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/23.json"></div><p>Watcher returns the following response if the request is successful:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
   "acknowledged": true
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="api-rest-start"></a>Start API</h3></div></div></div><p>The <code class="literal">start</code> watcher API starts the watcher service if the service is not already running, as in the following example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT _watcher/_start</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/24.json"></div><p>Watcher returns the following response if the request is successful:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
   "acknowledged": true
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="api-rest-restart"></a>Restart API</h3></div></div></div><p>The <code class="literal">restart</code> watcher API stops, then starts the watcher service, as in the following example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT _watcher/_restart</pre></div><div class="sense_widget" data-snippet="snippets/api-rest/25.json"></div><p>Watcher returns the following response if the request is successful:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
   "acknowledged": true
}</pre></div></div></div><div class="navfooter"><span class="prev"><a href="api-java.html">
              « 
              Java API</a>
           
        </span><span class="next">
           
          <a href="watcher-settings.html">Watcher Settings
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
					<div id="rtpcontainer" style="display: block;">
						<div class="mktg-promo">
						<h3>Getting Started Videos</h3>
						<ul class="icons">
							<li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
							<li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
							<li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
						</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

        </div>
      	


<div id="footer-subscribe" class="home-footer-subscribe">
  <div class="subscribe-wrapper">
    <div class="container">
      <div class="subscribe-form-container">
        <div class="subscribe-title col-md-12 col-lg-6">
            <h5>Be in the know with the latest and greatest from Elastic.</h5>
        </div>
        <div class="subscribe-form col-md-12 col-lg-6">
          <form class="mktoForm sb-form"></form>
        </div>
      </div>
      <div class="form_thanks hide">
        
          <p>Thanks for subscribing! We'll keep you updated with new releases.</p>
        
      </div>
    </div>
  </div>
</div>
<!--subscribe newsletter end-->

<!-- Footer Section -->
<footer class="footer-wrapper">
  <div class="container">
    <div class="row footer-content">
        
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3><a href="/products">Products ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/products/elasticsearch">Elasticsearch</a></li>
                  
                
              
                
                  
                    <li><a href="/products/kibana">Kibana</a></li>
                  
                
              
                
                  
                    <li><a href="/products/beats">Beats</a></li>
                  
                
              
                
                  
                    <li><a href="/products/logstash">Logstash</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack">Stack Features (formerly X-Pack)</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/security">Security</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/alerting">Alerting</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/canvas">Canvas</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/monitoring">Monitoring</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/graph">Graph</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/reporting">Reporting</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/machine-learning">Machine Learning</a></li>
                  
                
              
                
                  
                    <li><a href="/products/stack/elasticsearch-sql">Elasticsearch SQL</a></li>
                  
                
              
                
                  
                    <li><a href="/products/hadoop">Elasticsearch-Hadoop</a></li>
                  
                
              
                
                  
                    <li><a href="/products/ece">Elastic Cloud Enterprise</a></li>
                  
                
              
              </ul>
              
                <h3><a href=""></a></h3>
              
              
              
              <ul class="">
              
              </ul>
          </div>    
      
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3><a href="/solutions">Solutions ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/solutions/logging">Logging</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/metrics">Metrics</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/site-search">Site Search</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/security-analytics">Security Analytics</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/apm">APM</a></li>
                  
                
              
                
                  
                    <li><a href="/solutions/app-search">App Search</a></li>
                  
                
              
              </ul>
              
                <h3><a href="/cloud">Elastic Cloud ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/cloud/elasticsearch-service">Elasticsearch Service</a></li>
                  
                
              
                
                  
                    <li><a href="/aws-elasticsearch-service">AWS Elasticsearch Service Comparison</a></li>
                  
                
              
                
                  
                    <li><a href="/cloud/app-search-service">Elastic App Search Service</a></li>
                  
                
              
                
                  
                    <li><a href="/cloud/site-search-service">Elastic Site Search Service</a></li>
                  
                
              
              </ul>
          </div>    
      
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3>Resources</h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/blog">Blog</a></li>
                  
                
              
                
                  
                    <li><a href="https://cloud-status.elastic.co">Cloud Status</a></li>
                  
                
              
                
                  
                    <li><a href="/community">Community</a></li>
                  
                
              
                
                  
                    <li><a href="/use-cases">Customers & Use Cases</a></li>
                  
                
              
                
                  
                    <li><a href="/guide">Documentation</a></li>
                  
                
              
                
                  
                    <li><a href="/elasticon">Elastic{ON} Events</a></li>
                  
                
              
                
                  
                    <li><a href="https://discuss.elastic.co/">Forums</a></li>
                  
                
              
                
                  
                    <li><a href="/community/meetups">Meetups</a></li>
                  
                
              
                
                  
                    <li><a href="/subscriptions">Subscriptions</a></li>
                  
                
              
                
                  
                    <li><a href="https://support.elastic.co">Support Portal</a></li>
                  
                
              
                
                  
                    <li><a href="/videos">Videos & Webinars</a></li>
                  
                
              
                
                  
                    <li><a href="/training">Training</a></li>
                  
                
              
              </ul>
              
                <h3></h3>
              
              
              
              <ul class="">
              
              </ul>
          </div>    
      
          <div class="col-xs-6 col-sm-3 col-md-3">
              
                <h3><a href="/about">About ></a></h3>
              
              
              
              <ul class="">
              
                
                  
                    <li><a href="/about/careers">Careers/Jobs</a></li>
                  
                
              
                
                  
                    <li><a href="/about/our-source-code">Our Source Code</a></li>
                  
                
              
                
                  
                    <li><a href="/about/teams">Teams</a></li>
                  
                
              
                
                  
                    <li><a href="/about/teams/board">Board of Directors</a></li>
                  
                
              
                
                  
                    <li><a href="/about/teams/leadership">Leadership</a></li>
                  
                
              
                
                  
                    <li><a href="/contact">Contact</a></li>
                  
                
              
                
                  
                    <li><a href="/about/history-of-elasticsearch">Our Story</a></li>
                  
                
              
                
                  
                    <li><a href="/about/why-open-source">Why Open Source</a></li>
                  
                
              
                
                  
                    <li><a href="/about/distributed">Distributed by Intention</a></li>
                  
                
              
                
                  
                    <li><a href="/about/partners">Partners</a></li>
                  
                
              
                
                  
                    <li><a href="/about/press">Media</a></li>
                  
                
              
                
                  
                    <li><a href="https://ir.elastic.co">Investor Relations</a></li>
                  
                
              
                
                  
                    <li><a href="https://www.elastic.shop">Elastic Store</a></li>
                  
                
              
              </ul>
              
                <h3><a href=""></a></h3>
              
              
              
              <ul class="">
              
              </ul>
          </div>    
       
    </div>
     <!-- Social Media Section -->
    <div class="row social-icon">
      <div class="col-xs-12 col-sm-12 col-md-6 col-md-offset-3">
	    <div class="row">
		     <div class="follow-us col-xs-12 col-sm-12 col-md-12">
			    <div class="social-label">FOLLOW US</div>
			    <ul class="social-icon-list">
          
          		 	<li class="Facebook"><a id="footer_facebook" href="https://www.facebook.com/elastic.co">Facebook</a></li>
          
          		 	<li class="Twitter"><a id="footer_twitter" href="https://www.twitter.com/elastic">Twitter</a></li>
          
          		 	<li class="LinkedIn"><a id="footer_linkedin" href="https://www.linkedin.com/company/elastic-co">LinkedIn</a></li>
          
          		 	<li class="Xing"><a id="footer_xing" href="https://www.xing.com/companies/elastic.co">Xing</a></li>
          
          		 	<li class="YouTube"><a id="footer_youtube" href="https://www.youtube.com/user/elasticsearch">YouTube</a></li>
          
		  		</ul>
		     </div>
	    </div>
      </div>
    </div>
    <!-- Social Media Section end-->
    <div class="row">
	<div class="col-xs-12 col-sm-12 col-md-11">
		<div class="copyright">
			<ul>
				<li><a href="/legal/trademarks">Trademarks</a></li>
				<li><a href="/legal/terms-of-use">Terms of Use</a></li>
				<li><a href="/legal/privacy-statement">Privacy</a></li>
				<li><a href="/brand">Brand</a></li>
			</ul>
			<div class="copyright-content">
				<div class="footer-text">
					<p>© 2019. Elasticsearch B.V. All Rights Reserved
					</p>
					<p>Elasticsearch is a trademark of Elasticsearch B.V., registered in the U.S. and in other countries.
					</p>
					<p>Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a> in the United States and/or other countries.
					</p>
				</div>
			</div>
		</div>
	</div>
	<div class="col-xs-2 col-xs-offset-5 col-sm-1 col-sm-offset-5 col-md-1 col-md-offset-0">
		<div class="footer-logo"><a href="/"><img src="/static/images/svg/logo-elastic-footer-stacked-999.svg" class="img-responsive"></a>
		</div>
	</div>
</div>
  </div>
</footer>
<!-- Footer Section end-->

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>
 
     
<script type="text/javascript">
$(document).ready(function(){
	if (window.location.hash.length) {
	      var target = $(window.location.hash);
	      target = target.length ? target : $(window.location.hash);
	      if (target.length) {
	        setTimeout(function(){ $(window).scrollTop(target.offset().top - 60); }, 1200);        
	      }
	}
	$('#guide').on('click','a[href*=#]:not([href=#])',function(e) {
			var flag=true;
		      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
		          var target = $(this.hash);
		          target = target.length ? target :$(this.hash);
		          if (target.length) {
		            if(flag){
		              flag=false;
		              var heightScroll=($('.tertiary-nav.navbar-fixed-top').height())?60:110;
		              $('html,body').animate({
		                  scrollTop: target.offset().top - heightScroll
		                }, 2000, function(){
		                  flag=true;
		                });
		            }                    
		          }
		      }
		    
	});

})

</script>

     <style></style>
     
  
            <script type="text/javascript" src="docs.js"></script>
<script type='text/javascript' src='https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=yaml'></script>

            </body>
        
</html>