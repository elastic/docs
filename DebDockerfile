# The asciidoctor docker image doesn't really have versions so we build
# directly on Alpine and install asciidoctor ourselves so we can pin its
# version.
FROM debian:9.6

LABEL MAINTAINERS="Nik Everett <nik@elastic.co>"

# Used by the docs build or asciidoctor
RUN apt-get -qq update && apt-get -qq --no-install-recommends install \
bash \
curl \
git \
libxml2-utils \
make \
nginx \
openssh-client \
perl-base \
python \
ruby \
unzip \
xsltproc

# Install asciidoctor, but don't keep the -devel deps around
RUN apt-get -qq --no-install-recommends install \
build-essential \
cmake \
libxml2-dev \
ruby-dev \
&& gem install --no-document \
asciidoctor:1.5.8 \
asciidoctor-diagram:1.5.12 \
asciimath:1.0.8 \
thread_safe:0.3.6
